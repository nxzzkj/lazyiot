
/*
 * Title: IceLink WebRTC Extension for JavaScript
 * Version: 2.9.32
 * Copyright Frozen Mountain Software 2011+
 */

!function(e,t,n){if("function"==typeof define&&define.amd)define(e,t,n);else if("object"==typeof exports){for(var r=0;r<t.length;r++)require("./"+t[r]);module.exports=n()}else this[e]=n()}("fm.icelink.webrtc",["fm.icelink","fm"],function(){if("undefined"==typeof global||global.window||(global.window=global,global.document={cookie:""}),!window.fm)throw new Error("fm must be loaded before fm.icelink.webrtc.");if(!window.fm.icelink)throw new Error("fm.icelink must be loaded before fm.icelink.webrtc.");window.fm.icelink.webrtc||(window.fm.icelink.webrtc={}),fm.icelink.webrtc.getVersion=function(){return"2.9.32"};var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.audioStream=function(n){function r(t,n){if(this._onStreamLinkDown=e(this._onStreamLinkDown,this),this._onStreamLinkUp=e(this._onStreamLinkUp,this),this._onStreamLinkInit=e(this._onStreamLinkInit,this),!t)throw new Error("WebRTC audio streams require a local media stream.");arguments.length<2&&(n=!0),r.__super__.constructor.call(this,fm.icelink.streamType.Audio,t,n,fm.icelink.streamProtocol.Rtp),this.addOnLinkInit(this._onStreamLinkInit),this.addOnLinkUp(this._onStreamLinkUp),this.addOnLinkDown(this._onStreamLinkDown)}return t(r,n),r.prototype._onStreamLinkInit=function(e){var t;return t=this.getLocalStream().getCreateAudioRenderProvider()(),t?e.getLink().setLocalAudioRenderProvider(t,e.getStreamIndex()):void 0},r.prototype._onStreamLinkUp=function(e){var t,n;return t=e.getLink().getLocalAudioRenderProvider(e.getStreamIndex()),n=e.getLink().getRemoteStreamInternal(),t&&(t.setRemoteStream(n),n&&n.setAudioRenderProvider(t)),e.getLink().setRemoteStream(n)},r.prototype._onStreamLinkDown=function(e){return e.getLink().unsetLocalAudioRenderProvider(e.getStreamIndex())},r}(fm.icelink.stream);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.videoStream=function(n){function r(t,n){if(this._onStreamLinkDown=e(this._onStreamLinkDown,this),this._onStreamLinkUp=e(this._onStreamLinkUp,this),this._onStreamLinkInit=e(this._onStreamLinkInit,this),!t)throw new Error("WebRTC video streams require a local media stream.");arguments.length<2&&(n=!0),r.__super__.constructor.call(this,fm.icelink.streamType.Video,t,n,fm.icelink.streamProtocol.Rtp),this.addOnLinkInit(this._onStreamLinkInit),this.addOnLinkUp(this._onStreamLinkUp),this.addOnLinkDown(this._onStreamLinkDown)}return t(r,n),r.prototype._onStreamLinkInit=function(e){var t;return t=this.getLocalStream().getCreateVideoRenderProvider()(),t?e.getLink().setLocalVideoRenderProvider(t,e.getStreamIndex()):void 0},r.prototype._onStreamLinkUp=function(e){var t,n;return t=e.getLink().getLocalVideoRenderProvider(e.getStreamIndex()),n=e.getLink().getRemoteStreamInternal(),t&&(t.setRemoteStream(n),n&&n.setVideoRenderProvider(t)),e.getLink().setRemoteStream(n)},r.prototype._onStreamLinkDown=function(e){return e.getLink().unsetLocalVideoRenderProvider(e.getStreamIndex())},r}(fm.icelink.stream);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.dataChannelStream=function(n){function r(t,n){if(this.getChannelInfos=e(this.getChannelInfos,this),!t||0===t.length)throw new Error("WebRTC data channel streams require at least one data channel description.");arguments.length<2&&(n=!0),r.__super__.constructor.call(this,fm.icelink.streamType.Application,null,n,fm.icelink.streamProtocol.Rtp),this._channelInfos=t}return t(r,n),r.prototype._channelInfos=null,r.prototype.getChannelInfos=function(){return this._channelInfos},r}(fm.icelink.stream);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.reliableDataStream=function(n){function r(t){this.getChannelInfos=e(this.getChannelInfos,this);var n;if(!t||0===t.length)throw new Error("WebRTC reliable data channel streams require at least one data channel description.");n=!0,r.__super__.constructor.call(this,fm.icelink.streamType.Application,null,n,fm.icelink.streamProtocol.Sctp),this._reliableDataChannels=t}return t(r,n),r.prototype._reliableDataChannels=null,r.prototype.getChannelInfos=function(){return this._reliableDataChannels},r}(fm.icelink.stream),fm.icelink.webrtc.reliableDataType={String:1,Binary:2},fm.icelink.webrtc.layoutDirection={Horizontal:1,Vertical:2},fm.icelink.webrtc.layoutScale={Contain:1,Cover:2,Stretch:3},fm.icelink.webrtc.layoutAlignment={TopLeft:1,Top:2,TopRight:3,Left:4,Center:5,Right:6,BottomLeft:7,Bottom:8,BottomRight:9},fm.icelink.webrtc.layoutMode={FloatLocal:1,FloatRemote:2,Block:3,Inline:4},fm.icelink.webrtc.layoutOrigin={TopLeft:1,TopRight:2,BottomRight:3,BottomLeft:4},fm.icelink.webrtc.videoSource={Camera:1,Screen:2};var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.reliableDataReceiveArgs=function(n){function r(){this.toJson=e(this.toJson,this),this.setDataString=e(this.setDataString,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getDataType=e(this.getDataType,this),this.getDataString=e(this.getDataString,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._channel=null,r.prototype._dataBytes=null,r.prototype._dataString=null,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeReliableDataReceiveArgs(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeReliableDataReceiveArgs(e)},r.prototype.getChannel=function(){return this._channel},r.prototype.getDataBytes=function(){return this._dataBytes},r.prototype.getDataString=function(){return this._dataString},r.prototype.getDataType=function(){return fm.global.equals(this.getDataString(),null)?fm.icelink.webrtc.reliableDataType.Binary:fm.icelink.webrtc.reliableDataType.String},r.prototype.setChannel=function(){var e;return e=arguments[0],this._channel=e},r.prototype.setDataBytes=function(){var e;return e=arguments[0],this._dataBytes=e},r.prototype.setDataString=function(){var e;return e=arguments[0],this._dataString=e},r.prototype.toJson=function(){return fm.icelink.webrtc.reliableDataReceiveArgs.toJson(this)},r}(fm.icelink.baseLinkArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.layoutCompleteArgs=function(n){function r(){this.setLayoutManager=e(this.setLayoutManager,this),this.getLayoutManager=e(this.getLayoutManager,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._layoutManager=null,r.prototype.getLayoutManager=function(){return this._layoutManager},r.prototype.setLayoutManager=function(){var e;return e=arguments[0],this._layoutManager=e},r}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.layoutArgs=function(n){function r(){this.setRemoteCount=e(this.setRemoteCount,this),this.setLayoutWidth=e(this.setLayoutWidth,this),this.setLayoutManager=e(this.setLayoutManager,this),this.setLayoutHeight=e(this.setLayoutHeight,this),this.setLayout=e(this.setLayout,this),this.getRemoteCount=e(this.getRemoteCount,this),this.getLayoutWidth=e(this.getLayoutWidth,this),this.getLayoutManager=e(this.getLayoutManager,this),this.getLayoutHeight=e(this.getLayoutHeight,this),this.getLayout=e(this.getLayout,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._layout=null,r.prototype._layoutHeight=0,r.prototype._layoutManager=null,r.prototype._layoutWidth=0,r.prototype._remoteCount=0,r.prototype.getLayout=function(){return this._layout},r.prototype.getLayoutHeight=function(){return this._layoutHeight},r.prototype.getLayoutManager=function(){return this._layoutManager},r.prototype.getLayoutWidth=function(){return this._layoutWidth},r.prototype.getRemoteCount=function(){return this._remoteCount},r.prototype.setLayout=function(){var e;return e=arguments[0],this._layout=e},r.prototype.setLayoutHeight=function(){var e;return e=arguments[0],this._layoutHeight=e},r.prototype.setLayoutManager=function(){var e;return e=arguments[0],this._layoutManager=e},r.prototype.setLayoutWidth=function(){var e;return e=arguments[0],this._layoutWidth=e},r.prototype.setRemoteCount=function(){var e;return e=arguments[0],this._remoteCount=e},r}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.layoutTable=function(n){function r(){this.setRowCount=e(this.setRowCount,this),this.setColumnCount=e(this.setColumnCount,this),this.setCellWidth=e(this.setCellWidth,this),this.setCellHeight=e(this.setCellHeight,this),this.getRowCount=e(this.getRowCount,this),this.getColumnCount=e(this.getColumnCount,this),this.getCellWidth=e(this.getCellWidth,this),this.getCellHeight=e(this.getCellHeight,this);var t,n,s,i,o;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(i=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),i):(s=arguments[0],o=arguments[1],n=arguments[2],t=arguments[3],i=r.__super__.constructor.call(this),this.setColumnCount(s),this.setRowCount(o),this.setCellWidth(n),this.setCellHeight(t),i)}return t(r,n),r.prototype._cellHeight=0,r.prototype._cellWidth=0,r.prototype._columnCount=0,r.prototype._rowCount=0,r.prototype.getCellHeight=function(){return this._cellHeight},r.prototype.getCellWidth=function(){return this._cellWidth},r.prototype.getColumnCount=function(){return this._columnCount},r.prototype.getRowCount=function(){return this._rowCount},r.prototype.setCellHeight=function(){var e;return e=arguments[0],this._cellHeight=e},r.prototype.setCellWidth=function(){var e;return e=arguments[0],this._cellWidth=e},r.prototype.setColumnCount=function(){var e;return e=arguments[0],this._columnCount=e},r.prototype.setRowCount=function(){var e;return e=arguments[0],this._rowCount=e},r}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.reliableDataChannel=function(n){function r(){this.toJson=e(this.toJson,this),this.setUnordered=e(this.setUnordered,this),this.setSubprotocol=e(this.setSubprotocol,this),this.setOnReceive=e(this.setOnReceive,this),this.setLabel=e(this.setLabel,this),this.setIdentifier=e(this.setIdentifier,this),this.removeOnUnhandledException=e(this.removeOnUnhandledException,this),this.raiseUnhandledException=e(this.raiseUnhandledException,this),this.raiseOnReceiveString=e(this.raiseOnReceiveString,this),this.raiseOnReceiveBytes=e(this.raiseOnReceiveBytes,this),this.getUnordered=e(this.getUnordered,this),this.getSubprotocol=e(this.getSubprotocol,this),this.getOnReceive=e(this.getOnReceive,this),this.getLabel=e(this.getLabel,this),this.getIdentifier=e(this.getIdentifier,this),this.addOnUnhandledException=e(this.addOnUnhandledException,this);var t,n,s,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),this.setIdentifier(fm.guid.newGuid().toString()),fm.util.attachProperties(this,arguments[0]),t):1===arguments.length?(n=arguments[0],r.call(this,!1,n),t):2===arguments.length?(i=arguments[0],n=arguments[1],r.call(this,i,n,""),t):0===arguments.length?(t=r.__super__.constructor.call(this),this.setIdentifier(fm.guid.newGuid().toString()),t):3===arguments.length?(i=arguments[0],n=arguments[1],s=arguments[2],r.call(this),this.setUnordered(i),this.setLabel(n),this.setSubprotocol(s),t):void 0}return t(r,n),r.prototype._identifier=null,r.prototype._label=null,r.prototype._onReceive=null,r.prototype._onUnhandledException=null,r.prototype._subprotocol=null,r.prototype._unordered=!1,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeReliableDataChannel(e)},r.fromJsonMultiple=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeReliableDataChannelArray(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeReliableDataChannel(e)},r.toJsonMultiple=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeReliableDataChannelArray(e)},r.prototype.addOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,e)},r.prototype.getIdentifier=function(){return this._identifier},r.prototype.getLabel=function(){return this._label},r.prototype.getOnReceive=function(){return this._onReceive},r.prototype.getSubprotocol=function(){return this._subprotocol},r.prototype.getUnordered=function(){return this._unordered},r.prototype.raiseOnReceiveBytes=function(){var e,t,n,r,s,i;if(r=arguments[0],e=arguments[1],s=this.getOnReceive(),!fm.global.equals(s,null))try{return i=new fm.icelink.webrtc.reliableDataReceiveArgs,i.setLink(r),i.setConference(r.getConference()),i.setChannel(this),i.setDataBytes(e),i.setDynamicProperties(r.getDynamicProperties()),s(i)}catch(t){if(n=t,!this.raiseUnhandledException(n))return fm.asyncException.asyncThrow(n,"ReliableDataChannel -> OnReceiveBytes")}finally{}},r.prototype.raiseOnReceiveString=function(){var e,t,n,r,s,i;if(r=arguments[0],e=arguments[1],s=this.getOnReceive(),!fm.global.equals(s,null))try{return i=new fm.icelink.webrtc.reliableDataReceiveArgs,i.setLink(r),i.setConference(r.getConference()),i.setChannel(this),i.setDataString(e),i.setDynamicProperties(r.getDynamicProperties()),s(i)}catch(t){if(n=t,!this.raiseUnhandledException(n))return fm.asyncException.asyncThrow(n,"ReliableDataChannel -> OnReceiveString")}finally{}},r.prototype.raiseUnhandledException=function(){var e,t,n,r,s,i;if(n=arguments[0],s=this._onUnhandledException,!fm.global.equals(s,null)){e=new fm.icelink.unhandledExceptionArgs,e.setException(n),i=e;try{s(i)}catch(t){r=t,fm.asyncException.asyncThrow(r,"ReliableDataChannel -> OnUnhandledException")}finally{}return i.getHandled()}return!1},r.prototype.removeOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,e)},r.prototype.setIdentifier=function(){var e;return e=arguments[0],this._identifier=e},r.prototype.setLabel=function(){var e;return e=arguments[0],this._label=e},r.prototype.setOnReceive=function(){var e;return e=arguments[0],this._onReceive=e},r.prototype.setSubprotocol=function(){var e;return e=arguments[0],this._subprotocol=e},r.prototype.setUnordered=function(){var e;return e=arguments[0],this._unordered=e},r.prototype.toJson=function(){return fm.icelink.webrtc.reliableDataChannel.toJson(this)},r}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.baseMediaArgs=function(n){function r(){this.setVideoWidth=e(this.setVideoWidth,this),this.setVideoHeight=e(this.setVideoHeight,this),this.setVideoFrameRate=e(this.setVideoFrameRate,this),this.setVideoDeviceNumber=e(this.setVideoDeviceNumber,this),this.setVideo=e(this.setVideo,this),this.setDefaultVideoSource=e(this.setDefaultVideoSource,this),this.setDefaultVideoScale=e(this.setDefaultVideoScale,this),this.setDefaultVideoPreviewScale=e(this.setDefaultVideoPreviewScale,this),this.setAudioDeviceNumber=e(this.setAudioDeviceNumber,this),this.setAudio=e(this.setAudio,this),this.getVideoWidth=e(this.getVideoWidth,this),this.getVideoHeight=e(this.getVideoHeight,this),this.getVideoFrameRate=e(this.getVideoFrameRate,this),this.getVideoDeviceNumber=e(this.getVideoDeviceNumber,this),this.getVideo=e(this.getVideo,this),this.getDefaultVideoSource=e(this.getDefaultVideoSource,this),this.getDefaultVideoScale=e(this.getDefaultVideoScale,this),this.getDefaultVideoPreviewScale=e(this.getDefaultVideoPreviewScale,this),this.getAudioDeviceNumber=e(this.getAudioDeviceNumber,this),this.getAudio=e(this.getAudio,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),this.setAudioDeviceNumber(null),this.setVideoDeviceNumber(null),fm.util.attachProperties(this,arguments[0]),t):(t=r.__super__.constructor.call(this),this.setAudioDeviceNumber(null),this.setVideoDeviceNumber(null),t)}return t(r,n),r.prototype._audio=!1,r.prototype._audioDeviceNumber=null,r.prototype._defaultVideoPreviewScale=null,r.prototype._defaultVideoScale=null,r.prototype._defaultVideoSource=null,r.prototype._video=!1,r.prototype._videoDeviceNumber=null,r.prototype._videoFrameRate=0,r.prototype._videoHeight=0,r.prototype._videoWidth=0,r.prototype.getAudio=function(){return this._audio},r.prototype.getAudioDeviceNumber=function(){return this._audioDeviceNumber},r.prototype.getDefaultVideoPreviewScale=function(){return this._defaultVideoPreviewScale},r.prototype.getDefaultVideoScale=function(){return this._defaultVideoScale},r.prototype.getDefaultVideoSource=function(){return this._defaultVideoSource},r.prototype.getVideo=function(){return this._video},r.prototype.getVideoDeviceNumber=function(){return this._videoDeviceNumber},r.prototype.getVideoFrameRate=function(){return this._videoFrameRate},r.prototype.getVideoHeight=function(){return this._videoHeight},r.prototype.getVideoWidth=function(){return this._videoWidth},r.prototype.setAudio=function(){var e;return e=arguments[0],this._audio=e},r.prototype.setAudioDeviceNumber=function(){var e;return e=arguments[0],this._audioDeviceNumber=e},r.prototype.setDefaultVideoPreviewScale=function(){var e;return e=arguments[0],this._defaultVideoPreviewScale=e},r.prototype.setDefaultVideoScale=function(){var e;return e=arguments[0],this._defaultVideoScale=e},r.prototype.setDefaultVideoSource=function(){var e;return e=arguments[0],this._defaultVideoSource=e},r.prototype.setVideo=function(){var e;return e=arguments[0],this._video=e},r.prototype.setVideoDeviceNumber=function(){var e;return e=arguments[0],this._videoDeviceNumber=e},r.prototype.setVideoFrameRate=function(){var e;return e=arguments[0],this._videoFrameRate=e},r.prototype.setVideoHeight=function(){var e;return e=arguments[0],this._videoHeight=e},r.prototype.setVideoWidth=function(){var e;return e=arguments[0],this._videoWidth=e},r}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.dataChannelReceiveArgs=function(n){function r(){this.toJson=e(this.toJson,this),this.setData=e(this.setData,this),this.setChannelInfo=e(this.setChannelInfo,this),this.getData=e(this.getData,this),this.getChannelInfo=e(this.getChannelInfo,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._channelInfo=null,r.prototype._data=null,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeDataChannelReceiveArgs(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeDataChannelReceiveArgs(e)},r.prototype.getChannelInfo=function(){return this._channelInfo},r.prototype.getData=function(){return this._data},r.prototype.setChannelInfo=function(){var e;return e=arguments[0],this._channelInfo=e},r.prototype.setData=function(){var e;return e=arguments[0],this._data=e},r.prototype.toJson=function(){return fm.icelink.webrtc.dataChannelReceiveArgs.toJson(this)},r}(fm.icelink.baseLinkArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.layout=function(n){function r(){this.swapRemoteFrames=e(this.swapRemoteFrames,this),this.swapLocalFrame=e(this.swapLocalFrame,this),this.swapFrames=e(this.swapFrames,this),this.setRemoteFrames=e(this.setRemoteFrames,this),this.setLocalFrame=e(this.setLocalFrame,this),this.getRemoteFrames=e(this.getRemoteFrames,this),this.getLocalFrame=e(this.getLocalFrame,this),this.getAllFrames=e(this.getAllFrames,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),this.__localFrame=new fm.icelink.webrtc.layoutFrame(0,0,0,0),this.__remoteFrames=new Array(0),fm.util.attachProperties(this,arguments[0]),t):(t=r.__super__.constructor.call(this),this.__localFrame=new fm.icelink.webrtc.layoutFrame(0,0,0,0),this.__remoteFrames=new Array(0),t)}return t(r,n),r.prototype.__localFrame=null,r.prototype.__remoteFrames=null,r.prototype.getAllFrames=function(){var e;return e=[],fm.arrayExtensions.add(e,this.getLocalFrame()),fm.arrayExtensions.addRange(e,this.getRemoteFrames()),fm.arrayExtensions.toArray(e)},r.prototype.getLocalFrame=function(){return this.__localFrame},r.prototype.getRemoteFrames=function(){return this.__remoteFrames},r.prototype.setLocalFrame=function(){var e;return e=arguments[0],fm.global.equals(e,null)?this.__localFrame=new fm.icelink.webrtc.layoutFrame(0,0,0,0):this.__localFrame=e},r.prototype.setRemoteFrames=function(){var e;return e=arguments[0],fm.global.equals(e,null)?this.__remoteFrames=new Array(0):this.__remoteFrames=e},r.prototype.swapFrames=function(){var e,t,n,r,s,i;return e=arguments[0],t=arguments[1],s=e.getX(),i=e.getY(),r=e.getWidth(),n=e.getHeight(),e.setX(t.getX()),e.setY(t.getY()),e.setWidth(t.getWidth()),e.setHeight(t.getHeight()),t.setX(s),t.setY(i),t.setWidth(r),t.setHeight(n)},r.prototype.swapLocalFrame=function(){var e,t,n;return t=arguments[0],e=this.getLocalFrame(),n=this.getRemoteFrames(),!fm.global.equals(e,null)&&t<n.length?this.swapFrames(e,n[t]):void 0},r.prototype.swapRemoteFrames=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=this.getRemoteFrames(),e<n.length&&t<n.length?this.swapFrames(n[e],n[t]):void 0},r}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.layoutFrame=function(n){function r(){this.setY=e(this.setY,this),this.setX=e(this.setX,this),this.setWidth=e(this.setWidth,this),this.setHeight=e(this.setHeight,this),this.getY=e(this.getY,this),this.getX=e(this.getX,this),this.getWidth=e(this.getWidth,this),this.getHeight=e(this.getHeight,this);var t,n,s,i,o;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),n):(i=arguments[0],o=arguments[1],s=arguments[2],t=arguments[3],n=r.__super__.constructor.call(this),this.setX(i),this.setY(o),this.setWidth(s),this.setHeight(t),n)}return t(r,n),r.prototype._height=0,r.prototype._width=0,r.prototype._x=0,r.prototype._y=0,r.getScaledFrame=function(){var e,t,n,r,s,i,o,a,u,l,c;return a=arguments[0],o=arguments[1],i=arguments[2],n=arguments[3],t=arguments[4],l=0,c=0,u=o,e=i,fm.global.equals(o,0)||fm.global.equals(i,0)||fm.global.equals(n,0)||fm.global.equals(t,0)?((fm.global.equals(o,0)||fm.global.equals(n,0))&&(u=0,l=o/2),(fm.global.equals(i,0)||fm.global.equals(t,0))&&(e=0,c=i/2)):fm.global.equals(a,fm.icelink.webrtc.layoutScale.Contain)?(r=o/i,s=n/t,r>s?(u=i*s,l=(o-u)/2):s>r&&(e=o/s,c=(i-e)/2)):fm.global.equals(a,fm.icelink.webrtc.layoutScale.Cover)&&(r=o/i,s=n/t,s>r?(u=i*s,l=(o-u)/2):r>s&&(e=o/s,c=(i-e)/2)),new fm.icelink.webrtc.layoutFrame(l,c,u,e)},r.prototype.getHeight=function(){return this._height},r.prototype.getWidth=function(){return this._width},r.prototype.getX=function(){return this._x},r.prototype.getY=function(){return this._y},r.prototype.setHeight=function(){var e;return e=arguments[0],this._height=e},r.prototype.setWidth=function(){var e;return e=arguments[0],this._width=e},r.prototype.setX=function(){var e;return e=arguments[0],this._x=e},r.prototype.setY=function(){var e;return e=arguments[0],this._y=e},r}(fm.object),fm.icelink.webrtc.conferenceExtensions=function(){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):void 0}return e.sendData=function(){var e,t,n,r,s,i,o,a,u,l;if(4===arguments.length)return n=arguments[0],t=arguments[1],r=arguments[2],l=arguments[3],o=n.getLink(l),fm.global.equals(o,null)?-1:fm.icelink.webrtc.linkExtensions.sendData(o,t,r);if(3===arguments.length){for(n=arguments[0],t=arguments[1],r=arguments[2],a=n.getLinks(),u={},e=a,s=0,i=e.length;i>s;s++)o=e[s],u[o.getPeerId()]=fm.icelink.webrtc.linkExtensions.sendData(o,t,r);return u}},e.sendReliableBytes=function(){var e,t,n,r,s,i,o,a,u,l;if(3===arguments.length){for(n=arguments[0],t=arguments[1],r=arguments[2],u=n.getLinks(),s=!0,e=u,i=0,o=e.length;o>i;i++)a=e[i],s=fm.icelink.webrtc.linkExtensions.sendReliableBytes(a,t,r)&&s;return s}return 4===arguments.length?(n=arguments[0],t=arguments[1],r=arguments[2],l=arguments[3],a=n.getLink(l),!fm.global.equals(a,null)&&fm.icelink.webrtc.linkExtensions.sendReliableBytes(a,t,r)):void 0},e.sendReliableString=function(){var e,t,n,r,s,i,o,a,u,l;if(3===arguments.length){for(n=arguments[0],t=arguments[1],r=arguments[2],u=n.getLinks(),s=!0,e=u,i=0,o=e.length;o>i;i++)a=e[i],s=fm.icelink.webrtc.linkExtensions.sendReliableString(a,t,r)&&s;return s}return 4===arguments.length?(n=arguments[0],t=arguments[1],r=arguments[2],l=arguments[3],a=n.getLink(l),!fm.global.equals(a,null)&&fm.icelink.webrtc.linkExtensions.sendReliableString(a,t,r)):void 0},fm.icelink.conference.prototype.sendData=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.conferenceExtensions.sendData.apply(this,arguments)):2===arguments.length?(e=arguments[0],t=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.conferenceExtensions.sendData.apply(this,arguments)):void 0},fm.icelink.conference.prototype.sendReliableBytes=function(){var e,t,n;return 2===arguments.length?(e=arguments[0],t=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.conferenceExtensions.sendReliableBytes.apply(this,arguments)):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.conferenceExtensions.sendReliableBytes.apply(this,arguments)):void 0},fm.icelink.conference.prototype.sendReliableString=function(){var e,t,n;return 2===arguments.length?(e=arguments[0],t=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.conferenceExtensions.sendReliableString.apply(this,arguments)):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.conferenceExtensions.sendReliableString.apply(this,arguments)):void 0},e}();var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.layoutPreset=function(n){function r(){this.setPreviewSize=e(this.setPreviewSize,this),this.setPreviewPadding=e(this.setPreviewPadding,this),this.setPreviewMode=e(this.setPreviewMode,this),this.setPreviewAlignment=e(this.setPreviewAlignment,this),this.setMode=e(this.setMode,this),this.setInlineMargin=e(this.setInlineMargin,this),this.setFloatWidthPercent=e(this.setFloatWidthPercent,this),this.setFloatWidth=e(this.setFloatWidth,this),this.setFloatMarginYPercent=e(this.setFloatMarginYPercent,this),this.setFloatMarginY=e(this.setFloatMarginY,this),this.setFloatMarginXPercent=e(this.setFloatMarginXPercent,this),this.setFloatMarginX=e(this.setFloatMarginX,this),this.setFloatHeightPercent=e(this.setFloatHeightPercent,this),this.setFloatHeight=e(this.setFloatHeight,this),this.setDirection=e(this.setDirection,this),this.setCellMargin=e(this.setCellMargin,this),this.setBlockWidthPercent=e(this.setBlockWidthPercent,this),this.setBlockWidth=e(this.setBlockWidth,this),this.setBlockMarginYPercent=e(this.setBlockMarginYPercent,this),this.setBlockMarginY=e(this.setBlockMarginY,this),this.setBlockMarginXPercent=e(this.setBlockMarginXPercent,this),this.setBlockMarginX=e(this.setBlockMarginX,this),this.setBlockHeightPercent=e(this.setBlockHeightPercent,this),this.setBlockHeight=e(this.setBlockHeight,this),this.setAlignment=e(this.setAlignment,this),this.getTopRowIndexes=e(this.getTopRowIndexes,this),this.getRightColumnIndexes=e(this.getRightColumnIndexes,this),this.getPreviewSize=e(this.getPreviewSize,this),this.getPreviewPadding=e(this.getPreviewPadding,this),this.getPreviewMode=e(this.getPreviewMode,this),this.getPreviewAlignment=e(this.getPreviewAlignment,this),this.getMode=e(this.getMode,this),this.getLeftColumnIndexes=e(this.getLeftColumnIndexes,this),this.getInlineMargin=e(this.getInlineMargin,this),this.getInlineLayout=e(this.getInlineLayout,this),this.getFloatWidthPercent=e(this.getFloatWidthPercent,this),this.getFloatWidth=e(this.getFloatWidth,this),this.getFloatRemoteLayout=e(this.getFloatRemoteLayout,this),this.getFloatMarginYPercent=e(this.getFloatMarginYPercent,this),this.getFloatMarginY=e(this.getFloatMarginY,this),this.getFloatMarginXPercent=e(this.getFloatMarginXPercent,this),this.getFloatMarginX=e(this.getFloatMarginX,this),this.getFloatLocalLayout=e(this.getFloatLocalLayout,this),this.getFloatHeightPercent=e(this.getFloatHeightPercent,this),this.getFloatHeight=e(this.getFloatHeight,this),this.getDirection=e(this.getDirection,this),this.getCenterRowIndexes=e(this.getCenterRowIndexes,this),this.getCenterColumnIndexes=e(this.getCenterColumnIndexes,this),this.getCellMargin=e(this.getCellMargin,this),
this.getBottomRowIndexes=e(this.getBottomRowIndexes,this),this.getBlockWidthPercent=e(this.getBlockWidthPercent,this),this.getBlockWidth=e(this.getBlockWidth,this),this.getBlockMarginYPercent=e(this.getBlockMarginYPercent,this),this.getBlockMarginY=e(this.getBlockMarginY,this),this.getBlockMarginXPercent=e(this.getBlockMarginXPercent,this),this.getBlockMarginX=e(this.getBlockMarginX,this),this.getBlockLayout=e(this.getBlockLayout,this),this.getBlockHeightPercent=e(this.getBlockHeightPercent,this),this.getBlockHeight=e(this.getBlockHeight,this),this.getAlignment=e(this.getAlignment,this),this.copyToPreset=e(this.copyToPreset,this),this.calculateLayout=e(this.calculateLayout,this),this.calculateInlineFrames=e(this.calculateInlineFrames,this),this.calculateInlineFrame=e(this.calculateInlineFrame,this),this.calculateFloatFrames=e(this.calculateFloatFrames,this),this.calculateFloatFrame=e(this.calculateFloatFrame,this),this.calculateFillFrame=e(this.calculateFillFrame,this),this.calculateBlockFrame=e(this.calculateBlockFrame,this),this.applyPreset=e(this.applyPreset,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),this.__floatWidthPercent=0,this.__floatHeightPercent=0,this.__floatMarginXPercent=0,this.__floatMarginYPercent=0,this.__floatWidth=0,this.__floatHeight=0,this.__floatMarginX=0,this.__floatMarginY=0,this.__blockWidthPercent=0,this.__blockHeightPercent=0,this.__blockMarginXPercent=0,this.__blockMarginYPercent=0,this.__blockWidth=0,this.__blockHeight=0,this.__blockMarginX=0,this.__blockMarginY=0,this.setMode(fm.icelink.webrtc.layoutMode.FloatLocal),this.setDirection(fm.icelink.webrtc.layoutDirection.Horizontal),this.setAlignment(fm.icelink.webrtc.layoutAlignment.BottomRight),fm.util.attachProperties(this,arguments[0]),t):(t=r.__super__.constructor.call(this),this.__floatWidthPercent=0,this.__floatHeightPercent=0,this.__floatMarginXPercent=0,this.__floatMarginYPercent=0,this.__floatWidth=0,this.__floatHeight=0,this.__floatMarginX=0,this.__floatMarginY=0,this.__blockWidthPercent=0,this.__blockHeightPercent=0,this.__blockMarginXPercent=0,this.__blockMarginYPercent=0,this.__blockWidth=0,this.__blockHeight=0,this.__blockMarginX=0,this.__blockMarginY=0,this.setMode(fm.icelink.webrtc.layoutMode.FloatLocal),this.setDirection(fm.icelink.webrtc.layoutDirection.Horizontal),this.setAlignment(fm.icelink.webrtc.layoutAlignment.BottomRight),t)}return t(r,n),r.prototype.__blockHeight=0,r.prototype.__blockHeightPercent=0,r.prototype.__blockMarginX=0,r.prototype.__blockMarginXPercent=0,r.prototype.__blockMarginY=0,r.prototype.__blockMarginYPercent=0,r.prototype.__blockWidth=0,r.prototype.__blockWidthPercent=0,r.prototype.__floatHeight=0,r.prototype.__floatHeightPercent=0,r.prototype.__floatMarginX=0,r.prototype.__floatMarginXPercent=0,r.prototype.__floatMarginY=0,r.prototype.__floatMarginYPercent=0,r.prototype.__floatWidth=0,r.prototype.__floatWidthPercent=0,r.prototype._alignment=null,r.prototype._direction=null,r.prototype._inlineMargin=0,r.prototype._mode=null,r.calculateTable=function(){var e,t,n,r,s,i,o,a,u,l,c,h;for(h=arguments[0],c=arguments[1],t=arguments[2],r=0,s=1,i=1,n=t;n>=1;)try{o=fm.mathAssistant.ceil(t/n),a=h/n,u=c/o,l=u>a?a:u,l>=r&&(r=l,s=n,i=o)}finally{n--}return e=fm.mathAssistant.floor(h/s),new fm.icelink.webrtc.layoutTable(s,i,e,fm.mathAssistant.floor(c/i))},r.divideByTwo=function(){var e;return e=arguments[0],fm.mathAssistant.floor(e/2)},r.getFacetime=function(){var e;return e=new fm.icelink.webrtc.layoutPreset,e.setMode(fm.icelink.webrtc.layoutMode.FloatLocal),e.setAlignment(fm.icelink.webrtc.layoutAlignment.BottomRight),e.setFloatMarginX(10),e.setFloatMarginY(10),e.setFloatWidthPercent(.25),e.setFloatHeightPercent(.25),e.setInlineMargin(0),e},r.getGoogleHangouts=function(){var e,t;return fm.icelink.webrtc.defaultProviders.isMobile()?(e=new fm.icelink.webrtc.layoutPreset,e.setMode(fm.icelink.webrtc.layoutMode.FloatRemote),e.setAlignment(fm.icelink.webrtc.layoutAlignment.BottomRight),e.setFloatMarginX(0),e.setFloatMarginY(10),e.setFloatWidthPercent(.25),e.setFloatHeightPercent(.25),e.setInlineMargin(5),e):(t=new fm.icelink.webrtc.layoutPreset,t.setMode(fm.icelink.webrtc.layoutMode.Block),t.setAlignment(fm.icelink.webrtc.layoutAlignment.Top),t.setBlockWidthPercent(.666666666666667),t.setBlockHeightPercent(.666666666666667),t.setInlineMargin(0),t)},r.getSingleLayout=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=new fm.icelink.webrtc.layout,e.setLocalFrame(new fm.icelink.webrtc.layoutFrame(0,0,n,t)),e},r.getSkype=function(){var e;return fm.icelink.webrtc.defaultProviders.isMobile()?fm.icelink.webrtc.layoutPreset.getFacetime():(e=new fm.icelink.webrtc.layoutPreset,e.setMode(fm.icelink.webrtc.layoutMode.Block),e.setDirection(fm.icelink.webrtc.layoutDirection.Horizontal),e.setAlignment(fm.icelink.webrtc.layoutAlignment.Bottom),e.setBlockMarginX(10),e.setBlockMarginY(10),e.setBlockWidthPercent(.333333333333333),e.setBlockHeightPercent(.333333333333333),e.setInlineMargin(10),e)},r.getXMax=function(){var e,t,n,r;if(t=arguments[0],fm.global.equals(t.length,0))return t[0].getX();for(r=t[0].getX(),n=1;n<t.length;)try{e=t[n],e.getX()>r&&(r=e.getX())}finally{n++}return r},r.getXMid=function(){var e,t,n,r,s,i,o,a,u;if(t=arguments[0],u=fm.icelink.webrtc.layoutPreset.getXMin(t),a=fm.icelink.webrtc.layoutPreset.getXMax(t),fm.global.equals(u,a))return u;for(r=fm.icelink.webrtc.layoutPreset.divideByTwo(u+a),o=t[0].getX(),s=fm.mathAssistant.abs(r-o),n=1;n<t.length;)try{e=t[n],i=fm.mathAssistant.abs(r-e.getX()),s>i&&(o=e.getX(),s=i)}finally{n++}return o},r.getXMin=function(){var e,t,n,r;if(t=arguments[0],fm.global.equals(t.length,0))return t[0].getX();for(r=t[0].getX(),n=1;n<t.length;)try{e=t[n],e.getX()<r&&(r=e.getX())}finally{n++}return r},r.getYMax=function(){var e,t,n,r;if(t=arguments[0],fm.global.equals(t.length,0))return t[0].getY();for(r=t[0].getY(),n=1;n<t.length;)try{e=t[n],e.getY()>r&&(r=e.getY())}finally{n++}return r},r.getYMid=function(){var e,t,n,r,s,i,o,a,u;if(t=arguments[0],u=fm.icelink.webrtc.layoutPreset.getYMin(t),a=fm.icelink.webrtc.layoutPreset.getYMax(t),fm.global.equals(u,a))return u;for(r=fm.icelink.webrtc.layoutPreset.divideByTwo(u+a),o=t[0].getY(),s=fm.mathAssistant.abs(r-o),n=1;n<t.length;)try{e=t[n],i=fm.mathAssistant.abs(r-e.getY()),s>i&&(o=e.getY(),s=i)}finally{n++}return o},r.getYMin=function(){var e,t,n,r;if(t=arguments[0],fm.global.equals(t.length,0))return t[0].getY();for(r=t[0].getY(),n=1;n<t.length;)try{e=t[n],e.getY()<r&&(r=e.getY())}finally{n++}return r},r.mergeLayoutFrames=function(){var e,t,n,r,s,i;for(e=arguments[0],n=arguments[1],r=e.length,s=n.length,t=new Array(r+s),i=0;r>i;)try{t[i]=e[i]}finally{i++}for(i=0;s>i;)try{t[i+r]=n[i]}finally{i++}return t},r.spliceLayoutFrame=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=t+1,fm.icelink.webrtc.layoutPreset.mergeLayoutFrames(fm.icelink.webrtc.layoutPreset.takeLayoutFrames(e,0,t),fm.icelink.webrtc.layoutPreset.takeLayoutFrames(e,n,e.length-n))},r.takeLayoutFrames=function(){var e,t,n,r,s;for(t=arguments[0],s=arguments[1],r=arguments[2],e=new Array(r),n=0;n<e.length;)try{e[n]=t[s+n]}finally{n++}return e},r.transformFrame=function(){var e,t,n,r,s,i;switch(n=arguments[0],i=arguments[1],s=arguments[2],r=arguments[3],e=!1,t=!1,i){case fm.icelink.webrtc.layoutOrigin.TopRight:e=!0;break;case fm.icelink.webrtc.layoutOrigin.BottomRight:e=!0,t=!0;break;case fm.icelink.webrtc.layoutOrigin.BottomLeft:t=!0}return e&&n.setX(s-n.getX()-n.getWidth()),t?n.setY(r-n.getY()-n.getHeight()):void 0},r.prototype.applyPreset=function(){var e;return e=arguments[0],this.setMode(e.getMode()),this.setDirection(e.getDirection()),this.setAlignment(e.getAlignment()),this.setFloatWidth(0),this.setFloatHeight(0),this.setFloatMarginX(0),this.setFloatMarginY(0),this.setFloatWidthPercent(0),this.setFloatHeightPercent(0),this.setFloatMarginXPercent(0),this.setFloatMarginYPercent(0),this.setBlockWidth(0),this.setBlockHeight(0),this.setBlockMarginX(0),this.setBlockMarginY(0),this.setBlockWidthPercent(0),this.setBlockHeightPercent(0),this.setBlockMarginXPercent(0),this.setBlockMarginYPercent(0),this.setInlineMargin(0),e.getFloatWidth()>0&&this.setFloatWidth(e.getFloatWidth()),e.getFloatHeight()>0&&this.setFloatHeight(e.getFloatHeight()),e.getFloatMarginX()>0&&this.setFloatMarginX(e.getFloatMarginX()),e.getFloatMarginY()>0&&this.setFloatMarginY(e.getFloatMarginY()),e.getFloatWidthPercent()>0&&this.setFloatWidthPercent(e.getFloatWidthPercent()),e.getFloatHeightPercent()>0&&this.setFloatHeightPercent(e.getFloatHeightPercent()),e.getFloatMarginXPercent()>0&&this.setFloatMarginXPercent(e.getFloatMarginXPercent()),e.getFloatMarginYPercent()>0&&this.setFloatMarginYPercent(e.getFloatMarginYPercent()),e.getBlockWidth()>0&&this.setBlockWidth(e.getBlockWidth()),e.getBlockHeight()>0&&this.setBlockHeight(e.getBlockHeight()),e.getBlockMarginX()>0&&this.setBlockMarginX(e.getBlockMarginX()),e.getBlockMarginY()>0&&this.setBlockMarginY(e.getBlockMarginY()),e.getBlockWidthPercent()>0&&this.setBlockWidthPercent(e.getBlockWidthPercent()),e.getBlockHeightPercent()>0&&this.setBlockHeightPercent(e.getBlockHeightPercent()),e.getBlockMarginXPercent()>0&&this.setBlockMarginXPercent(e.getBlockMarginXPercent()),e.getBlockMarginYPercent()>0&&this.setBlockMarginYPercent(e.getBlockMarginYPercent()),e.getInlineMargin()>0?this.setInlineMargin(e.getInlineMargin()):void 0},r.prototype.calculateBlockFrame=function(){var e,t,n,r,s,i,o,a;switch(n=arguments[0],t=arguments[1],r=arguments[2],s=arguments[3],fm.global.equals(this.getBlockWidth(),0)&&fm.global.equals(this.getBlockWidthPercent(),0)&&this.setBlockWidthPercent(.25),fm.global.equals(this.getBlockHeight(),0)&&fm.global.equals(this.getBlockHeightPercent(),0)&&this.setBlockHeightPercent(.25),i=this.getBlockWidth()>0?this.getBlockWidth():n*this.getBlockWidthPercent(),e=this.getBlockHeight()>0?this.getBlockHeight():t*this.getBlockHeightPercent(),r.setValue(this.getBlockMarginX()>0?this.getBlockMarginX():n*this.getBlockMarginXPercent()),s.setValue(this.getBlockMarginY()>0?this.getBlockMarginY():t*this.getBlockMarginYPercent()),o=0,this.getAlignment()){case fm.icelink.webrtc.layoutAlignment.Top:case fm.icelink.webrtc.layoutAlignment.Center:case fm.icelink.webrtc.layoutAlignment.Bottom:o=fm.icelink.webrtc.layoutPreset.divideByTwo(n-i);break;case fm.icelink.webrtc.layoutAlignment.TopRight:case fm.icelink.webrtc.layoutAlignment.Right:case fm.icelink.webrtc.layoutAlignment.BottomRight:o=n-i;break;default:o=0}switch(a=0,this.getAlignment()){case fm.icelink.webrtc.layoutAlignment.Left:case fm.icelink.webrtc.layoutAlignment.Center:case fm.icelink.webrtc.layoutAlignment.Right:a=fm.icelink.webrtc.layoutPreset.divideByTwo(t-e);break;case fm.icelink.webrtc.layoutAlignment.BottomLeft:case fm.icelink.webrtc.layoutAlignment.Bottom:case fm.icelink.webrtc.layoutAlignment.BottomRight:a=t-e;break;default:a=0}return new fm.icelink.webrtc.layoutFrame(o,a,i,e)},r.prototype.calculateFillFrame=function(){var e,t;return t=arguments[0],e=arguments[1],new fm.icelink.webrtc.layoutFrame(0,0,t,e)},r.prototype.calculateFloatFrame=function(){var e,t;return t=arguments[0],e=arguments[1],this.calculateFloatFrames(t,e,1)[0]},r.prototype.calculateFloatFrames=function(){var e,t,n,r,s,i,o,a,u,l,c,h,p,g,m,f,d,y,_,b,v,w,C,R,S,k,P;switch(g=arguments[0],p=arguments[1],o=arguments[2],fm.global.equals(this.getFloatWidth(),0)&&fm.global.equals(this.getFloatWidthPercent(),0)&&this.setFloatWidthPercent(.25),fm.global.equals(this.getFloatHeight(),0)&&fm.global.equals(this.getFloatHeightPercent(),0)&&this.setFloatHeightPercent(.25),C=this.getFloatWidth()>0?this.getFloatWidth():g*this.getFloatWidthPercent(),R=this.getFloatHeight()>0?this.getFloatHeight():p*this.getFloatHeightPercent(),S=this.getFloatMarginX()>0?this.getFloatMarginX():g*this.getFloatMarginXPercent(),k=this.getFloatMarginY()>0?this.getFloatMarginY():p*this.getFloatMarginYPercent(),fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Horizontal)?C=fm.mathAssistant.min(g,C*o):R=fm.mathAssistant.min(p,R*o),u=this.calculateInlineFrames(C,R,o,0,0),this.getAlignment()){case fm.icelink.webrtc.layoutAlignment.TopLeft:case fm.icelink.webrtc.layoutAlignment.Top:case fm.icelink.webrtc.layoutAlignment.TopRight:for(e=u,l=0,m=e.length;m>l;l++)a=e[l],a.setY(a.getY()+k);break;case fm.icelink.webrtc.layoutAlignment.Left:case fm.icelink.webrtc.layoutAlignment.Center:case fm.icelink.webrtc.layoutAlignment.Right:for(t=u,c=0,f=t.length;f>c;c++)a=t[c],a.setY(a.getY()+fm.icelink.webrtc.layoutPreset.divideByTwo(p-R));break;case fm.icelink.webrtc.layoutAlignment.BottomLeft:case fm.icelink.webrtc.layoutAlignment.Bottom:case fm.icelink.webrtc.layoutAlignment.BottomRight:for(n=u,h=0,d=n.length;d>h;h++)a=n[h],a.setY(a.getY()+(p-R-k))}switch(this.getAlignment()){case fm.icelink.webrtc.layoutAlignment.TopLeft:case fm.icelink.webrtc.layoutAlignment.Left:case fm.icelink.webrtc.layoutAlignment.BottomLeft:for(r=u,v=0,y=r.length;y>v;v++)a=r[v],a.setX(a.getX()+S);return u;case fm.icelink.webrtc.layoutAlignment.Top:case fm.icelink.webrtc.layoutAlignment.Center:case fm.icelink.webrtc.layoutAlignment.Bottom:for(s=u,w=0,_=s.length;_>w;w++)a=s[w],a.setX(a.getX()+fm.icelink.webrtc.layoutPreset.divideByTwo(g-C));return u;case fm.icelink.webrtc.layoutAlignment.TopRight:case fm.icelink.webrtc.layoutAlignment.Right:case fm.icelink.webrtc.layoutAlignment.BottomRight:for(i=u,P=0,b=i.length;b>P;P++)a=i[P],a.setX(a.getX()+(g-C-S));return u}return u},r.prototype.calculateInlineFrame=function(){var e,t,n,r,s,i,o,a;return n=arguments[0],r=arguments[1],t=arguments[2],e=arguments[3],s=fm.icelink.webrtc.layoutPreset.divideByTwo(this.getInlineMargin()),o=n-s,a=r-s,i=t-this.getInlineMargin(),new fm.icelink.webrtc.layoutFrame(o,a,i,e-this.getInlineMargin())},r.prototype.calculateInlineFrames=function(){var e,t,n,r,s,i,o,a,u,l,c,h,p,g,m,f,d,y,_,b,v,w,C,R,S,k;if(u=arguments[0],a=arguments[1],i=arguments[2],e=arguments[3],t=arguments[4],l=[],k=fm.icelink.webrtc.layoutPreset.calculateTable(u+this.getInlineMargin(),a+this.getInlineMargin(),i),s=k.getColumnCount(),S=k.getRowCount(),r=k.getCellWidth(),n=k.getCellHeight(),b=fm.icelink.webrtc.layoutPreset.divideByTwo(this.getInlineMargin()),fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Horizontal))for(v=0,w=t+b,C=a-S*n+this.getInlineMargin(),R=0;S>R;){if(c=C>R?1:0,h=s,fm.global.equals(R,S-1)&&(h=i-v),p=e+b,fm.global.equals(R,S-1)&&S>1)g=p-b,m=w-b,fm.arrayExtensions.addRange(l,this.calculateInlineFrames(e+u,t+a-m,h,g,m));else for(f=u-h*r+this.getInlineMargin(),d=0;h>d;)y=f>d?1:0,o=this.calculateInlineFrame(p,w,r+y,n+c),fm.arrayExtensions.add(l,o),p+=r+y,d++,v++;w+=n+c,R++}else for(v=0,p=e+b,f=u-s*r+this.getInlineMargin(),d=0;s>d;)try{if(y=f>d?1:0,_=S,fm.global.equals(d,s-1)&&(_=i-v),w=t+b,fm.global.equals(d,s-1)&&s>1)g=p-b,m=w-b,fm.arrayExtensions.addRange(l,this.calculateInlineFrames(e+u-g,t+a,_,g,m));else for(C=a-_*n+this.getInlineMargin(),R=0;_>R;)c=C>R?1:0,o=this.calculateInlineFrame(p,w,r+y,n+c),fm.arrayExtensions.add(l,o),w+=n+c,R++,v++;p+=r+y}finally{d++}return fm.arrayExtensions.toArray(l)},r.prototype.calculateLayout=function(){var e,t,n,r,s,i,o,a,u;for(s=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3],0>s&&(s=0),0>r&&(r=0),u=new fm.icelink.webrtc.layout,u=fm.global.equals(a,0)?fm.icelink.webrtc.layoutPreset.getSingleLayout(s,r):fm.global.equals(this.getMode(),fm.icelink.webrtc.layoutMode.FloatLocal)?this.getFloatLocalLayout(s,r,a):fm.global.equals(this.getMode(),fm.icelink.webrtc.layoutMode.FloatRemote)?this.getFloatRemoteLayout(s,r,a):fm.global.equals(this.getMode(),fm.icelink.webrtc.layoutMode.Block)?this.getBlockLayout(s,r,a):this.getInlineLayout(s,r,a),fm.icelink.webrtc.layoutPreset.transformFrame(u.getLocalFrame(),o,s,r),e=u.getRemoteFrames(),n=0,i=e.length;i>n;n++)t=e[n],fm.icelink.webrtc.layoutPreset.transformFrame(t,o,s,r);return u},r.prototype.copyToPreset=function(){var e;return e=arguments[0],e.setMode(this.getMode()),e.setDirection(this.getDirection()),e.setAlignment(this.getAlignment()),e.setFloatWidth(0),e.setFloatHeight(0),e.setFloatMarginX(0),e.setFloatMarginY(0),e.setFloatWidthPercent(0),e.setFloatHeightPercent(0),e.setFloatMarginXPercent(0),e.setFloatMarginYPercent(0),e.setBlockWidth(0),e.setBlockHeight(0),e.setBlockMarginX(0),e.setBlockMarginY(0),e.setBlockWidthPercent(0),e.setBlockHeightPercent(0),e.setBlockMarginXPercent(0),e.setBlockMarginYPercent(0),e.setInlineMargin(0),this.getFloatWidth()>0&&e.setFloatWidth(this.getFloatWidth()),this.getFloatHeight()>0&&e.setFloatHeight(this.getFloatHeight()),this.getFloatMarginX()>0&&e.setFloatMarginX(this.getFloatMarginX()),this.getFloatMarginY()>0&&e.setFloatMarginY(this.getFloatMarginY()),this.getFloatWidthPercent()>0&&e.setFloatWidthPercent(this.getFloatWidthPercent()),this.getFloatHeightPercent()>0&&e.setFloatHeightPercent(this.getFloatHeightPercent()),this.getFloatMarginXPercent()>0&&e.setFloatMarginXPercent(this.getFloatMarginXPercent()),this.getFloatMarginYPercent()>0&&e.setFloatMarginYPercent(this.getFloatMarginYPercent()),this.getBlockWidth()>0&&e.setBlockWidth(this.getBlockWidth()),this.getBlockHeight()>0&&e.setBlockHeight(this.getBlockHeight()),this.getBlockMarginX()>0&&e.setBlockMarginX(this.getBlockMarginX()),this.getBlockMarginY()>0&&e.setBlockMarginY(this.getBlockMarginY()),this.getBlockWidthPercent()>0&&e.setBlockWidthPercent(this.getBlockWidthPercent()),this.getBlockHeightPercent()>0&&e.setBlockHeightPercent(this.getBlockHeightPercent()),this.getBlockMarginXPercent()>0&&e.setBlockMarginXPercent(this.getBlockMarginXPercent()),this.getBlockMarginYPercent()>0&&e.setBlockMarginYPercent(this.getBlockMarginYPercent()),this.getInlineMargin()>0?e.setInlineMargin(this.getInlineMargin()):void 0},r.prototype.getAlignment=function(){return this._alignment},r.prototype.getBlockHeight=function(){return this.__blockHeight},r.prototype.getBlockHeightPercent=function(){return this.__blockHeightPercent},r.prototype.getBlockLayout=function(){var e,t,n,r,s,i,o,a,u,l,c,h,p,g,m,f,d,y,_;return l=arguments[0],u=arguments[1],_=arguments[2],h=0,p=0,e=new fm.holder(h),t=new fm.holder(p),n=this.calculateBlockFrame(l,u,e,t),h=e.getValue(),p=t.getValue(),o=n,c=[],fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Center)?(i=fm.icelink.webrtc.layoutPreset.divideByTwo(_),m=_-i,r=0,s=0,fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Vertical)?(f=o.getWidth()+h+h,l=fm.icelink.webrtc.layoutPreset.divideByTwo(l-f),r=l+f):(d=o.getHeight()+p+p,u=fm.icelink.webrtc.layoutPreset.divideByTwo(u-d),s=u+d),i>0&&fm.arrayExtensions.addRange(c,this.calculateInlineFrames(l,u,i,0,0)),m>0&&fm.arrayExtensions.addRange(c,this.calculateInlineFrames(l,u,m,r,s))):(y=0,g=0,f=o.getWidth()+h,d=o.getHeight()+p,fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Top)?(g=d,u-=d):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Bottom)?u-=d:fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Left)?(y=f,l-=f):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Right)?l-=f:fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Vertical)?((fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.TopLeft)||fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.BottomLeft))&&(y=f),l-=f):((fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.TopLeft)||fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.TopRight))&&(g=d),u-=d),fm.arrayExtensions.addRange(c,this.calculateInlineFrames(l,u,_,y,g))),a=new fm.icelink.webrtc.layout,a.setLocalFrame(o),a.setRemoteFrames(fm.arrayExtensions.toArray(c)),a},r.prototype.getBlockMarginX=function(){return this.__blockMarginX},r.prototype.getBlockMarginXPercent=function(){return this.__blockMarginXPercent},r.prototype.getBlockMarginY=function(){return this.__blockMarginY},r.prototype.getBlockMarginYPercent=function(){return this.__blockMarginYPercent},r.prototype.getBlockWidth=function(){return this.__blockWidth},r.prototype.getBlockWidthPercent=function(){return this.__blockWidthPercent},r.prototype.getBottomRowIndexes=function(){var e,t,n,r,s,i;for(e=arguments[0],i=fm.icelink.webrtc.layoutPreset.getYMax(e),t=0,n=0;n<e.length;)try{fm.global.equals(e[n].getY(),i)&&t++}finally{n++}for(r=0,s=new Array(t),n=0;n<e.length;)try{fm.global.equals(e[n].getY(),i)&&(s[r++]=n)}finally{n++}return s},r.prototype.getCellMargin=function(){return this.getInlineMargin()},r.prototype.getCenterColumnIndexes=function(){var e,t,n,r,s,i;for(e=arguments[0],i=fm.icelink.webrtc.layoutPreset.getXMid(e),t=0,n=0;n<e.length;)try{fm.global.equals(e[n].getX(),i)&&t++}finally{n++}for(r=0,s=new Array(t),n=0;n<e.length;)try{fm.global.equals(e[n].getX(),i)&&(s[r++]=n)}finally{n++}return s},r.prototype.getCenterRowIndexes=function(){var e,t,n,r,s,i;for(e=arguments[0],i=fm.icelink.webrtc.layoutPreset.getYMid(e),t=0,n=0;n<e.length;)try{fm.global.equals(e[n].getY(),i)&&t++}finally{n++}for(r=0,s=new Array(t),n=0;n<e.length;)try{fm.global.equals(e[n].getY(),i)&&(s[r++]=n)}finally{n++}return s},r.prototype.getDirection=function(){return this._direction},r.prototype.getFloatHeight=function(){return this.__floatHeight},r.prototype.getFloatHeightPercent=function(){return this.__floatHeightPercent},r.prototype.getFloatLocalLayout=function(){var e,t,n,r;return n=arguments[0],t=arguments[1],r=arguments[2],e=new fm.icelink.webrtc.layout,e.setLocalFrame(this.calculateFloatFrame(n,t)),e.setRemoteFrames(this.calculateInlineFrames(n,t,r,0,0)),e},r.prototype.getFloatMarginX=function(){return this.__floatMarginX},r.prototype.getFloatMarginXPercent=function(){return this.__floatMarginXPercent},r.prototype.getFloatMarginY=function(){return this.__floatMarginY},r.prototype.getFloatMarginYPercent=function(){return this.__floatMarginYPercent},r.prototype.getFloatRemoteLayout=function(){var e,t,n,r;return n=arguments[0],t=arguments[1],r=arguments[2],e=new fm.icelink.webrtc.layout,e.setLocalFrame(this.calculateFillFrame(n,t)),e.setRemoteFrames(this.calculateFloatFrames(n,t,r)),e},r.prototype.getFloatWidth=function(){return this.__floatWidth},r.prototype.getFloatWidthPercent=function(){return this.__floatWidthPercent},r.prototype.getInlineLayout=function(){var e,t,n,r,s,i,o,a,u;return i=arguments[0],s=arguments[1],a=arguments[2],t=this.calculateInlineFrames(i,s,a+1,0,0),n=0,fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.TopLeft)?n=0:fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Top)?(u=this.getTopRowIndexes(t),n=u[fm.icelink.webrtc.layoutPreset.divideByTwo(u.length)]):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.TopRight)?fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Horizontal)?(e=this.getTopRowIndexes(t),n=e[e.length-1]):n=this.getRightColumnIndexes(t)[0]:fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Left)?(o=this.getLeftColumnIndexes(t),n=o[fm.icelink.webrtc.layoutPreset.divideByTwo(o.length)]):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Center)?fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Horizontal)?(e=this.getCenterRowIndexes(t),n=e[fm.icelink.webrtc.layoutPreset.divideByTwo(e.length)]):(o=this.getCenterColumnIndexes(t),n=o[fm.icelink.webrtc.layoutPreset.divideByTwo(o.length)]):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Right)?(o=this.getRightColumnIndexes(t),n=o[fm.icelink.webrtc.layoutPreset.divideByTwo(o.length)]):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.BottomLeft)?fm.global.equals(this.getDirection(),fm.icelink.webrtc.layoutDirection.Horizontal)?n=this.getBottomRowIndexes(t)[0]:(o=this.getLeftColumnIndexes(t),n=o[o.length-1]):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.Bottom)?(e=this.getBottomRowIndexes(t),n=e[fm.icelink.webrtc.layoutPreset.divideByTwo(e.length)]):fm.global.equals(this.getAlignment(),fm.icelink.webrtc.layoutAlignment.BottomRight)&&(n=t.length-1),r=new fm.icelink.webrtc.layout,r.setLocalFrame(t[n]),r.setRemoteFrames(fm.icelink.webrtc.layoutPreset.spliceLayoutFrame(t,n)),r},r.prototype.getInlineMargin=function(){return this._inlineMargin},r.prototype.getLeftColumnIndexes=function(){var e,t,n,r,s,i;for(e=arguments[0],i=fm.icelink.webrtc.layoutPreset.getXMin(e),t=0,n=0;n<e.length;)try{fm.global.equals(e[n].getX(),i)&&t++}finally{n++}for(r=0,s=new Array(t),n=0;n<e.length;)try{fm.global.equals(e[n].getX(),i)&&(s[r++]=n)}finally{n++}return s},r.prototype.getMode=function(){return this._mode},r.prototype.getPreviewAlignment=function(){return this.getAlignment()},r.prototype.getPreviewMode=function(){return this.getMode()},r.prototype.getPreviewPadding=function(){return this.getFloatMarginX()},r.prototype.getPreviewSize=function(){return this.getFloatWidthPercent()},r.prototype.getRightColumnIndexes=function(){var e,t,n,r,s,i;for(e=arguments[0],i=fm.icelink.webrtc.layoutPreset.getXMax(e),t=0,n=0;n<e.length;)try{fm.global.equals(e[n].getX(),i)&&t++}finally{n++}for(r=0,s=new Array(t),n=0;n<e.length;)try{fm.global.equals(e[n].getX(),i)&&(s[r++]=n)}finally{n++}return s},r.prototype.getTopRowIndexes=function(){var e,t,n,r,s,i;for(e=arguments[0],i=fm.icelink.webrtc.layoutPreset.getYMin(e),t=0,n=0;n<e.length;)try{fm.global.equals(e[n].getY(),i)&&t++}finally{n++}for(r=0,s=new Array(t),n=0;n<e.length;)try{fm.global.equals(e[n].getY(),i)&&(s[r++]=n)}finally{n++}return s},r.prototype.setAlignment=function(){var e;return e=arguments[0],this._alignment=e},r.prototype.setBlockHeight=function(){var e;return e=arguments[0],this.__blockHeight=e,this.__blockHeightPercent=0},r.prototype.setBlockHeightPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__blockHeightPercent=e,this.__blockHeight=0},r.prototype.setBlockMarginX=function(){var e;return e=arguments[0],this.__blockMarginX=e,this.__blockMarginXPercent=0},r.prototype.setBlockMarginXPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__blockMarginXPercent=e,this.__blockMarginX=0},r.prototype.setBlockMarginY=function(){var e;return e=arguments[0],this.__blockMarginY=e,this.__blockMarginYPercent=0},r.prototype.setBlockMarginYPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__blockMarginYPercent=e,this.__blockMarginY=0},r.prototype.setBlockWidth=function(){var e;return e=arguments[0],this.__blockWidth=e,this.__blockWidthPercent=0},r.prototype.setBlockWidthPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__blockWidthPercent=e,this.__blockWidth=0},r.prototype.setCellMargin=function(){var e;return e=arguments[0],this.setInlineMargin(e)},r.prototype.setDirection=function(){var e;return e=arguments[0],this._direction=e},r.prototype.setFloatHeight=function(){var e;return e=arguments[0],this.__floatHeight=e,this.__floatHeightPercent=0},r.prototype.setFloatHeightPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__floatHeightPercent=e,this.__floatHeight=0},r.prototype.setFloatMarginX=function(){var e;return e=arguments[0],this.__floatMarginX=e,this.__floatMarginXPercent=0},r.prototype.setFloatMarginXPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__floatMarginXPercent=e,this.__floatMarginX=0},r.prototype.setFloatMarginY=function(){var e;return e=arguments[0],this.__floatMarginY=e,this.__floatMarginYPercent=0},r.prototype.setFloatMarginYPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__floatMarginYPercent=e,this.__floatMarginY=0},r.prototype.setFloatWidth=function(){var e;return e=arguments[0],this.__floatWidth=e,this.__floatWidthPercent=0},r.prototype.setFloatWidthPercent=function(){var e;return e=arguments[0],0>e&&(e=0),e>1&&(e=1),this.__floatWidthPercent=e,this.__floatWidth=0},r.prototype.setInlineMargin=function(){var e;return e=arguments[0],this._inlineMargin=e},r.prototype.setMode=function(){var e;return e=arguments[0],this._mode=e},r.prototype.setPreviewAlignment=function(){var e;return e=arguments[0],this.setAlignment(e)},r.prototype.setPreviewMode=function(){var e;return e=arguments[0],this.setMode(e)},r.prototype.setPreviewPadding=function(){var e;return e=arguments[0],this.setFloatMarginX(e),this.setFloatMarginY(e),this.setBlockMarginX(e),this.setBlockMarginY(e)},r.prototype.setPreviewSize=function(){var e;return e=arguments[0],this.setFloatWidthPercent(e),this.setFloatHeightPercent(e),this.setBlockWidthPercent(e),this.setBlockHeightPercent(e)},r}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.localStartArgs=function(n){function r(){this.toJson=e(this.toJson,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._onFailure=null,r.prototype._onSuccess=null,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeLocalStartArgs(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeLocalStartArgs(e)},r.prototype.getOnFailure=function(){return this._onFailure},r.prototype.getOnSuccess=function(){return this._onSuccess},r.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},r.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},r.prototype.toJson=function(){return fm.icelink.webrtc.localStartArgs.toJson(this)},r}(fm.icelink.webrtc.baseMediaArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.localStartFailureArgs=function(n){function r(){this.toJson=e(this.toJson,this),this.setLocalStream=e(this.setLocalStream,this),this.setException=e(this.setException,this),this.getLocalStream=e(this.getLocalStream,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._exception=null,r.prototype._localStream=null,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeLocalStartFailureArgs(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeLocalStartFailureArgs(e)},r.prototype.getException=function(){return this._exception},r.prototype.getLocalStream=function(){return this._localStream},r.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},r.prototype.setLocalStream=function(){var e;return e=arguments[0],this._localStream=e},r.prototype.toJson=function(){return fm.icelink.webrtc.localStartFailureArgs.toJson(this)},r}(fm.icelink.webrtc.baseMediaArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.localStartSuccessArgs=function(n){function r(){this.toJson=e(this.toJson,this),this.setLocalStream=e(this.setLocalStream,this),this.getLocalStream=e(this.getLocalStream,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),
fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._localStream=null,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeLocalStartSuccessArgs(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeLocalStartSuccessArgs(e)},r.prototype.getLocalStream=function(){return this._localStream},r.prototype.setLocalStream=function(){var e;return e=arguments[0],this._localStream=e},r.prototype.toJson=function(){return fm.icelink.webrtc.localStartSuccessArgs.toJson(this)},r}(fm.icelink.webrtc.baseMediaArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.baseLayoutManager=function(n){function r(){this.unsetLocalVideoControlUI=e(this.unsetLocalVideoControlUI,this),this.unsetLocalVideoControl=e(this.unsetLocalVideoControl,this),this.setOnLayoutComplete=e(this.setOnLayoutComplete,this),this.setOnLayout=e(this.setOnLayout,this),this.setLocalVideoControlUI=e(this.setLocalVideoControlUI,this),this.setLocalVideoControl=e(this.setLocalVideoControl,this),this.setLayoutOrigin=e(this.setLayoutOrigin,this),this.runOnUIThread=e(this.runOnUIThread,this),this.reset=e(this.reset,this),this.removeRemoteVideoControlUI=e(this.removeRemoteVideoControlUI,this),this.removeRemoteVideoControlsUI=e(this.removeRemoteVideoControlsUI,this),this.removeRemoteVideoControls=e(this.removeRemoteVideoControls,this),this.removeRemoteVideoControl=e(this.removeRemoteVideoControl,this),this.removeOnUnhandledException=e(this.removeOnUnhandledException,this),this.removeFromContainer=e(this.removeFromContainer,this),this.raiseUnhandledException=e(this.raiseUnhandledException,this),this.getRemoteVideoControlsInternal=e(this.getRemoteVideoControlsInternal,this),this.getRemoteVideoControls=e(this.getRemoteVideoControls,this),this.getRemoteVideoControl=e(this.getRemoteVideoControl,this),this.getPeerIds=e(this.getPeerIds,this),this.getOnLayoutComplete=e(this.getOnLayoutComplete,this),this.getOnLayout=e(this.getOnLayout,this),this.getOldestRemoteVideoControl=e(this.getOldestRemoteVideoControl,this),this.getNewestRemoteVideoControl=e(this.getNewestRemoteVideoControl,this),this.getLocalVideoControl=e(this.getLocalVideoControl,this),this.getLayoutOrigin=e(this.getLayoutOrigin,this),this.getLayout=e(this.getLayout,this),this.doLayout=e(this.doLayout,this),this.applyLayout=e(this.applyLayout,this),this.addToContainer=e(this.addToContainer,this),this.addRemoteVideoControlUI=e(this.addRemoteVideoControlUI,this),this.addRemoteVideoControlsUI=e(this.addRemoteVideoControlsUI,this),this.addRemoteVideoControls=e(this.addRemoteVideoControls,this),this.addRemoteVideoControl=e(this.addRemoteVideoControl,this),this.addOnUnhandledException=e(this.addOnUnhandledException,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r.call(this,null),fm.util.attachProperties(this,arguments[0]),t):1===arguments.length?(n=arguments[0],t=r.__super__.constructor.call(this),this._remoteVideoControlsTable={},this._remoteVideoControlsLock=new fm.object,this._inBatch=!1,fm.global.equals(n,null)&&(n=fm.icelink.webrtc.layoutPreset.getFacetime()),n.copyToPreset(this),this.setLayoutOrigin(fm.icelink.webrtc.layoutOrigin.TopLeft),t):0===arguments.length?(r.call(this,null),t):void 0}return t(r,n),r.prototype._inBatch=!1,r.prototype._layoutOrigin=null,r.prototype._localVideoControl=null,r.prototype._onLayout=null,r.prototype._onLayoutComplete=null,r.prototype._onUnhandledException=null,r.prototype._remoteVideoControlsLock=null,r.prototype._remoteVideoControlsTable=null,r.prototype.addOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,e)},r.prototype.addRemoteVideoControl=function(){var e,t,n,r;if(n=arguments[0],r=arguments[1],fm.global.equals(n,null))return fm.log.warn("Could not add remote video control. The peer ID cannot be null."),!1;if(fm.global.equals(r,null))return fm.log.warn("Could not add remote video control. The remote video control cannot be null."),!1;try{this.runOnUIThread(this.addRemoteVideoControlUI,n,r)}catch(e){t=e,fm.log.error("Could not add remote video control.",t)}finally{}return!0},r.prototype.addRemoteVideoControls=function(){var e,t,n,r;if(n=arguments[0],r=arguments[1],fm.global.equals(n,null))return fm.log.warn("Could not add remote video controls. The peer IDs cannot be null."),!1;if(fm.global.equals(r,null))return fm.log.warn("Could not add remote video controls. The remote video controls cannot be null."),!1;if(!fm.global.equals(n.length,r.length))return fm.log.warn("Could not add remote video controls. The number of peer IDs and remote video controls must match."),!1;try{this.runOnUIThread(this.addRemoteVideoControlsUI,n,r)}catch(e){t=e,fm.log.error("Could not add remote video controls.",t)}finally{}return!0},r.prototype.addRemoteVideoControlsUI=function(){var e,t,n,r,s;for(n=arguments[0],r=arguments[1],s=n,t=r,this._inBatch=!0,e=0;e<s.length;)try{this.addRemoteVideoControlUI(s[e],t[e])}finally{e++}return this._inBatch=!1,this.doLayout()},r.prototype.addRemoteVideoControlUI=function(){var e,t,n,r,s;return n=arguments[0],r=arguments[1],t=n,e=[],fm.arrayExtensions.add(e,r),s=this.getRemoteVideoControlsInternal(t),fm.global.equals(s,null)||fm.arrayExtensions.addRange(e,s),this.addToContainer(r),this._remoteVideoControlsTable[t]=fm.arrayExtensions.toArray(e),this._inBatch?void 0:this.doLayout()},r.prototype.addToContainer=function(){var e;return e=arguments[0]},r.prototype.applyLayout=function(){},r.prototype.doLayout=function(){var e,t;return this.applyLayout(),e=this.getOnLayoutComplete(),fm.global.equals(e,null)?void 0:(t=new fm.icelink.webrtc.layoutCompleteArgs,t.setLayoutManager(this),e(t))},r.prototype.getLayout=function(){var e,t,n,r,s,i,o,a;if(s=arguments[0],r=arguments[1],a=arguments[2],n=this.calculateLayout(s,r,a,this.getLayoutOrigin()),i=this.getOnLayout(),!fm.global.equals(i,null))try{o=new fm.icelink.webrtc.layoutArgs,o.setLayout(n),o.setLayoutWidth(s),o.setLayoutHeight(r),o.setRemoteCount(a),o.setLayoutManager(this),i(o)}catch(e){t=e,this.raiseUnhandledException(t)||fm.asyncException.asyncThrow(t,"BaseLayoutManager -> OnLayout")}finally{}return n},r.prototype.getLayoutOrigin=function(){return this._layoutOrigin},r.prototype.getLocalVideoControl=function(){return this._localVideoControl},r.prototype.getNewestRemoteVideoControl=function(){var e,t;return e=arguments[0],t=this.getRemoteVideoControlsInternal(e),fm.global.equals(t,null)?null:t[0]},r.prototype.getOldestRemoteVideoControl=function(){var e,t;return e=arguments[0],t=this.getRemoteVideoControlsInternal(e),fm.global.equals(t,null)?null:t[t.length-1]},r.prototype.getOnLayout=function(){return this._onLayout},r.prototype.getOnLayoutComplete=function(){return this._onLayoutComplete},r.prototype.getPeerIds=function(){var e,t,n,r,s;for(r=[],e=fm.hashExtensions.getKeys(this._remoteVideoControlsTable),t=0,n=e.length;n>t;t++)s=e[t],fm.arrayExtensions.add(r,s);return fm.arrayExtensions.toArray(r)},r.prototype.getRemoteVideoControl=function(){var e;if(e=arguments[0],fm.global.equals(e,null))throw new Error("Could not get remote video control. The peer ID cannot be null.");return this.getNewestRemoteVideoControl(e)},r.prototype.getRemoteVideoControls=function(){var e,t,n,r,s,i;if(1===arguments.length){if(s=arguments[0],fm.global.equals(s,null))throw new Error("Could not get remote video controls. The peer IDs cannot be null.");for(r=[],e=s,t=0,n=e.length;n>t;t++)i=e[t],fm.arrayExtensions.add(r,this.getRemoteVideoControl(i));return fm.arrayExtensions.toArray(r)}return 0===arguments.length?this.getRemoteVideoControls(this.getPeerIds()):void 0},r.prototype.getRemoteVideoControlsInternal=function(){var e,t,n,r;if(r=arguments[0],fm.global.equals(r,null))throw new Error("The peer ID cannot be null.");return n=null,e=new fm.holder(n),t=fm.hashExtensions.tryGetValue(this._remoteVideoControlsTable,r,e),n=e.getValue(),t||(n=null),n},r.prototype.raiseUnhandledException=function(){var e,t,n,r,s,i;if(n=arguments[0],s=this._onUnhandledException,!fm.global.equals(s,null)){e=new fm.icelink.unhandledExceptionArgs,e.setException(n),i=e;try{s(i)}catch(t){r=t,fm.asyncException.asyncThrow(r,"BaseLayoutManager -> OnUnhandledException")}finally{}return i.getHandled()}return!1},r.prototype.removeFromContainer=function(){var e;return e=arguments[0]},r.prototype.removeOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,e)},r.prototype.removeRemoteVideoControl=function(){var e,t,n,r;if(r=arguments[0],fm.global.equals(r,null))return fm.log.warn("Could not remove remote video control. The peer ID cannot be null."),!1;if(n=this.getOldestRemoteVideoControl(r),!fm.global.equals(n,null))try{this.runOnUIThread(this.removeRemoteVideoControlUI,r,n)}catch(e){t=e,fm.log.error("Could not remove remote video control.",t)}finally{}return!0},r.prototype.removeRemoteVideoControls=function(){var e,t,n;if(0===arguments.length)return void this.removeRemoteVideoControls(this.getPeerIds());if(1===arguments.length){if(n=arguments[0],fm.global.equals(n,null))return fm.log.warn("Could not remove remote video controls. The peer IDs cannot be null."),!1;try{this.runOnUIThread(this.removeRemoteVideoControlsUI,n,this.getRemoteVideoControls(n))}catch(e){t=e,fm.log.error("Could not remove remote video controls.",t)}finally{}return!0}},r.prototype.removeRemoteVideoControlsUI=function(){var e,t,n,r,s;for(n=arguments[0],r=arguments[1],s=n,t=r,this._inBatch=!0,e=0;e<s.length;)try{this.removeRemoteVideoControlUI(s[e],t[e])}finally{e++}return this._inBatch=!1,this.doLayout()},r.prototype.removeRemoteVideoControlUI=function(){var e,t,n,r,s;return n=arguments[0],r=arguments[1],t=n,e=[],s=this.getRemoteVideoControlsInternal(t),fm.global.equals(s,null)||fm.arrayExtensions.addRange(e,s),fm.arrayExtensions.remove(e,r),this.removeFromContainer(r),fm.global.equals(fm.arrayExtensions.getCount(e),0)?fm.hashExtensions.remove(this._remoteVideoControlsTable,t):this._remoteVideoControlsTable[t]=fm.arrayExtensions.toArray(e),this._inBatch?void 0:this.doLayout()},r.prototype.reset=function(){return this.removeRemoteVideoControls(),this.unsetLocalVideoControl()},r.prototype.runOnUIThread=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2]},r.prototype.setLayoutOrigin=function(){var e;return e=arguments[0],this._layoutOrigin=e},r.prototype.setLocalVideoControl=function(){var e,t,n;if(n=arguments[0],fm.global.equals(n,null))return fm.log.warn("Could not set local video control. The local video control cannot be null."),!1;if(!fm.global.equals(this.getLocalVideoControl(),null))return fm.log.warn("Could not set local video control. A local video control already exists."),!1;if(!fm.global.equals(n,null))try{this.runOnUIThread(this.setLocalVideoControlUI,n,null)}catch(e){t=e,fm.log.error("Could not set local video control.",t)}finally{}return!0},r.prototype.setLocalVideoControlUI=function(){var e,t;return e=arguments[0],t=arguments[1],this._localVideoControl=e,this.addToContainer(e),this.doLayout()},r.prototype.setOnLayout=function(){var e;return e=arguments[0],this._onLayout=e},r.prototype.setOnLayoutComplete=function(){var e;return e=arguments[0],this._onLayoutComplete=e},r.prototype.unsetLocalVideoControl=function(){var e,t,n;if(n=this.getLocalVideoControl(),fm.global.equals(n,null))return fm.log.warn("Could not unset local video control. A local video control does not exist."),!1;try{this.runOnUIThread(this.unsetLocalVideoControlUI,n,null)}catch(e){t=e,fm.log.error("Could not unset local video control.",t)}finally{}return!0},r.prototype.unsetLocalVideoControlUI=function(){var e,t;return e=arguments[0],t=arguments[1],this._localVideoControl=null,this.removeFromContainer(e),this.doLayout()},r}(fm.icelink.webrtc.layoutPreset);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.audioCaptureLevelArgs=function(n){function r(){this.setLevel=e(this.setLevel,this),this.setCaptureProvider=e(this.setCaptureProvider,this),this.getLevel=e(this.getLevel,this),this.getCaptureProvider=e(this.getCaptureProvider,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._captureProvider=null,r.prototype._level=0,r.prototype.getCaptureProvider=function(){return this._captureProvider},r.prototype.getLevel=function(){return this._level},r.prototype.setCaptureProvider=function(){var e;return e=arguments[0],this._captureProvider=e},r.prototype.setLevel=function(){var e;return e=arguments[0],this._level=e},r}(fm.object);var t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.getMediaCompleteArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.icelink.webrtc.baseMediaArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.getMediaFailureArgs=function(n){function r(){this.setException=e(this.setException,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._exception=null,r.prototype.getException=function(){return this._exception},r.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},r}(fm.icelink.webrtc.baseMediaArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.getMediaArgs=function(n){function r(){this.setVideoCaptureProvider=e(this.setVideoCaptureProvider,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setCreateVideoRenderProvider=e(this.setCreateVideoRenderProvider,this),this.setCreateAudioRenderProvider=e(this.setCreateAudioRenderProvider,this),this.setAudioCaptureProvider=e(this.setAudioCaptureProvider,this),this.getVideoCaptureProvider=e(this.getVideoCaptureProvider,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getCreateVideoRenderProvider=e(this.getCreateVideoRenderProvider,this),this.getCreateAudioRenderProvider=e(this.getCreateAudioRenderProvider,this),this.getAudioCaptureProvider=e(this.getAudioCaptureProvider,this);var t,n,s;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=r.__super__.constructor.call(this),this.setVideoWidth(320),this.setVideoHeight(240),this.setVideoFrameRate(15),this.setDefaultVideoScale(fm.icelink.webrtc.layoutScale.Contain),this.setDefaultVideoPreviewScale(fm.icelink.webrtc.layoutScale.Contain),this.setDefaultVideoSource(fm.icelink.webrtc.videoSource.Camera),fm.util.attachProperties(this,arguments[0]),n):0===arguments.length?(n=r.__super__.constructor.call(this),this.setVideoWidth(320),this.setVideoHeight(240),this.setVideoFrameRate(15),this.setDefaultVideoScale(fm.icelink.webrtc.layoutScale.Contain),this.setDefaultVideoPreviewScale(fm.icelink.webrtc.layoutScale.Contain),this.setDefaultVideoSource(fm.icelink.webrtc.videoSource.Camera),n):2===arguments.length?(t=arguments[0],s=arguments[1],r.call(this),this.setAudio(t),this.setVideo(s),n):void 0}return t(r,n),r.prototype._audioCaptureProvider=null,r.prototype._createAudioRenderProvider=null,r.prototype._createVideoRenderProvider=null,r.prototype._onComplete=null,r.prototype._onFailure=null,r.prototype._onSuccess=null,r.prototype._videoCaptureProvider=null,r.prototype.getAudioCaptureProvider=function(){return this._audioCaptureProvider},r.prototype.getCreateAudioRenderProvider=function(){return this._createAudioRenderProvider},r.prototype.getCreateVideoRenderProvider=function(){return this._createVideoRenderProvider},r.prototype.getOnComplete=function(){return this._onComplete},r.prototype.getOnFailure=function(){return this._onFailure},r.prototype.getOnSuccess=function(){return this._onSuccess},r.prototype.getVideoCaptureProvider=function(){return this._videoCaptureProvider},r.prototype.setAudioCaptureProvider=function(){var e;return e=arguments[0],this._audioCaptureProvider=e},r.prototype.setCreateAudioRenderProvider=function(){var e;return e=arguments[0],this._createAudioRenderProvider=e},r.prototype.setCreateVideoRenderProvider=function(){var e;return e=arguments[0],this._createVideoRenderProvider=e},r.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},r.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},r.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},r.prototype.setVideoCaptureProvider=function(){var e;return e=arguments[0],this._videoCaptureProvider=e},r}(fm.icelink.webrtc.baseMediaArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.getMediaSuccessArgs=function(n){function r(){this.setVideoDeviceLabel=e(this.setVideoDeviceLabel,this),this.setLocalVideoControl=e(this.setLocalVideoControl,this),this.setLocalStream=e(this.setLocalStream,this),this.setAudioDeviceLabel=e(this.setAudioDeviceLabel,this),this.getVideoDeviceLabel=e(this.getVideoDeviceLabel,this),this.getLocalVideoControl=e(this.getLocalVideoControl,this),this.getLocalStream=e(this.getLocalStream,this),this.getAudioDeviceLabel=e(this.getAudioDeviceLabel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=r.__super__.constructor.call(this)}return t(r,n),r.prototype._audioDeviceLabel=null,r.prototype._localStream=null,r.prototype._localVideoControl=null,r.prototype._videoDeviceLabel=null,r.prototype.getAudioDeviceLabel=function(){return this._audioDeviceLabel},r.prototype.getLocalStream=function(){return this._localStream},r.prototype.getLocalVideoControl=function(){return this._localVideoControl},r.prototype.getVideoDeviceLabel=function(){return this._videoDeviceLabel},r.prototype.setAudioDeviceLabel=function(){var e;return e=arguments[0],this._audioDeviceLabel=e},r.prototype.setLocalStream=function(){var e;return e=arguments[0],this._localStream=e},r.prototype.setLocalVideoControl=function(){var e;return e=arguments[0],this._localVideoControl=e},r.prototype.setVideoDeviceLabel=function(){var e;return e=arguments[0],this._videoDeviceLabel=e},r}(fm.icelink.webrtc.baseMediaArgs),fm.icelink.webrtc.linkExtensions=function(){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):void 0}return e._dataChannelSsrcMapKey=null,e._localAudioRenderKey=null,e._localVideoRenderKey=null,e._reliableDataManagerKey=null,e._remoteAudioRenderKey=null,e._remoteDataChannelCaptureKey=null,e._remoteDataChannelRenderKey=null,e._remoteStreamKey=null,e._remoteVideoRenderKey=null,e.getDataChannelSsrcMap=function(){var e;return e=arguments[0],fm.global.tryCastObject(e.getDynamicValue(fm.icelink.webrtc.linkExtensions._dataChannelSsrcMapKey))},e.getDeleteRemoteStream=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.icelink.webrtc.linkExtensions.unsetRemoteStream(e),t},e.getInsertRemoteStream=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)&&(t=new fm.icelink.webrtc.mediaStream(e.getPeerId(),e.getPeerState()),fm.icelink.webrtc.linkExtensions.setRemoteStream(e,t)),t},e.getLocalAudioRenderProvider=function(){var e,t;return 2===arguments.length?(t=arguments[0],e=arguments[1],fm.global.tryCast(t.getDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._localAudioRenderKey,fm.intExtensions.toString(e))),fm.icelink.webrtc.audioRenderProvider)):1===arguments.length?(t=arguments[0],fm.icelink.webrtc.linkExtensions.getLocalAudioRenderProvider(t,0)):void 0},e.getLocalVideoRenderProvider=function(){var e,t;return 2===arguments.length?(t=arguments[0],e=arguments[1],fm.global.tryCast(t.getDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._localVideoRenderKey,fm.intExtensions.toString(e))),fm.icelink.webrtc.videoRenderProvider)):1===arguments.length?(t=arguments[0],fm.icelink.webrtc.linkExtensions.getLocalVideoRenderProvider(t,0)):void 0},e.getRemoteAudioRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.tryCast(t.getDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._remoteAudioRenderKey,fm.intExtensions.toString(e))),fm.icelink.webrtc.remoteAudioRenderProvider)},e.getRemoteAudioVolume=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?1:t.getAudioVolume()},e.getRemoteDataChannelCaptureProvider=function(){var e;return e=arguments[0],fm.global.tryCast(e.getDynamicValue(fm.icelink.webrtc.linkExtensions._remoteDataChannelCaptureKey),fm.icelink.webrtc.remoteDataChannelCaptureProvider)},e.getRemoteDataChannelRenderProvider=function(){var e;return e=arguments[0],fm.global.tryCast(e.getDynamicValue(fm.icelink.webrtc.linkExtensions._remoteDataChannelRenderKey),fm.icelink.webrtc.remoteDataChannelRenderProvider)},e.getRemoteStream=function(){var e;return e=arguments[0],fm.global.tryCast(e.getDynamicValue(fm.icelink.webrtc.linkExtensions._remoteStreamKey),fm.icelink.webrtc.mediaStream)},e.getRemoteVideoControl=function(){var e,t,n;return 1===arguments.length?(t=arguments[0],fm.icelink.webrtc.linkExtensions.getRemoteVideoControl(t,0)):2===arguments.length?(t=arguments[0],e=arguments[1],n=fm.icelink.webrtc.linkExtensions.getLocalVideoRenderProvider(t,e),fm.global.equals(n,null)?null:n.getControl()):void 0},e.getRemoteVideoHeight=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?0:t.getVideoHeight()},e.getRemoteVideoRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.tryCast(t.getDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._remoteVideoRenderKey,fm.intExtensions.toString(e))),fm.icelink.webrtc.remoteVideoRenderProvider)},e.getRemoteVideoWidth=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?0:t.getVideoWidth()},e.muteRemoteAudio=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:t.muteAudio()},e.muteRemoteVideo=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:t.muteVideo()},e.remoteAudioIsMuted=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:t.getAudioIsMuted()},e.remoteVideoIsMuted=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:t.getVideoIsMuted()},e.renderRemoteAudio=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=fm.icelink.webrtc.linkExtensions.getRemoteStream(t),fm.global.equals(n,null)?void 0:n.renderAudio(e)},e.renderRemoteVideo=function(){var e,t,n;return e=arguments[0],n=arguments[1],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?void 0:t.renderVideo(n)},e.setDataChannelSsrcMap=function(){var e,t;return e=arguments[0],t=arguments[1],e.setDynamicValue(fm.icelink.webrtc.linkExtensions._dataChannelSsrcMapKey,t)},e.setDeltaFecParameters=function(){var e,t,n,r;return 2===arguments.length?(n=arguments[0],e=arguments[1],void fm.icelink.webrtc.linkExtensions.setDeltaFecParameters(n,0,e)):void(3===arguments.length&&(n=arguments[0],t=arguments[1],e=arguments[2],r=fm.icelink.webrtc.linkExtensions.getRemoteVideoRenderProvider(n,t),fm.global.equals(r,null)||r.setDeltaFecParameters(e)))},e.setKeyFecParameters=function(){var e,t,n,r;return 3===arguments.length?(n=arguments[0],e=arguments[1],t=arguments[2],r=fm.icelink.webrtc.linkExtensions.getRemoteVideoRenderProvider(n,e),void(fm.global.equals(r,null)||r.setKeyFecParameters(t))):void(2===arguments.length&&(n=arguments[0],t=arguments[1],fm.icelink.webrtc.linkExtensions.setKeyFecParameters(n,0,t)))},e.setLocalAudioRenderProvider=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=arguments[2],t.setDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._localAudioRenderKey,fm.intExtensions.toString(e)),n)},e.setLocalVideoRenderProvider=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=arguments[2],t.setDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._localVideoRenderKey,fm.intExtensions.toString(e)),n)},e.setRemoteAudioRenderProvider=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=arguments[2],t.setDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._remoteAudioRenderKey,fm.intExtensions.toString(e)),n)},e.setRemoteAudioVolume=function(){var e,t,n;return e=arguments[0],n=arguments[1],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:(t.setAudioVolume(n),!0)},e.setRemoteDataChannelCaptureProvider=function(){var e,t;return e=arguments[0],t=arguments[1],e.setDynamicValue(fm.icelink.webrtc.linkExtensions._remoteDataChannelCaptureKey,t)},e.setRemoteDataChannelRenderProvider=function(){var e,t;return e=arguments[0],t=arguments[1],e.setDynamicValue(fm.icelink.webrtc.linkExtensions._remoteDataChannelRenderKey,t)},e.setRemoteStream=function(){var e,t;return e=arguments[0],t=arguments[1],e.setDynamicValue(fm.icelink.webrtc.linkExtensions._remoteStreamKey,t)},e.setRemoteVideoRenderProvider=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=arguments[2],t.setDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._remoteVideoRenderKey,fm.intExtensions.toString(e)),n)},e.toggleRemoteAudioMute=function(){var e;return e=arguments[0],fm.icelink.webrtc.linkExtensions.remoteAudioIsMuted(e)?fm.icelink.webrtc.linkExtensions.unmuteRemoteAudio(e):fm.icelink.webrtc.linkExtensions.muteRemoteAudio(e)},e.toggleRemoteVideoMute=function(){var e;return e=arguments[0],fm.icelink.webrtc.linkExtensions.remoteVideoIsMuted(e)?fm.icelink.webrtc.linkExtensions.unmuteRemoteVideo(e):fm.icelink.webrtc.linkExtensions.muteRemoteVideo(e)},e.unmuteRemoteAudio=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:t.unmuteAudio()},e.unmuteRemoteVideo=function(){var e,t;return e=arguments[0],t=fm.icelink.webrtc.linkExtensions.getRemoteStream(e),fm.global.equals(t,null)?!1:t.unmuteVideo()},e.unsetDataChannelSsrcMap=function(){var e;return e=arguments[0],e.unsetDynamicValue(fm.icelink.webrtc.linkExtensions._dataChannelSsrcMapKey)},e.unsetLocalAudioRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],t.unsetDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._localAudioRenderKey,fm.intExtensions.toString(e)))},e.unsetLocalVideoRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],t.unsetDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._localVideoRenderKey,fm.intExtensions.toString(e)))},e.unsetRemoteAudioRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],t.unsetDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._remoteAudioRenderKey,fm.intExtensions.toString(e)))},e.unsetRemoteDataChannelCaptureProvider=function(){var e;return e=arguments[0],e.unsetDynamicValue(fm.icelink.webrtc.linkExtensions._remoteDataChannelCaptureKey)},e.unsetRemoteDataChannelRenderProvider=function(){var e;return e=arguments[0],e.unsetDynamicValue(fm.icelink.webrtc.linkExtensions._remoteDataChannelRenderKey)},e.unsetRemoteStream=function(){var e;return e=arguments[0],e.unsetDynamicValue(fm.icelink.webrtc.linkExtensions._remoteStreamKey)},e.unsetRemoteVideoRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],t.unsetDynamicValue(fm.stringExtensions.concat(fm.icelink.webrtc.linkExtensions._remoteVideoRenderKey,fm.intExtensions.toString(e)))},fm.icelink.link.prototype.getDataChannelSsrcMap=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getDataChannelSsrcMap.apply(this,arguments)},fm.icelink.link.prototype.getDeleteRemoteStream=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getDeleteRemoteStream.apply(this,arguments)},fm.icelink.link.prototype.getInsertRemoteStream=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getInsertRemoteStream.apply(this,arguments)},fm.icelink.link.prototype.getLocalAudioRenderProvider=function(){var e;return 1===arguments.length?(e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getLocalAudioRenderProvider.apply(this,arguments)):0===arguments.length?(Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getLocalAudioRenderProvider.apply(this,arguments)):void 0},fm.icelink.link.prototype.getLocalVideoRenderProvider=function(){var e;return 1===arguments.length?(e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getLocalVideoRenderProvider.apply(this,arguments)):0===arguments.length?(Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getLocalVideoRenderProvider.apply(this,arguments)):void 0},fm.icelink.link.prototype.getRemoteAudioRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteAudioRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.getRemoteAudioVolume=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteAudioVolume.apply(this,arguments)},fm.icelink.link.prototype.getRemoteDataChannelCaptureProvider=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteDataChannelCaptureProvider.apply(this,arguments)},fm.icelink.link.prototype.getRemoteDataChannelRenderProvider=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteDataChannelRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.getRemoteStream=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteStream.apply(this,arguments);
},fm.icelink.link.prototype.getRemoteVideoControl=function(){var e;return 0===arguments.length?(Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteVideoControl.apply(this,arguments)):1===arguments.length?(e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteVideoControl.apply(this,arguments)):void 0},fm.icelink.link.prototype.getRemoteVideoHeight=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteVideoHeight.apply(this,arguments)},fm.icelink.link.prototype.getRemoteVideoRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteVideoRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.getRemoteVideoWidth=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.getRemoteVideoWidth.apply(this,arguments)},fm.icelink.link.prototype.muteRemoteAudio=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.muteRemoteAudio.apply(this,arguments)},fm.icelink.link.prototype.muteRemoteVideo=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.muteRemoteVideo.apply(this,arguments)},fm.icelink.link.prototype.remoteAudioIsMuted=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.remoteAudioIsMuted.apply(this,arguments)},fm.icelink.link.prototype.remoteVideoIsMuted=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.remoteVideoIsMuted.apply(this,arguments)},fm.icelink.link.prototype.renderRemoteAudio=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.renderRemoteAudio.apply(this,arguments)},fm.icelink.link.prototype.renderRemoteVideo=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.renderRemoteVideo.apply(this,arguments)},fm.icelink.link.prototype.setDataChannelSsrcMap=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setDataChannelSsrcMap.apply(this,arguments)},fm.icelink.link.prototype.setDeltaFecParameters=function(){var e,t;return 1===arguments.length?(e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setDeltaFecParameters.apply(this,arguments)):2===arguments.length?(t=arguments[0],e=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setDeltaFecParameters.apply(this,arguments)):void 0},fm.icelink.link.prototype.setKeyFecParameters=function(){var e,t;return 1===arguments.length?(t=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setKeyFecParameters.apply(this,arguments)):2===arguments.length?(e=arguments[0],t=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setKeyFecParameters.apply(this,arguments)):void 0},fm.icelink.link.prototype.setLocalAudioRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setLocalAudioRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.setLocalVideoRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setLocalVideoRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.setRemoteAudioRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setRemoteAudioRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.setRemoteAudioVolume=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setRemoteAudioVolume.apply(this,arguments)},fm.icelink.link.prototype.setRemoteDataChannelCaptureProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setRemoteDataChannelCaptureProvider.apply(this,arguments)},fm.icelink.link.prototype.setRemoteDataChannelRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setRemoteDataChannelRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.setRemoteStream=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setRemoteStream.apply(this,arguments)},fm.icelink.link.prototype.setRemoteVideoRenderProvider=function(){var e,t;return t=arguments[0],e=arguments[1],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.setRemoteVideoRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.toggleRemoteAudioMute=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.toggleRemoteAudioMute.apply(this,arguments)},fm.icelink.link.prototype.toggleRemoteVideoMute=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.toggleRemoteVideoMute.apply(this,arguments)},fm.icelink.link.prototype.unmuteRemoteAudio=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unmuteRemoteAudio.apply(this,arguments)},fm.icelink.link.prototype.unmuteRemoteVideo=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unmuteRemoteVideo.apply(this,arguments)},fm.icelink.link.prototype.unsetDataChannelSsrcMap=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetDataChannelSsrcMap.apply(this,arguments)},fm.icelink.link.prototype.unsetLocalAudioRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetLocalAudioRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.unsetLocalVideoRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetLocalVideoRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.unsetRemoteAudioRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetRemoteAudioRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.unsetRemoteDataChannelCaptureProvider=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetRemoteDataChannelCaptureProvider.apply(this,arguments)},fm.icelink.link.prototype.unsetRemoteDataChannelRenderProvider=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetRemoteDataChannelRenderProvider.apply(this,arguments)},fm.icelink.link.prototype.unsetRemoteStream=function(){return Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetRemoteStream.apply(this,arguments)},fm.icelink.link.prototype.unsetRemoteVideoRenderProvider=function(){var e;return e=arguments[0],Array.prototype.splice.call(arguments,0,0,this),fm.icelink.webrtc.linkExtensions.unsetRemoteVideoRenderProvider.apply(this,arguments)},e._remoteStreamKey="fm.icelink.webrtc.remoteStream",e._localAudioRenderKey="fm.icelink.webrtc.localAudioRender",e._localVideoRenderKey="fm.icelink.webrtc.localVideoRender",e._remoteAudioRenderKey="fm.icelink.webrtc.remoteAudioRender",e._remoteVideoRenderKey="fm.icelink.webrtc.remoteVideoRender",e._remoteDataChannelCaptureKey="fm.icelink.webrtc.remoteDataChannelCapture",e._remoteDataChannelRenderKey="fm.icelink.webrtc.remoteDataChannelRender",e._dataChannelSsrcMapKey="fm.icelink.webrtc.dataChannelSsrcMap",e._reliableDataManagerKey="fm.icelink.webrtc.reliableDataManager",e}();var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.dataChannelInfo=function(n){function r(){this.toJson=e(this.toJson,this),this.setSynchronizationSource=e(this.setSynchronizationSource,this),this.setOnReceive=e(this.setOnReceive,this),this.setLabel=e(this.setLabel,this),this.setCname=e(this.setCname,this),this.removeOnUnhandledException=e(this.removeOnUnhandledException,this),this.raiseUnhandledException=e(this.raiseUnhandledException,this),this.raiseOnReceive=e(this.raiseOnReceive,this),this.getSynchronizationSource=e(this.getSynchronizationSource,this),this.getOnReceive=e(this.getOnReceive,this),this.getLabel=e(this.getLabel,this),this.getCname=e(this.getCname,this),this.addOnUnhandledException=e(this.addOnUnhandledException,this);var t,n,s,i,o,a;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=r.__super__.constructor.call(this),s=fm.lockedRandomizer.next(128),i=fm.lockedRandomizer.next(256),o=fm.lockedRandomizer.next(256),a=fm.lockedRandomizer.next(256),this.setSynchronizationSource(fm.parseAssistant.parseLongValue(fm.intExtensions.toString(16777216*s+65536*i+256*o+a))),this.setCname(fm.lockedRandomizer.randomString(16)),fm.util.attachProperties(this,arguments[0]),t):1===arguments.length?(n=arguments[0],r.call(this),this.setLabel(n),t):0===arguments.length?(t=r.__super__.constructor.call(this),s=fm.lockedRandomizer.next(128),i=fm.lockedRandomizer.next(256),o=fm.lockedRandomizer.next(256),a=fm.lockedRandomizer.next(256),this.setSynchronizationSource(fm.parseAssistant.parseLongValue(fm.intExtensions.toString(16777216*s+65536*i+256*o+a))),this.setCname(fm.lockedRandomizer.randomString(16)),t):void 0}return t(r,n),r.prototype._cname=null,r.prototype._label=null,r.prototype._onReceive=null,r.prototype._onUnhandledException=null,r.prototype._synchronizationSource=0,r.fromJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeDataChannelInfo(e)},r.fromJsonMultiple=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.deserializeDataChannelInfoArray(e)},r.toJson=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeDataChannelInfo(e)},r.toJsonMultiple=function(){var e;return e=arguments[0],fm.icelink.webrtc.serializer.serializeDataChannelInfoArray(e)},r.prototype.addOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,e)},r.prototype.getCname=function(){return this._cname},r.prototype.getLabel=function(){return this._label},r.prototype.getOnReceive=function(){return this._onReceive},r.prototype.getSynchronizationSource=function(){return this._synchronizationSource},r.prototype.raiseOnReceive=function(){var e,t,n,r,s,i;if(r=arguments[0],e=arguments[1],s=this.getOnReceive(),!fm.global.equals(s,null))try{return i=new fm.icelink.webrtc.dataChannelReceiveArgs,i.setLink(r),i.setConference(r.getConference()),i.setChannelInfo(this),i.setData(e),i.setDynamicProperties(r.getDynamicProperties()),s(i)}catch(t){if(n=t,!this.raiseUnhandledException(n))return fm.asyncException.asyncThrow(n,"DataChannelInfo -> OnReceive")}finally{}},r.prototype.raiseUnhandledException=function(){var e,t,n,r,s,i;if(n=arguments[0],s=this._onUnhandledException,!fm.global.equals(s,null)){e=new fm.icelink.unhandledExceptionArgs,e.setException(n),i=e;try{s(i)}catch(t){r=t,fm.asyncException.asyncThrow(r,"DataChannelInfo -> OnUnhandledException")}finally{}return i.getHandled()}return!1},r.prototype.removeOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,e)},r.prototype.setCname=function(){var e;return e=arguments[0],this._cname=e},r.prototype.setLabel=function(){var e;return e=arguments[0],this._label=e},r.prototype.setOnReceive=function(){var e;return e=arguments[0],this._onReceive=e},r.prototype.setSynchronizationSource=function(){var e;return e=arguments[0],this._synchronizationSource=e},r.prototype.toJson=function(){return fm.icelink.webrtc.dataChannelInfo.toJson(this)},r}(fm.object);var t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.serializer=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n.createAudioCaptureInitializeArgs=function(){return new fm.icelink.webrtc.audioCaptureInitializeArgs},n.createAudioRenderInitializeArgs=function(){return new fm.icelink.webrtc.audioRenderInitializeArgs},n.createDataChannelInfo=function(){return new fm.icelink.webrtc.dataChannelInfo("")},n.createDataChannelReceiveArgs=function(){return new fm.icelink.webrtc.dataChannelReceiveArgs},n.createLocalStartArgs=function(){return new fm.icelink.webrtc.localStartArgs},n.createLocalStartFailureArgs=function(){return new fm.icelink.webrtc.localStartFailureArgs},n.createLocalStartSuccessArgs=function(){return new fm.icelink.webrtc.localStartSuccessArgs},n.createReliableDataChannel=function(){return new fm.icelink.webrtc.reliableDataChannel(!1,"","")},n.createReliableDataReceiveArgs=function(){return new fm.icelink.webrtc.reliableDataReceiveArgs},n.createVideoCaptureInitializeArgs=function(){return new fm.icelink.webrtc.videoCaptureInitializeArgs},n.createVideoRenderInitializeArgs=function(){return new fm.icelink.webrtc.videoRenderInitializeArgs},n.deserializeAudioCaptureInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createAudioCaptureInitializeArgs,n.deserializeAudioCaptureInitializeArgsCallback)},n.deserializeAudioCaptureInitializeArgsCallback=function(){var e,t,n,r,s,i,o,a,u,l;switch(e=arguments[0],t=arguments[1],l=arguments[2],t){case"deviceNumber":e.setDeviceNumber(fm.serializer.deserializeInteger(l));break;case"clockRate":n=fm.serializer.deserializeInteger(l),null!==n&&e.setClockRate(n);break;case"channels":r=fm.serializer.deserializeInteger(l),null!==r&&e.setChannels(r);break;case"video":s=fm.serializer.deserializeBoolean(l),null!==s&&e.setVideo(s);break;case"videoDeviceNumber":e.setVideoDeviceNumber(fm.serializer.deserializeInteger(l));break;case"videoWidth":i=fm.serializer.deserializeInteger(l),null!==i&&e.setVideoWidth(i);break;case"videoHeight":o=fm.serializer.deserializeInteger(l),null!==o&&e.setVideoHeight(o);break;case"videoFrameRate":a=fm.serializer.deserializeInteger(l),null!==a&&e.setVideoFrameRate(a);break;case"videoClockRate":u=fm.serializer.deserializeInteger(l),null!==u&&e.setVideoClockRate(u)}},n.deserializeAudioRenderInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createAudioRenderInitializeArgs,n.deserializeAudioRenderInitializeArgsCallback)},n.deserializeAudioRenderInitializeArgsCallback=function(){var e,t,n,r,s,i;if(e=arguments[0],t=arguments[1],i=arguments[2],s=t,!fm.global.equals(s,null))if(fm.global.equals(s,"clockRate")){if(n=fm.serializer.deserializeInteger(i),null!==n)return e.setClockRate(n)}else if(fm.global.equals(s,"channels")&&(r=fm.serializer.deserializeInteger(i),null!==r))return e.setChannels(r)},n.deserializeBaseMediaArgsCallback=function(){var e,t,n,r,s,i,o,a;switch(e=arguments[0],t=arguments[1],a=arguments[2],t){case"audio":n=fm.serializer.deserializeBoolean(a),null!==n&&e.setAudio(n);break;case"video":r=fm.serializer.deserializeBoolean(a),null!==r&&e.setVideo(r);break;case"videoWidth":s=fm.serializer.deserializeInteger(a),null!==s&&e.setVideoWidth(s);break;case"videoHeight":i=fm.serializer.deserializeInteger(a),null!==i&&e.setVideoHeight(i);break;case"videoFrameRate":o=fm.serializer.deserializeInteger(a),null!==o&&e.setVideoFrameRate(o);break;case"audioDeviceNumber":e.setAudioDeviceNumber(fm.serializer.deserializeInteger(a));break;case"videoDeviceNumber":e.setVideoDeviceNumber(fm.serializer.deserializeInteger(a));break;case"defaultVideoScale":e.setDefaultVideoScale(fm.icelink.webrtc.serializer.deserializeLayoutScale(a));break;case"defaultVideoPreviewScale":e.setDefaultVideoPreviewScale(fm.icelink.webrtc.serializer.deserializeLayoutScale(a));break;case"defaultVideoSource":e.setDefaultVideoSource(fm.icelink.webrtc.serializer.deserializeVideoSource(a))}},n.deserializeDataChannelInfo=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createDataChannelInfo,n.deserializeDataChannelInfoCallback)},n.deserializeDataChannelInfoArray=function(){var e,t;return e=arguments[0],t=fm.serializer.deserializeObjectArray(e,n.createDataChannelInfo,n.deserializeDataChannelInfoCallback),fm.global.equals(t,null)?null:fm.arrayExtensions.toArray(t)},n.deserializeDataChannelInfoCallback=function(){var e,t,n,r,s;if(e=arguments[0],t=arguments[1],s=arguments[2],r=t,!fm.global.equals(r,null)){if(fm.global.equals(r,"label"))return e.setLabel(fm.serializer.deserializeString(s));if(fm.global.equals(r,"ssrc")){if(n=fm.serializer.deserializeLong(s),null!==n)return e.setSynchronizationSource(n)}else if(fm.global.equals(r,"cname"))return e.setCname(fm.serializer.deserializeString(s))}},n.deserializeDataChannelReceiveArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createDataChannelReceiveArgs,n.deserializeDataChannelReceiveArgsCallback)},n.deserializeDataChannelReceiveArgsCallback=function(){var e,t,n,r;if(e=arguments[0],t=arguments[1],r=arguments[2],n=t,!fm.global.equals(n,null)){if(fm.global.equals(n,"channelInfo"))return e.setChannelInfo(fm.icelink.webrtc.serializer.deserializeDataChannelInfo(r));if(fm.global.equals(n,"data"))return e.setData(fm.serializer.deserializeString(r))}},n.deserializeLayoutScale=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"contain":return fm.icelink.webrtc.layoutScale.Contain;case"cover":return fm.icelink.webrtc.layoutScale.Cover;case"stretch":return fm.icelink.webrtc.layoutScale.Stretch}return fm.icelink.webrtc.layoutScale.Contain},n.deserializeLocalStartArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createLocalStartArgs,n.deserializeLocalStartArgsCallback)},n.deserializeLocalStartArgsCallback=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],fm.icelink.webrtc.serializer.deserializeBaseMediaArgsCallback(t,e,n)},n.deserializeLocalStartFailureArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createLocalStartFailureArgs,n.deserializeLocalStartFailureArgsCallback)},n.deserializeLocalStartFailureArgsCallback=function(){var e,t,n,r;return t=arguments[0],e=arguments[1],r=arguments[2],n=e,!fm.global.equals(n,null)&&fm.global.equals(n,"exceptionMessage")?t.setException(new Error(fm.serializer.deserializeString(r))):fm.icelink.webrtc.serializer.deserializeBaseMediaArgsCallback(t,e,r)},n.deserializeLocalStartSuccessArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createLocalStartSuccessArgs,n.deserializeLocalStartSuccessArgsCallback)},n.deserializeLocalStartSuccessArgsCallback=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],fm.icelink.webrtc.serializer.deserializeBaseMediaArgsCallback(t,e,n)},n.deserializeReliableDataChannel=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createReliableDataChannel,n.deserializeReliableDataChannelCallback)},n.deserializeReliableDataChannelArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArray(t,n.createReliableDataChannel,n.deserializeReliableDataChannelCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializeReliableDataChannelCallback=function(){var e,t,n,r,s;if(n=arguments[0],e=arguments[1],s=arguments[2],r=e,!fm.global.equals(r,null)){if(fm.global.equals(r,"label"))return n.setLabel(fm.serializer.deserializeString(s));if(fm.global.equals(r,"subprotocol"))return n.setSubprotocol(fm.serializer.deserializeString(s));if(fm.global.equals(r,"identifier"))return n.setIdentifier(fm.serializer.deserializeString(s));if(fm.global.equals(r,"unordered")&&(t=fm.serializer.deserializeBoolean(s),null!==t))return n.setUnordered(t)}},n.deserializeReliableDataReceiveArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createReliableDataReceiveArgs,n.deserializeReliableDataReceiveArgsCallback)},n.deserializeReliableDataReceiveArgsCallback=function(){var e,t,n,r;if(t=arguments[0],e=arguments[1],r=arguments[2],n=e,!fm.global.equals(n,null)){if(fm.global.equals(n,"channel"))return t.setChannel(fm.icelink.webrtc.serializer.deserializeReliableDataChannel(r));if(fm.global.equals(n,"dataString"))return t.setDataString(fm.serializer.deserializeString(r));if(fm.global.equals(n,"dataBytes"))return t.setDataBytes(fm.crypto.base64Decode(fm.serializer.deserializeString(r)))}},n.deserializeVideoCaptureInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createVideoCaptureInitializeArgs,n.deserializeVideoCaptureInitializeArgsCallback)},n.deserializeVideoCaptureInitializeArgsCallback=function(){var e,t,n,r,s,i,o,a,u,l;switch(l=arguments[0],e=arguments[1],u=arguments[2],e){case"deviceNumber":l.setDeviceNumber(fm.serializer.deserializeInteger(u));break;case"width":t=fm.serializer.deserializeInteger(u),null!==t&&l.setWidth(t);break;case"height":n=fm.serializer.deserializeInteger(u),null!==n&&l.setHeight(n);break;case"frameRate":r=fm.serializer.deserializeInteger(u),null!==r&&l.setFrameRate(r);break;case"clockRate":s=fm.serializer.deserializeInteger(u),null!==s&&l.setClockRate(s);break;case"audio":i=fm.serializer.deserializeBoolean(u),null!==i&&l.setAudio(i);break;case"audioDeviceNumber":l.setAudioDeviceNumber(fm.serializer.deserializeInteger(u));break;case"audioChannels":o=fm.serializer.deserializeInteger(u),null!==o&&l.setAudioChannels(o);break;case"audioClockRate":a=fm.serializer.deserializeInteger(u),null!==a&&l.setAudioClockRate(a)}},n.deserializeVideoRenderInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createVideoRenderInitializeArgs,n.deserializeVideoRenderInitializeArgsCallback)},n.deserializeVideoRenderInitializeArgsCallback=function(){var e,t,n,r,s;return s=arguments[0],e=arguments[1],r=arguments[2],n=e,!fm.global.equals(n,null)&&fm.global.equals(n,"clockRate")&&(t=fm.serializer.deserializeInteger(r),null!==t)?s.setClockRate(t):void 0},n.deserializeVideoSource=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"camera":return fm.icelink.webrtc.videoSource.Camera;case"screen":return fm.icelink.webrtc.videoSource.Screen}return fm.icelink.webrtc.videoSource.Camera},n.serializeAudioCaptureInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeAudioCaptureInitializeArgsCallback)},n.serializeAudioCaptureInitializeArgsCallback=function(){var e,t;return e=arguments[0],t=arguments[1],null!==e.getDeviceNumber()&&(t.deviceNumber=fm.serializer.serializeInteger(e.getDeviceNumber())),t.clockRate=fm.serializer.serializeInteger(e.getClockRate()),t.channels=fm.serializer.serializeInteger(e.getChannels()),t.video=fm.serializer.serializeBoolean(e.getVideo()),null!==e.getVideoDeviceNumber()&&(t.videoDeviceNumber=fm.serializer.serializeInteger(e.getVideoDeviceNumber())),t.videoWidth=fm.serializer.serializeInteger(e.getVideoWidth()),t.videoHeight=fm.serializer.serializeInteger(e.getVideoHeight()),t.videoFrameRate=fm.serializer.serializeInteger(e.getVideoFrameRate()),t.videoClockRate=fm.serializer.serializeInteger(e.getVideoClockRate())},n.serializeAudioRenderInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeAudioRenderInitializeArgsCallback)},n.serializeAudioRenderInitializeArgsCallback=function(){var e,t;return e=arguments[0],t=arguments[1],t.clockRate=fm.serializer.serializeInteger(e.getClockRate()),t.channels=fm.serializer.serializeInteger(e.getChannels())},n.serializeBaseMediaArgsCallback=function(){var e,t;return e=arguments[0],t=arguments[1],t.audio=fm.serializer.serializeBoolean(e.getAudio()),t.video=fm.serializer.serializeBoolean(e.getVideo()),t.videoWidth=fm.serializer.serializeInteger(e.getVideoWidth()),t.videoHeight=fm.serializer.serializeInteger(e.getVideoHeight()),t.videoFrameRate=fm.serializer.serializeInteger(e.getVideoFrameRate()),t.defaultVideoScale=fm.icelink.webrtc.serializer.serializeLayoutScale(e.getDefaultVideoScale()),t.defaultVideoPreviewScale=fm.icelink.webrtc.serializer.serializeLayoutScale(e.getDefaultVideoPreviewScale()),t.defaultVideoSource=fm.icelink.webrtc.serializer.serializeVideoSource(e.getDefaultVideoSource()),null!==e.getAudioDeviceNumber()&&(t.audioDeviceNumber=fm.serializer.serializeInteger(e.getAudioDeviceNumber())),null!==e.getVideoDeviceNumber()?t.videoDeviceNumber=fm.serializer.serializeInteger(e.getVideoDeviceNumber()):void 0},n.serializeDataChannelInfo=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeDataChannelInfoCallback)},n.serializeDataChannelInfoArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArray(e,n.serializeDataChannelInfoCallback)},n.serializeDataChannelInfoCallback=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e.getLabel(),null)||(t.label=fm.serializer.serializeString(e.getLabel())),t.ssrc=fm.serializer.serializeLong(e.getSynchronizationSource()),fm.global.equals(e.getCname(),null)?void 0:t.cname=fm.serializer.serializeString(e.getCname())},n.serializeDataChannelReceiveArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeDataChannelReceiveArgsCallback)},n.serializeDataChannelReceiveArgsCallback=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e.getChannelInfo(),null)||(t.channelInfo=fm.icelink.webrtc.serializer.serializeDataChannelInfo(e.getChannelInfo())),fm.global.equals(e.getData(),null)?void 0:t.data=fm.serializer.serializeString(e.getData())},n.serializeLayoutScale=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.icelink.webrtc.layoutScale.Contain:t="contain";break;case fm.icelink.webrtc.layoutScale.Cover:t="cover";break;case fm.icelink.webrtc.layoutScale.Stretch:t="stretch"}return fm.serializer.serializeString(t)},n.serializeLocalStartArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeLocalStartArgsCallback)},n.serializeLocalStartArgsCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.icelink.webrtc.serializer.serializeBaseMediaArgsCallback(t,e)},n.serializeLocalStartFailureArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeLocalStartFailureArgsCallback)},n.serializeLocalStartFailureArgsCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.icelink.webrtc.serializer.serializeBaseMediaArgsCallback(t,e),fm.global.equals(t.getException(),null)?void 0:e.exceptionMessage=fm.serializer.serializeString(t.getException().message)},n.serializeLocalStartSuccessArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeLocalStartSuccessArgsCallback)},n.serializeLocalStartSuccessArgsCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.icelink.webrtc.serializer.serializeBaseMediaArgsCallback(t,e)},n.serializeReliableDataChannel=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeReliableDataChannelCallback)},n.serializeReliableDataChannelArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArray(e,n.serializeReliableDataChannelCallback)},n.serializeReliableDataChannelCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t.getLabel(),null)||(e.label=fm.serializer.serializeString(t.getLabel())),fm.global.equals(t.getSubprotocol(),null)||(e.subprotocol=fm.serializer.serializeString(t.getSubprotocol())),fm.global.equals(t.getIdentifier(),null)||(e.identifier=fm.serializer.serializeString(t.getIdentifier())),e.unordered=fm.serializer.serializeBoolean(t.getUnordered())},n.serializeReliableDataReceiveArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeReliableDataReceiveArgsCallback)},n.serializeReliableDataReceiveArgsCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t.getChannel(),null)||(e.channel=fm.icelink.webrtc.serializer.serializeReliableDataChannel(t.getChannel())),fm.global.equals(t.getDataString(),null)||(e.dataString=fm.serializer.serializeString(t.getDataString())),fm.global.equals(t.getDataBytes(),null)?void 0:e.dataBytes=fm.serializer.serializeString(fm.crypto.base64Encode(t.getDataBytes()))},n.serializeVideoCaptureInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeVideoCaptureInitializeArgsCallback)},n.serializeVideoCaptureInitializeArgsCallback=function(){var e,t;return t=arguments[0],e=arguments[1],null!==t.getDeviceNumber()&&(e.deviceNumber=fm.serializer.serializeInteger(t.getDeviceNumber())),e.width=fm.serializer.serializeInteger(t.getWidth()),e.height=fm.serializer.serializeInteger(t.getHeight()),e.frameRate=fm.serializer.serializeInteger(t.getFrameRate()),e.clockRate=fm.serializer.serializeInteger(t.getClockRate()),e.audio=fm.serializer.serializeBoolean(t.getAudio()),null!==t.getAudioDeviceNumber()&&(e.audioDeviceNumber=fm.serializer.serializeInteger(t.getAudioDeviceNumber())),e.audioClockRate=fm.serializer.serializeInteger(t.getAudioClockRate()),e.audioChannels=fm.serializer.serializeInteger(t.getAudioChannels())},n.serializeVideoRenderInitializeArgs=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeVideoRenderInitializeArgsCallback)},n.serializeVideoRenderInitializeArgsCallback=function(){var e,t;return t=arguments[0],e=arguments[1],e.clockRate=fm.serializer.serializeInteger(t.getClockRate())},n.serializeVideoSource=function(){var e,t;switch(t=arguments[0],e=null,t){case fm.icelink.webrtc.videoSource.Camera:e="camera";break;case fm.icelink.webrtc.videoSource.Screen:e="screen"}return fm.serializer.serializeString(e)},n}(fm.object);var t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.userMedia=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n._getMediaArgsKey=null,n.getAudioDeviceNames=function(){var e;return 0===arguments.length?fm.icelink.webrtc.userMedia.getAudioDeviceNames(fm.icelink.webrtc.defaultProviders.getAudioCaptureProvider()):1===arguments.length?(e=arguments[0],fm.global.equals(e,null)?new Array(0):e.getDeviceNames()):void 0},n.getMedia=function(){var e,t,r;if(e=arguments[0],fm.global.equals(e,null))throw new Error("getMediaArgs cannot be null.");if(e.getAudio()&&(fm.global.equals(e.getAudioCaptureProvider(),null)&&e.setAudioCaptureProvider(fm.icelink.webrtc.defaultProviders.getAudioCaptureProvider()),fm.global.equals(e.getAudioCaptureProvider(),null)))throw new Error("AudioCaptureProvider must be set to capture audio media (no default exists for this platform).");if(fm.global.equals(e.getCreateAudioRenderProvider(),null)&&e.setCreateAudioRenderProvider(fm.icelink.webrtc.defaultProviders.getCreateAudioRenderProvider()),e.getVideo()&&(fm.global.equals(e.getVideoCaptureProvider(),null)&&e.setVideoCaptureProvider(fm.icelink.webrtc.defaultProviders.getVideoCaptureProvider(e.getDefaultVideoPreviewScale())),
fm.global.equals(e.getVideoCaptureProvider(),null)))throw new Error("VideoCaptureProvider must be set to capture video media (no default exists for this platform).");return fm.global.equals(e.getCreateVideoRenderProvider(),null)&&e.setCreateVideoRenderProvider(fm.icelink.webrtc.defaultProviders.getCreateVideoRenderProvider(e.getDefaultVideoScale())),r=new fm.icelink.webrtc.localMediaStream,r.setAudioCaptureProvider(e.getAudioCaptureProvider()),r.setVideoCaptureProvider(e.getVideoCaptureProvider()),r.setCreateAudioRenderProvider(e.getCreateAudioRenderProvider()),r.setCreateVideoRenderProvider(e.getCreateVideoRenderProvider()),r.setDefaultVideoScale(e.getDefaultVideoScale()),r.setDefaultVideoPreviewScale(e.getDefaultVideoPreviewScale()),r.setDefaultVideoSource(e.getDefaultVideoSource()),t=r,t.setDynamicValue(fm.icelink.webrtc.userMedia._getMediaArgsKey,e),t.initialize(n.onLocalStreamInitialize)},n.getVideoDeviceNames=function(){var e;return 0===arguments.length?fm.icelink.webrtc.userMedia.getVideoDeviceNames(fm.icelink.webrtc.defaultProviders.getVideoCaptureProvider(fm.icelink.webrtc.layoutScale.Contain)):1===arguments.length?(e=arguments[0],fm.global.equals(e,null)?new Array(0):e.getDeviceNames()):void 0},n.localStreamStartFailure=function(){var e,t;return t=arguments[0],e=fm.global.tryCast(t.getLocalStream().getDynamicValue(fm.icelink.webrtc.userMedia._getMediaArgsKey),fm.icelink.webrtc.getMediaArgs),fm.icelink.webrtc.userMedia.raiseGetMediaFailure(e,t.getException()),fm.icelink.webrtc.userMedia.raiseGetMediaComplete(e),t.getLocalStream().unsetDynamicValue(fm.icelink.webrtc.userMedia._getMediaArgsKey)},n.localStreamStartSuccess=function(){var e,t;return t=arguments[0],e=fm.global.tryCast(t.getLocalStream().getDynamicValue(fm.icelink.webrtc.userMedia._getMediaArgsKey),fm.icelink.webrtc.getMediaArgs),fm.icelink.webrtc.userMedia.raiseGetMediaSuccess(e,t.getLocalStream()),fm.icelink.webrtc.userMedia.raiseGetMediaComplete(e),t.getLocalStream().unsetDynamicValue(fm.icelink.webrtc.userMedia._getMediaArgsKey)},n.onLocalStreamInitialize=function(){var e,t,r;return r=arguments[0],t=fm.global.tryCast(r.getDynamicValue(fm.icelink.webrtc.userMedia._getMediaArgsKey),fm.icelink.webrtc.getMediaArgs),e=new fm.icelink.webrtc.localStartArgs,e.setAudio(t.getAudio()),e.setAudioDeviceNumber(t.getAudioDeviceNumber()),e.setVideo(t.getVideo()),e.setVideoDeviceNumber(t.getVideoDeviceNumber()),e.setVideoFrameRate(t.getVideoFrameRate()),e.setVideoHeight(t.getVideoHeight()),e.setVideoWidth(t.getVideoWidth()),e.setDefaultVideoScale(t.getDefaultVideoScale()),e.setDefaultVideoPreviewScale(t.getDefaultVideoPreviewScale()),e.setDefaultVideoSource(t.getDefaultVideoSource()),e.setOnSuccess(n.localStreamStartSuccess),e.setOnFailure(n.localStreamStartFailure),r.start(e)},n.raiseGetMediaComplete=function(){var e,t;return e=arguments[0],fm.global.equals(e.getOnComplete(),null)?void 0:(t=new fm.icelink.webrtc.getMediaCompleteArgs,t.setDynamicProperties(e.getDynamicProperties()),t.setAudio(e.getAudio()),t.setAudioDeviceNumber(e.getAudioDeviceNumber()),t.setVideo(e.getVideo()),t.setVideoDeviceNumber(e.getVideoDeviceNumber()),t.setVideoFrameRate(e.getVideoFrameRate()),t.setVideoHeight(e.getVideoHeight()),t.setVideoWidth(e.getVideoWidth()),e.getOnComplete()(t))},n.raiseGetMediaFailure=function(){var e,t,n;return t=arguments[0],e=arguments[1],fm.global.equals(t.getOnFailure(),null)?void 0:(n=new fm.icelink.webrtc.getMediaFailureArgs,n.setDynamicProperties(t.getDynamicProperties()),n.setAudio(t.getAudio()),n.setAudioDeviceNumber(t.getAudioDeviceNumber()),n.setVideo(t.getVideo()),n.setVideoDeviceNumber(t.getVideoDeviceNumber()),n.setVideoFrameRate(t.getVideoFrameRate()),n.setVideoHeight(t.getVideoHeight()),n.setVideoWidth(t.getVideoWidth()),n.setException(e),t.getOnFailure()(n))},n.raiseGetMediaSuccess=function(){var e,t,n,r,s;return t=arguments[0],n=arguments[1],fm.global.equals(t.getOnSuccess(),null)?void 0:(e=n.getAudioCaptureProvider(),s=n.getVideoCaptureProvider(),r=new fm.icelink.webrtc.getMediaSuccessArgs,r.setDynamicProperties(t.getDynamicProperties()),r.setAudio(t.getAudio()),r.setAudioDeviceNumber(t.getAudioDeviceNumber()),r.setVideo(t.getVideo()),r.setVideoDeviceNumber(t.getVideoDeviceNumber()),r.setVideoFrameRate(t.getVideoFrameRate()),r.setVideoHeight(t.getVideoHeight()),r.setVideoWidth(t.getVideoWidth()),r.setLocalStream(n),r.setLocalVideoControl(fm.global.equals(s,null)?null:s.getPreviewControl()),r.setAudioDeviceLabel(fm.global.equals(e,null)?null:e.getLabel()),r.setVideoDeviceLabel(fm.global.equals(s,null)?null:s.getLabel()),t.getOnSuccess()(r))},n._getMediaArgsKey="fm.icelink.webrtc.usermedia.getmediaargs",n}(fm.object),fm.icelink.webrtc.defaultProviders=function(){function e(){}return e._isMobile=!1,e.isMobile=function(){return e._isMobile},e.forceMobile=function(){return e._isMobile=!0},e.forceDesktop=function(){return e._isMobile=!1},e.getAudioCaptureProvider=function(){return fm.icelink.webrtc.willUsePlugin()?new fm.icelink.webrtc.pluginAudioCaptureProvider:new fm.icelink.webrtc.jsAudioCaptureProvider},e.getVideoCaptureProvider=function(e){return fm.icelink.webrtc.willUsePlugin()?new fm.icelink.webrtc.pluginVideoCaptureProvider(e):new fm.icelink.webrtc.jsVideoCaptureProvider(e)},e.getCreateAudioRenderProvider=function(){return function(){return fm.icelink.webrtc.willUsePlugin()?new fm.icelink.webrtc.pluginAudioRenderProvider:new fm.icelink.webrtc.jsAudioRenderProvider}},e.getCreateVideoRenderProvider=function(e){return function(){return fm.icelink.webrtc.willUsePlugin()?new fm.icelink.webrtc.pluginVideoRenderProvider(e):new fm.icelink.webrtc.jsVideoRenderProvider(e)}},e}();var t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.audioCaptureProvider=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.videoCaptureProvider=function(n){function r(){return this.getPreviewControl=e(this.getPreviewControl,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.getPreviewControl=function(){return null},r}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.audioRenderProvider=function(n){function r(){return this.renderInternal=e(this.renderInternal,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.renderInternal=function(){throw new Error("The JavaScript SDK cannot render audio buffers.")},r}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.videoRenderProvider=function(n){function r(){return this.renderInternal=e(this.renderInternal,this),this.getControl=e(this.getControl,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.getControl=function(){return null},r.prototype.renderInternal=function(){throw new Error("The JavaScript SDK cannot render video buffers.")},r}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.jsAudioCaptureProvider=function(n){function r(){return this.getDeviceNames=e(this.getDeviceNames,this),this.getLabel=e(this.getLabel,this),this.setLocalStream=e(this.setLocalStream,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.setLocalStream=function(e,t){return this._localStream=e,this._deviceNames=t},r.prototype.getLabel=function(){return"Audio Input"},r.prototype.getDeviceNames=function(){return this._deviceNames},r}(fm.icelink.webrtc.audioCaptureProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.jsVideoCaptureProvider=function(n){function r(t){this.getDeviceNames=e(this.getDeviceNames,this),this.getLabel=e(this.getLabel,this),this.getPreviewControl=e(this.getPreviewControl,this),this.setLocalStream=e(this.setLocalStream,this),r.__super__.constructor.call(this),this._renderProvider=new fm.icelink.webrtc.jsVideoRenderProvider(t,!0)}return t(r,n),r.prototype.setLocalStream=function(e,t,n){return this._localStream=e,this._deviceNames=t,this._renderProvider.setLocalStream(e,n)},r.prototype.getPreviewControl=function(){return this._renderProvider.getControl()},r.prototype.getLabel=function(){return"Video Input"},r.prototype.getDeviceNames=function(){return this._deviceNames},r}(fm.icelink.webrtc.videoCaptureProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.jsAudioRenderProvider=function(n){function r(){this.attachToAudio=e(this.attachToAudio,this),this.setRemoteStream=e(this.setRemoteStream,this),this.setLocalStream=e(this.setLocalStream,this),this.setVolume=e(this.setVolume,this),this.getVolume=e(this.getVolume,this),this.unmute=e(this.unmute,this),this.mute=e(this.mute,this),this.getIsMuted=e(this.getIsMuted,this),r.__super__.constructor.call(this),this._audio=document.createElement("audio"),this._audio.setAttribute("autoplay","autoplay")}return t(r,n),r.prototype._stream=null,r.prototype._audio=null,r.prototype.getIsMuted=function(){var e;return this._stream?0===this._stream.getAudioTracks().length?!1:(e=this._stream.getAudioTracks()[0],!e.enabled):!1},r.prototype.mute=function(){var e;return this._stream?0===this._stream.getAudioTracks().length?!1:(e=this._stream.getAudioTracks()[0],e.enabled?(e.enabled=!1,!0):!1):!1},r.prototype.unmute=function(){var e;return this._stream?0===this._stream.getAudioTracks().length?!1:(e=this._stream.getAudioTracks()[0],e.enabled?!1:(e.enabled=!0,!0)):!1},r.prototype.getVolume=function(){return this._audio.volume},r.prototype.setVolume=function(e){return this._audio.volume=e},r.prototype.setLocalStream=function(e){return fm.icelink.util.hasORTC()?(this._stream=new MediaStream,this._stream.addTrack(e.getBackingStream().getAudioTracks()[0])):this._stream=e.getBackingStream()},r.prototype.setRemoteStream=function(e){return this._stream=e.getBackingStream(),this._stream&&0===this._stream.getVideoTracks().length?this.attachToAudio(!1):void 0},r.prototype.attachToAudio=function(e,t){var n,r,s;e=this._stream,t&&(this._audio.muted=!0);try{"undefined"!=typeof this._audio.srcObject?this._audio.srcObject=e:"undefined"!=typeof this._audio.mozSrcObject?this._audio.mozSrcObject=e:"undefined"!=typeof attachMediaStream?attachMediaStream(this._audio,e):(n=window.URL||window.webkitURL,this._audio.src=n.createObjectURL(e))}catch(r){s=r,fm.log.error("Could not attach "+(t?"local":"remote")+" media stream to audio element.",s)}return navigator.mozGetUserMedia?this._audio.play():void 0},r}(fm.icelink.webrtc.audioRenderProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.jsVideoRenderProvider=function(n){function r(t,n,s){this.applyScale=e(this.applyScale,this),this.getControl=e(this.getControl,this),this.attachToVideo=e(this.attachToVideo,this),this.setRemoteStream=e(this.setRemoteStream,this),this.setLocalStream=e(this.setLocalStream,this),this.setVolume=e(this.setVolume,this),this.getVolume=e(this.getVolume,this),this.unmute=e(this.unmute,this),this.mute=e(this.mute,this),this.getIsMuted=e(this.getIsMuted,this),this.getVideoHeight=e(this.getVideoHeight,this),this.getVideoWidth=e(this.getVideoWidth,this),r.__super__.constructor.call(this),this._container=document.createElement("div"),this._container.style.position="relative",this._container.style.overflow="hidden",n?this._container.className="fm-icelink-webrtc-video fm-icelink-webrtc-video-local":this._container.className="fm-icelink-webrtc-video fm-icelink-webrtc-video-remote",this._scale=t,this._video=document.createElement("video"),this._video.style.position="absolute",this._video.setAttribute("autoplay","autoplay"),fm.util.observe(this._video,"pause",function(e){return function(){return e._video.parentNode?void 0:e._video.play()}}(this)),this._container.appendChild(this._video)}return t(r,n),r.prototype._stream=null,r.prototype._container=null,r.prototype._video=null,r.prototype._scale=null,r.prototype.getVideoWidth=function(){return this._video?this._video.videoWidth:0},r.prototype.getVideoHeight=function(){return this._video?this._video.videoHeight:0},r.prototype.getIsMuted=function(){var e;return this._stream?0===this._stream.getVideoTracks().length?!1:(e=this._stream.getVideoTracks()[0],!e.enabled):!1},r.prototype.mute=function(){var e;return this._stream?0===this._stream.getVideoTracks().length?!1:(e=this._stream.getVideoTracks()[0],e.enabled?(e.enabled=!1,!0):!1):!1},r.prototype.unmute=function(){var e;return this._stream?0===this._stream.getVideoTracks().length?!1:(e=this._stream.getVideoTracks()[0],e.enabled?!1:(e.enabled=!0,!0)):!1},r.prototype.getVolume=function(){return this._video.volume},r.prototype.setVolume=function(e){return this._video.volume=e},r.prototype.setLocalStream=function(e,t){return t&&(this._container.style.transform="scale(-1,1)"),fm.icelink.util.hasORTC()?(this._stream=new MediaStream,this._stream.addTrack(e.getBackingStream().getVideoTracks()[0])):this._stream=e.getBackingStream(),this.attachToVideo(!0)},r.prototype.setRemoteStream=function(e){return this._stream=e.getBackingStream(),this.attachToVideo(!1)},r.prototype.attachToVideo=function(e){var t,n,r,s,i;i=this._stream,e&&(this._video.muted=!0);try{"undefined"!=typeof this._video.srcObject?this._video.srcObject=i:"undefined"!=typeof this._video.mozSrcObject?this._video.mozSrcObject=i:"undefined"!=typeof attachMediaStream?(n=null===this._container.parentNode,n&&document.body.appendChild(this._container),attachMediaStream(this._video,i),this._video=this._container.firstChild,n&&document.body.removeChild(this._container)):(t=window.URL||window.webkitURL,this._video.src=t.createObjectURL(i))}catch(r){s=r,fm.log.error("Could not attach "+(e?"local":"remote")+" media stream to video element.",s)}return navigator.mozGetUserMedia&&this._video.play(),this.applyScale()},r.prototype.getControl=function(){return this._container},r.prototype.applyScale=function(){var e,t,n,r,s,i;if(i=this._scale)if(this._video.style.hasOwnProperty("objectFit"))switch(this._video.style.width="100%",this._video.style.height="100%",i){case fm.icelink.webrtc.layoutScale.Contain:return this._video.style.objectFit="contain";case fm.icelink.webrtc.layoutScale.Cover:return this._video.style.objectFit="cover";case fm.icelink.webrtc.layoutScale.Stretch:return this._video.style.objectFit="fill"}else switch(i){case fm.icelink.webrtc.layoutScale.Contain:return this._video.style.width="100%",this._video.style.height="100%";case fm.icelink.webrtc.layoutScale.Cover:return this._container.style.display="inline-block",this._video.style.left="-100%",this._video.style.right="-100%",this._video.style.top="-100%",this._video.style.bottom="-100%",this._video.style.margin="auto",this._video.style.maxWidth="none",this._video.style.maxHeight="none",s=function(e){return function(){var t,n,r,s;return n=e._container.clientWidth,t=e._container.clientHeight,s=e._video.clientWidth,r=e._video.clientHeight,!r||s/r>n/t?(e._video.style.width="auto",e._video.style.height="100%",e._video.style.maxWidth="none"):(e._video.style.width="100%",e._video.style.height="auto",e._video.style.maxWidth="none")}}(this),fm.util.observe(this._video,"loadeddata",function(e){return function(){return s()}}(this)),fm.util.observeAttr(this._container,function(e){return function(e){return"width"===e||"height"===e||"style"===e?s():void 0}}(this)),s();case fm.icelink.webrtc.layoutScale.Stretch:return this._video.style.transformOrigin="0px 0px",t=0,e=0,r=0,n=0,s=function(s){return function(){var i,o,a,u;return o=s._container.clientWidth,i=s._container.clientHeight,u=s._video.clientWidth,a=s._video.clientHeight,(o!==t||i!==e||u!==r||a!==n)&&u&&a?(s._video.style.transform="scale("+o/u+", "+i/a+")",t=o,e=i,r=u,n=a):void 0}}(this),fm.util.observe(this._video,"loadeddata",function(e){return function(){return s()}}(this)),fm.util.observeAttr(this._container,function(e){return function(e){return"width"===e||"height"===e||"style"===e?s():void 0}}(this)),s()}},r}(fm.icelink.webrtc.videoRenderProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.pluginAudioCaptureProvider=function(n){function r(){return this.getDeviceNames=e(this.getDeviceNames,this),this.getLabel=e(this.getLabel,this),this.setLocalStream=e(this.setLocalStream,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.setLocalStream=function(e,t){return this._localStream=e,this._deviceNames=t},r.prototype.getLabel=function(){return"Audio Input"},r.prototype.getDeviceNames=function(){return this._deviceNames},r}(fm.icelink.webrtc.audioCaptureProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.pluginVideoCaptureProvider=function(n){function r(t){this.getDeviceNames=e(this.getDeviceNames,this),this.getLabel=e(this.getLabel,this),this.getPreviewControl=e(this.getPreviewControl,this),this.setLocalStream=e(this.setLocalStream,this),r.__super__.constructor.call(this),this._renderProvider=new fm.icelink.webrtc.pluginVideoRenderProvider(t,!0)}return t(r,n),r.prototype.setLocalStream=function(e,t){return this._localStream=e,this._deviceNames=t,this._renderProvider.setLocalStream(e)},r.prototype.getPreviewControl=function(){return this._renderProvider.getControl()},r.prototype.getLabel=function(){return"Video Input"},r.prototype.getDeviceNames=function(){return this._deviceNames},r}(fm.icelink.webrtc.videoCaptureProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.pluginAudioRenderProvider=function(n){function r(){return this.setRemoteStream=e(this.setRemoteStream,this),this.setLocalStream=e(this.setLocalStream,this),this.setVolume=e(this.setVolume,this),this.getVolume=e(this.getVolume,this),this.unmute=e(this.unmute,this),this.mute=e(this.mute,this),this.getIsMuted=e(this.getIsMuted,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.getIsMuted=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.arp_getIsMutedLocal(t._localStreamPid):n.arp_getIsMutedRemote(t._linkPid)}}(this)}),e},r.prototype.mute=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.arp_muteLocal(t._localStreamPid):n.arp_muteRemote(t._linkPid)}}(this)}),e},r.prototype.unmute=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.arp_unmuteLocal(t._localStreamPid):n.arp_unmuteRemote(t._linkPid)}}(this)}),e},r.prototype.getVolume=function(){var e;return e=1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.arp_getVolumeLocal(t._localStreamPid):n.arp_getVolumeRemote(t._linkPid)}}(this)}),e},r.prototype.setVolume=function(e){var t;return t=!1,fm.icelink.webrtc.getCoreControl({callback:function(n){return function(r){return t=n._localStreamPid?r.arp_setVolumeLocal(n._localStreamPid,e):r.arp_setVolumeRemote(n._linkPid,e)}}(this)}),t},r.prototype.setLocalStream=function(e){return this._localStreamPid=e.pid},r.prototype.setRemoteStream=function(e){return this._linkPid=e.linkPid},r}(fm.icelink.webrtc.audioRenderProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.pluginVideoRenderProvider=function(n){function r(t,n){this.getControl=e(this.getControl,this),this.getControls=e(this.getControls,this),this.setRemoteStream=e(this.setRemoteStream,this),this.setLocalStream=e(this.setLocalStream,this),this.setVolume=e(this.setVolume,this),this.getVolume=e(this.getVolume,this),this.unmute=e(this.unmute,this),this.mute=e(this.mute,this),this.getIsMuted=e(this.getIsMuted,this),this.getVideoHeight=e(this.getVideoHeight,this),this.getVideoWidth=e(this.getVideoWidth,this),this.invalidate=e(this.invalidate,this),r.__super__.constructor.call(this),this._container=document.createElement("div"),n?this._container.className="fm-icelink-webrtc-video fm-icelink-webrtc-video-local":this._container.className="fm-icelink-webrtc-video fm-icelink-webrtc-video-remote",this._underlay=document.createElement("iframe"),this._underlay.src="about:blank",this._underlay.setAttribute("frameBorder","0"),this._underlay.style.border="0",this._underlay.style.backgroundColor="#000",this._underlay.style.position="absolute",this._underlay.style.top="0",this._underlay.style.left="0",this._underlay.style.width="100%",this._underlay.style.height="100%",this._container.appendChild(this._underlay)}return t(r,n),r.prototype._localStreamPid=null,r.prototype._linkPid=null,r.prototype._container=null,r.prototype._underlay=null,r.prototype.invalidate=function(e){return e.style.left="1px",e.style.width="99%",window.setTimeout(function(){return e.style.left="0px",e.style.width="100%"},20)},r.prototype.getVideoWidth=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.vrp_getVideoWidthLocal(t._localStreamPid):n.vrp_getVideoWidthRemote(t._linkPid)}}(this)}),e},r.prototype.getVideoHeight=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.vrp_getVideoHeightLocal(t._localStreamPid):n.vrp_getVideoHeightRemote(t._linkPid)}}(this)}),e},r.prototype.getIsMuted=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.vrp_getIsMutedLocal(t._localStreamPid):n.vrp_getIsMutedRemote(t._linkPid)}}(this)}),e},r.prototype.mute=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.vrp_muteLocal(t._localStreamPid):n.vrp_muteRemote(t._linkPid)}}(this)}),e},r.prototype.unmute=function(){var e;return e=!1,fm.icelink.webrtc.getCoreControl({callback:function(t){return function(n){return e=t._localStreamPid?n.vrp_unmuteLocal(t._localStreamPid):n.vrp_unmuteRemote(t._linkPid)}}(this)}),e},r.prototype.getVolume=function(){return 1},r.prototype.setVolume=function(e){},r.prototype.setLocalStream=function(e){return this._localStreamPid=e.pid,this.getControls(function(t){return function(n,r){return r.vrp_setLocalStream(e.pid,n.getControlId()),t.invalidate(n)}}(this))},r.prototype.setRemoteStream=function(e){return this._linkPid=e.linkPid,this.getControls(function(t){return function(n,r){return r.vrp_setRemoteStream(e.linkPid,n.getControlId()),t.invalidate(n)}}(this))},r.prototype.getControls=function(e){return fm.icelink.webrtc.getVideoContainerControl({container:this._container,style:{width:"100%",height:"100%"},callback:function(t){return function(t){return fm.icelink.webrtc.getCoreControl({callback:function(n){return t.initialize(n.getRemotingPort()),e(t,n)}})}}(this)})},r.prototype.getControl=function(){return this._container},r}(fm.icelink.webrtc.videoRenderProvider);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.mediaStream=function(n){function r(t,n){this.raiseAudioLevel=e(this.raiseAudioLevel,this),this.raiseVideoUnmuted=e(this.raiseVideoUnmuted,this),this.raiseAudioUnmuted=e(this.raiseAudioUnmuted,this),this.raiseVideoMuted=e(this.raiseVideoMuted,this),this.raiseAudioMuted=e(this.raiseAudioMuted,this),this.raiseVideoEnded=e(this.raiseVideoEnded,this),this.raiseAudioEnded=e(this.raiseAudioEnded,this),this.getVideoIsMuted=e(this.getVideoIsMuted,this),this.getAudioIsMuted=e(this.getAudioIsMuted,this),this.setAudioVolume=e(this.setAudioVolume,this),this.getAudioVolume=e(this.getAudioVolume,this),this.unmuteVideo=e(this.unmuteVideo,this),this.unmuteAudio=e(this.unmuteAudio,this),this.muteVideo=e(this.muteVideo,this),this.muteAudio=e(this.muteAudio,this),this.toggleVideoMute=e(this.toggleVideoMute,this),this.toggleAudioMute=e(this.toggleAudioMute,this),this.removeOnAudioLevel=e(this.removeOnAudioLevel,this),this.addOnAudioLevel=e(this.addOnAudioLevel,this),this.removeOnVideoUnmuted=e(this.removeOnVideoUnmuted,this),this.addOnVideoUnmuted=e(this.addOnVideoUnmuted,this),this.removeOnAudioUnmuted=e(this.removeOnAudioUnmuted,this),this.addOnAudioUnmuted=e(this.addOnAudioUnmuted,this),this.removeOnVideoMuted=e(this.removeOnVideoMuted,this),this.addOnVideoMuted=e(this.addOnVideoMuted,this),this.removeOnAudioMuted=e(this.removeOnAudioMuted,this),this.addOnAudioMuted=e(this.addOnAudioMuted,this),this.removeOnVideoEnded=e(this.removeOnVideoEnded,this),this.addOnVideoEnded=e(this.addOnVideoEnded,this),this.removeOnAudioEnded=e(this.removeOnAudioEnded,this),this.addOnAudioEnded=e(this.addOnAudioEnded,this),this.setVideoRenderProvider=e(this.setVideoRenderProvider,this),this.getVideoRenderProvider=e(this.getVideoRenderProvider,this),this.setAudioRenderProvider=e(this.setAudioRenderProvider,this),this.getAudioRenderProvider=e(this.getAudioRenderProvider,this),this.cleanupAudioContext=e(this.cleanupAudioContext,this),this.setBackingStream=e(this.setBackingStream,this),this.getBackingStream=e(this.getBackingStream,this),this.getVideoHeight=e(this.getVideoHeight,this),this.getVideoWidth=e(this.getVideoWidth,this),this.setPeerState=e(this.setPeerState,this),this.getPeerState=e(this.getPeerState,this),this.setPeerId=e(this.setPeerId,this),this.getPeerId=e(this.getPeerId,this),r.__super__.constructor.call(this),t&&(this._peerId=t),n&&(this._peerState=n)}return t(r,n),r.prototype._backingStream=null,r.prototype._audioRenderProvider=null,r.prototype._videoRenderProvider=null,r.prototype._peerId=null,r.prototype._peerState=null,r.prototype._audioContext=null,r.prototype._audioAnalyser=null,r.prototype._audioMicrophone=null,r.prototype._audioScriptNode=null,r.prototype.getPeerId=function(){return this._peerId},r.prototype.setPeerId=function(e){return this._peerId=e},r.prototype.getPeerState=function(){return this._peerState},r.prototype.setPeerState=function(e){return this._peerState=e},r.prototype.getVideoWidth=function(){return this._videoRenderProvider?this._videoRenderProvider.getVideoWidth():0},r.prototype.getVideoHeight=function(){return this._videoRenderProvider?this._videoRenderProvider.getVideoHeight():0},r.prototype.getBackingStream=function(){return this._backingStream},r.prototype.setBackingStream=function(e){return this._backingStream=e},r.prototype.cleanupAudioContext=function(){var e,t;try{if(this._audioContext)return this._audioScriptNode&&(this._audioScriptNode.disconnect(this._audioContext.destination),this._audioScriptNode=null),this._audioAnalyser&&(this._audioAnalyser.disconnect(this._audioScriptNode),this._audioAnalyser=null),this._microphone&&(this._microphone.disconnect(this._audioAnalyser),this._microphone=null),this._audioContext.close(),this._audioContext=null}catch(t){return e=t,fm.log.error("Could not destroy AudioContext.",e)}},r.prototype.getAudioRenderProvider=function(){return this._audioRenderProvider},r.prototype.setAudioRenderProvider=function(e){return this._audioRenderProvider=e},r.prototype.getVideoRenderProvider=function(){return this._videoRenderProvider},r.prototype.setVideoRenderProvider=function(e){return this._videoRenderProvider=e},r.prototype._onAudioEnded=null,r.prototype._onVideoEnded=null,r.prototype._onAudioMuted=null,r.prototype._onVideoMuted=null,r.prototype._onAudioUnmuted=null,r.prototype._onVideoUnmuted=null,r.prototype._onAudioLevel=null,r.prototype.addOnAudioEnded=function(e){return this._onAudioEnded=fm.delegate.combine(this._onAudioEnded,e)},r.prototype.removeOnAudioEnded=function(e){return this._onAudioEnded=fm.delegate.remove(this._onAudioEnded,e)},r.prototype.addOnVideoEnded=function(e){return this._onVideoEnded=fm.delegate.combine(this._onVideoEnded,e)},r.prototype.removeOnVideoEnded=function(e){return this._onVideoEnded=fm.delegate.remove(this._onVideoEnded,e)},r.prototype.addOnAudioMuted=function(e){return this._onAudioMuted=fm.delegate.combine(this._onAudioMuted,e)},r.prototype.removeOnAudioMuted=function(e){return this._onAudioMuted=fm.delegate.remove(this._onAudioMuted,e)},r.prototype.addOnVideoMuted=function(e){return this._onVideoMuted=fm.delegate.combine(this._onVideoMuted,e)},r.prototype.removeOnVideoMuted=function(e){return this._onVideoMuted=fm.delegate.remove(this._onVideoMuted,e)},r.prototype.addOnAudioUnmuted=function(e){return this._onAudioUnmuted=fm.delegate.combine(this._onAudioUnmuted,e)},r.prototype.removeOnAudioUnmuted=function(e){return this._onAudioUnmuted=fm.delegate.remove(this._onAudioUnmuted,e)},r.prototype.addOnVideoUnmuted=function(e){return this._onVideoUnmuted=fm.delegate.combine(this._onVideoUnmuted,e)},r.prototype.removeOnVideoUnmuted=function(e){return this._onVideoUnmuted=fm.delegate.remove(this._onVideoUnmuted,e)},r.prototype.addOnAudioLevel=function(e){var t,n,r,s,i,o;if(this._backingStream&&!this._audioContext)try{if(n=this._backingStream.getAudioTracks(),n&&n.length>0){"AudioContext"in window?this._audioContext=new AudioContext:"webkitAudioContext"in window&&(this._audioContext=new webkitAudioContext),null!==this._audioContext&&(this._audioMicrophone=this._audioContext.createMediaStreamSource(this._backingStream),this._audioAnalyser=this._audioContext.createAnalyser(),this._audioScriptNode=this._audioContext.createScriptProcessor(2048,1,1),this._audioMicrophone.connect(this._audioAnalyser),this._audioAnalyser.connect(this._audioScriptNode),this._audioScriptNode.connect(this._audioContext.destination),this._audioScriptNode.onaudioprocess=function(e){return function(t){var n,r,s,i,o,a,u;for(s=t.inputBuffer.getChannelData(0),u=0,r=i=0,a=s.length-1;a>=0?a>=i:i>=a;r=a>=0?++i:--i)u+=s[r]*s[r];
return o=Math.sqrt(u/s.length),n=new fm.icelink.webrtc.audioCaptureLevelArgs,n.setLevel(o),e.raiseAudioLevel(n)}}(this));for(i=0,o=n.length;o>i;i++)t=n[i],t.onended=function(e){return function(t){return e.cleanupAudioContext()}}(this)}}catch(s){r=s,fm.log.error("Could not initialize AudioContext.",r)}return this._onAudioLevel=fm.delegate.combine(this._onAudioLevel,e)},r.prototype.removeOnAudioLevel=function(e){return this._onAudioLevel=fm.delegate.remove(this._onAudioLevel,e)},r.prototype.toggleAudioMute=function(){return this.getAudioIsMuted()?this.unmuteAudio():this.muteAudio()},r.prototype.toggleVideoMute=function(){return this.getVideoIsMuted()?this.unmuteVideo():this.muteVideo()},r.prototype.muteAudio=function(){var e,t,n,r;if(this._backingStream){for(r=this._backingStream.getAudioTracks(),t=0,n=r.length;n>t;t++)e=r[t],e.enabled=!1;return this.raiseAudioMuted()}return this._audioRenderProvider?(this._audioRenderProvider.mute(),this.raiseAudioMuted()):void 0},r.prototype.muteVideo=function(){var e,t,n,r;if(this._backingStream){for(n=this._backingStream.getVideoTracks(),e=0,t=n.length;t>e;e++)r=n[e],r.enabled=!1;return this.raiseVideoMuted()}return this._videoRenderProvider?(this._videoRenderProvider.mute(),this.raiseVideoMuted()):void 0},r.prototype.unmuteAudio=function(){var e,t,n,r;if(this._backingStream){for(r=this._backingStream.getAudioTracks(),t=0,n=r.length;n>t;t++)e=r[t],e.enabled=!0;return this.raiseAudioUnmuted()}return this._audioRenderProvider?(this._audioRenderProvider.unmute(),this.raiseAudioUnmuted()):void 0},r.prototype.unmuteVideo=function(){var e,t,n,r;if(this._backingStream){for(n=this._backingStream.getVideoTracks(),e=0,t=n.length;t>e;e++)r=n[e],r.enabled=!0;return this.raiseVideoUnmuted()}return this._videoRenderProvider?(this._videoRenderProvider.unmute(),this.raiseVideoUnmuted()):void 0},r.prototype.getAudioVolume=function(){return this._audioRenderProvider?this._audioRenderProvider.getVolume():1},r.prototype.setAudioVolume=function(e){return this._audioRenderProvider&&this._audioRenderProvider.setVolume(e),this._videoRenderProvider?this._videoRenderProvider.setVolume(e):void 0},r.prototype.getAudioIsMuted=function(){var e,t,n,r;if(this._backingStream){for(r=this._backingStream.getAudioTracks(),t=0,n=r.length;n>t;t++)if(e=r[t],e.enabled)return!1;return!0}return this._audioRenderProvider?this._audioRenderProvider.getIsMuted():!0},r.prototype.getVideoIsMuted=function(){var e,t,n,r;if(this._backingStream){for(n=this._backingStream.getVideoTracks(),e=0,t=n.length;t>e;e++)if(r=n[e],r.enabled)return!1;return!0}return this._videoRenderProvider?this._videoRenderProvider.getIsMuted():!0},r.prototype.raiseAudioEnded=function(){var e;return e=this._onAudioEnded,e?e(this):void 0},r.prototype.raiseVideoEnded=function(){var e;return e=this._onVideoEnded,e?e(this):void 0},r.prototype.raiseAudioMuted=function(){var e;return e=this._onAudioMuted,e?e(this):void 0},r.prototype.raiseVideoMuted=function(){var e;return e=this._onVideoMuted,e?e(this):void 0},r.prototype.raiseAudioUnmuted=function(){var e;return e=this._onAudioUnmuted,e?e(this):void 0},r.prototype.raiseVideoUnmuted=function(){var e;return e=this._onVideoUnmuted,e?e(this):void 0},r.prototype.raiseAudioLevel=function(e){var t;return t=this._onAudioLevel,t?t(e):void 0},r}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.icelink.webrtc.localMediaStream=function(n){function r(){return this.setVideoParameters=e(this.setVideoParameters,this),this.raiseStartFailure=e(this.raiseStartFailure,this),this.raiseStartSuccess=e(this.raiseStartSuccess,this),this.doStart=e(this.doStart,this),this.getDeviceId=e(this.getDeviceId,this),this.getDeviceNames=e(this.getDeviceNames,this),this.start=e(this.start,this),this.stop=e(this.stop,this),this.initialize=e(this.initialize,this),this.setDefaultVideoSource=e(this.setDefaultVideoSource,this),this.getDefaultVideoSource=e(this.getDefaultVideoSource,this),this.setDefaultVideoPreviewScale=e(this.setDefaultVideoPreviewScale,this),this.getDefaultVideoPreviewScale=e(this.getDefaultVideoPreviewScale,this),this.setDefaultVideoScale=e(this.setDefaultVideoScale,this),this.getDefaultVideoScale=e(this.getDefaultVideoScale,this),this.setCreateVideoRenderProvider=e(this.setCreateVideoRenderProvider,this),this.getCreateVideoRenderProvider=e(this.getCreateVideoRenderProvider,this),this.setCreateAudioRenderProvider=e(this.setCreateAudioRenderProvider,this),this.getCreateAudioRenderProvider=e(this.getCreateAudioRenderProvider,this),this.setVideoCaptureProvider=e(this.setVideoCaptureProvider,this),this.getVideoCaptureProvider=e(this.getVideoCaptureProvider,this),this.setAudioCaptureProvider=e(this.setAudioCaptureProvider,this),this.getAudioCaptureProvider=e(this.getAudioCaptureProvider,this),this.getVideoDeviceNames=e(this.getVideoDeviceNames,this),this.getAudioDeviceNames=e(this.getAudioDeviceNames,this),this.raiseVideoResumed=e(this.raiseVideoResumed,this),this.raiseAudioResumed=e(this.raiseAudioResumed,this),this.raiseVideoPaused=e(this.raiseVideoPaused,this),this.raiseAudioPaused=e(this.raiseAudioPaused,this),this.getVideoIsPaused=e(this.getVideoIsPaused,this),this.getAudioIsPaused=e(this.getAudioIsPaused,this),this.resumeVideo=e(this.resumeVideo,this),this.resumeAudio=e(this.resumeAudio,this),this.pauseVideo=e(this.pauseVideo,this),this.pauseAudio=e(this.pauseAudio,this),this.toggleVideoPause=e(this.toggleVideoPause,this),this.toggleAudioPause=e(this.toggleAudioPause,this),this.removeOnVideoResumed=e(this.removeOnVideoResumed,this),this.addOnVideoResumed=e(this.addOnVideoResumed,this),this.removeOnAudioResumed=e(this.removeOnAudioResumed,this),this.addOnAudioResumed=e(this.addOnAudioResumed,this),this.removeOnVideoPaused=e(this.removeOnVideoPaused,this),this.addOnVideoPaused=e(this.addOnVideoPaused,this),this.removeOnAudioPaused=e(this.removeOnAudioPaused,this),this.addOnAudioPaused=e(this.addOnAudioPaused,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype._onAudioPaused=null,r.prototype._onAudioResumed=null,r.prototype._onVideoPaused=null,r.prototype._onVideoResumed=null,r.prototype._chromeScreenStreamId=null,r.prototype._chromeScreenEventListener=null,r.chromeExtensionInstalled=!1,r.chromeExtensionId="nidjnlpklmpflfmfflalpddmadlgjckn",r.chromeExtensionUrl="https://chrome.google.com/webstore/detail/nidjnlpklmpflfmfflalpddmadlgjckn",r.chromeExtensionRequiresUserGesture=!1,window.navigator&&window.navigator.webkitGetUserMedia&&(window.addEventListener("message",function(e){var t;return e.origin===window.location.origin&&(t=e.data,t.namespace&&"fm.icelink.webrtc"===t.namespace&&"active"===t.type)?r.chromeExtensionInstalled=!0:void 0}),window.postMessage({namespace:"fm.icelink.webrtc",type:"testActive"},"*")),fm.icelink.webrtc.setChromeExtension=function(e){var t,n,r,s,i,o,a;if(e.extensionId){for(fm.icelink.webrtc.localMediaStream.chromeExtensionId=e.extensionId,fm.icelink.webrtc.localMediaStream.chromeExtensionUrl="https://chrome.google.com/webstore/detail/"+e.extensionId,n=document.getElementsByTagName("head")[0],o=!1,a=n.childNodes,r=0,s=a.length;s>r;r++)if(t=a[r],"LINK"===t.tagName&&t.href===fm.icelink.webrtc.localMediaStream.chromeExtensionUrl){o=!0;break}if(!o)return i=document.createElement("link"),i.rel="chrome-webstore-item",i.href=fm.icelink.webrtc.localMediaStream.chromeExtensionUrl,n.appendChild(i)}},r.prototype.addOnAudioPaused=function(e){return this._onAudioPaused=fm.delegate.combine(this._onAudioPaused,e)},r.prototype.removeOnAudioPaused=function(e){return this._onAudioPaused=fm.delegate.remove(this._onAudioPaused,e)},r.prototype.addOnVideoPaused=function(e){return this._onVideoPaused=fm.delegate.combine(this._onVideoPaused,e)},r.prototype.removeOnVideoPaused=function(e){return this._onVideoPaused=fm.delegate.remove(this._onVideoPaused,e)},r.prototype.addOnAudioResumed=function(e){return this._onAudioResumed=fm.delegate.combine(this._onAudioResumed,e)},r.prototype.removeOnAudioResumed=function(e){return this._onAudioResumed=fm.delegate.remove(this._onAudioResumed,e)},r.prototype.addOnVideoResumed=function(e){return this._onVideoResumed=fm.delegate.combine(this._onVideoResumed,e)},r.prototype.removeOnVideoResumed=function(e){return this._onVideoResumed=fm.delegate.remove(this._onVideoResumed,e)},r.prototype.toggleAudioPause=function(){return this.getAudioIsPaused()?this.resumeAudio():this.pauseAudio()},r.prototype.toggleVideoPause=function(){return this.getVideoIsPaused()?this.resumeVideo():this.pauseVideo()},r.prototype.pauseAudio=function(){return this.muteAudio(),this.raiseAudioPaused()},r.prototype.pauseVideo=function(){return this.muteVideo(),this.raiseVideoPaused()},r.prototype.resumeAudio=function(){return this.unmuteAudio(),this.raiseAudioResumed()},r.prototype.resumeVideo=function(){return this.unmuteVideo(),this.raiseVideoResumed()},r.prototype.getAudioIsPaused=function(){return this.getAudioIsMuted()},r.prototype.getVideoIsPaused=function(){return this.getVideoIsMuted()},r.prototype.raiseAudioPaused=function(){var e;return e=this._onAudioPaused,e?e(this):void 0},r.prototype.raiseVideoPaused=function(){var e;return e=this._onVideoPaused,e?e(this):void 0},r.prototype.raiseAudioResumed=function(){var e;return e=this._onAudioResumed,e?e(this):void 0},r.prototype.raiseVideoResumed=function(){var e;return e=this._onVideoResumed,e?e(this):void 0},r.prototype._audioCaptureProvider=null,r.prototype._videoCaptureProvider=null,r.prototype._createAudioRenderProvider=null,r.prototype._createVideoRenderProvider=null,r.prototype._initialized=!1,r.prototype.getAudioDeviceNames=function(){var e;return e=this._audioCaptureProvider,e?e.getDeviceNames():[]},r.prototype.getVideoDeviceNames=function(){var e;return e=this._videoCaptureProvider,e?e.getDeviceNames():[]},r.prototype.getAudioCaptureProvider=function(){return this._audioCaptureProvider},r.prototype.setAudioCaptureProvider=function(e){return this._audioCaptureProvider=e},r.prototype.getVideoCaptureProvider=function(){return this._videoCaptureProvider},r.prototype.setVideoCaptureProvider=function(e){return this._videoCaptureProvider=e},r.prototype.getCreateAudioRenderProvider=function(){return this._createAudioRenderProvider},r.prototype.setCreateAudioRenderProvider=function(e){return this._createAudioRenderProvider=e},r.prototype.getCreateVideoRenderProvider=function(){return this._createVideoRenderProvider},r.prototype.setCreateVideoRenderProvider=function(e){return this._createVideoRenderProvider=e},r.prototype._defaultVideoScale=null,r.prototype._defaultVideoPreviewScale=null,r.prototype.getDefaultVideoScale=function(){return this._defaultVideoScale},r.prototype.setDefaultVideoScale=function(e){return this._defaultVideoScale=e},r.prototype.getDefaultVideoPreviewScale=function(){return this._defaultVideoPreviewScale},r.prototype.setDefaultVideoPreviewScale=function(e){return this._defaultVideoPreviewScale=e},r.prototype.getDefaultVideoSource=function(){return this._defaultVideoSource},r.prototype.setDefaultVideoSource=function(e){return this._defaultVideoSource=e},r.prototype.initialize=function(e){return this._initialized=!0,e?e(this):void 0},r.prototype.stop=function(){var e,t,n,r,s,i,o;if(!this._initialized)throw new Error("Local media stream must be initialized using `initialize` before calling `stop`.");if(this._chromeScreenEventListener&&(window.removeEventListener("message",this._chromeScreenEventListener),this._chromeScreenEventListener=null),this._chromeScreenStreamId&&window.postMessage({namespace:"fm.icelink.webrtc",type:"cancelChooseDesktopMedia"},"*"),s=this.getBackingStream())try{for(i=s.getTracks(),n=0,r=i.length;r>n;n++)o=i[n],o.stop()}catch(t){e=t,s.stop()}return this.cleanupAudioContext()},r.prototype.start=function(e){if(!this._initialized)throw new Error("Local media stream must be initialized using `initialize` before calling `start`.");return e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Screen&&navigator.webkitGetUserMedia?window.setTimeout(function(t){return function(){var n,r,s;if(fm.icelink.webrtc.localMediaStream.chromeExtensionInstalled)return t._chromeScreenEventListener=function(n){var r;if(n.origin===window.location.origin&&(r=n.data,r.namespace&&"fm.icelink.webrtc"===r.namespace)){if("chooseDesktopMediaSuccess"===r.type)return t._chromeScreenStreamId=r.streamId,t.doStart(e);if("chooseDesktopMediaFailure"===r.type)return r.audioUnavailable?t.raiseStartFailure(e,new Error("Chrome 50+ is required to allow audio with screen-sharing. Please update your browser and try again.")):t.raiseStartFailure(e,new Error("Request for screen sharing access was denied."))}},window.addEventListener("message",t._chromeScreenEventListener),window.postMessage({namespace:"fm.icelink.webrtc",type:"chooseDesktopMedia",audio:null!=(s=e.getAudio())?s:{"true":!1}},"*");if(!(window.chrome&&chrome.webstore&&chrome.webstore.install))return t.chromeExtensionRequiresUserGesture=!1,t.raiseStartFailure(e,new Error("Chrome extension is not installed."));try{return chrome.webstore.install(fm.icelink.webrtc.localMediaStream.chromeExtensionUrl,function(){return location.reload()},function(n){return t.chromeExtensionRequiresUserGesture=!1,t.raiseStartFailure(e,new Error("Chrome extension is not installed and inline installation failed. "+n))})}catch(r){return n=r,t.chromeExtensionRequiresUserGesture=!0,t.raiseStartFailure(e,new Error("Chrome extension is not installed and inline installation could not be started. "+n))}}}(this),1):this.doStart(e)},r.prototype.getDeviceNames=function(e,t){var n,r,s;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{return navigator.mediaDevices.enumerateDevices().then(function(n){return function(n){var r,s,i,o,a;for(s=[],o=-1,i=0,a=n.length;a>i;i++)r=n[i],(r.kind===e||r.kind===e+"input")&&(o++,r.label?s.push(r.label):"audio"===e?s.push("Audio Input "+o):"video"===e&&s.push("Video Input "+o));return t(s)}}(this))["catch"](function(e){return function(){return t([])}}(this))}catch(n){return s=n,t([])}else{if(!MediaStreamTrack||!MediaStreamTrack.getSources)return t([]);try{return MediaStreamTrack.getSources(function(n){return function(n){var r,s,i,o,a;for(r=[],i=-1,s=0,o=n.length;o>s;s++)a=n[s],(a.kind===e||a.kind===e+"input")&&(i++,a.label?r.push(a.label):"audio"===e?r.push("Audio Input "+i):"video"===e&&r.push("Video Input "+i));return t(r)}}(this))}catch(r){return s=r,t([])}}},r.prototype.getDeviceId=function(e,t,n){var r,s,i;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{return navigator.mediaDevices.enumerateDevices().then(function(r){return function(r){var s,i,o,a;for(o=-1,i=0,a=r.length;a>i;i++)if(s=r[i],(s.kind===t||s.kind===t+"input")&&(o++,o===e))return void n(s.deviceId);return n(null)}}(this))["catch"](function(e){return function(){return n(null)}}(this))}catch(r){return i=r,n(null)}else{if(!MediaStreamTrack||!MediaStreamTrack.getSources)return n(null);try{return MediaStreamTrack.getSources(function(r){return function(r){var s,i,o,a;for(i=-1,s=0,o=r.length;o>s;s++)if(a=r[s],(a.kind===t||a.kind===t+"input")&&(i++,i===e))return void n(a.id);return n(null)}}(this))}catch(s){return i=s,n(null)}}},r.prototype.doStart=function(e,t,n,r){var s,i,o,a,u,l,c,h,p,g,m,f,d,y,_,b,v,w,C,R,S;if(1===arguments.length)try{return e.getAudio()&&null!==e.getAudioDeviceNumber()?this.getDeviceId(e.getAudioDeviceNumber()||0,"audio",function(t){return function(n){return t.doStart(e,n)}}(this)):this.doStart(e,null)}catch(o){return l=o,this.doStart(e,null)}else if(2===arguments.length)try{return e.getVideo()&&null!==e.getVideoDeviceNumber()&&e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Camera?this.getDeviceId(e.getVideoDeviceNumber()||0,"video",function(n){return function(r){return n.doStart(e,t,r)}}(this)):this.doStart(e,t,null)}catch(a){return l=a,this.doStart(e,t,null)}else if(3===arguments.length)try{return r=navigator.webkitGetUserMedia||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia,this.doStart(e,t,n,r)}catch(u){return l=u,this.doStart(e,t,n,!r)}else if(4===arguments.length){if(h=function(t){return function(n){var r,s,i,o,a,u,l,c,h,p,g,m;if(t.setBackingStream(n),r=t.getAudioCaptureProvider(),h=t.getVideoCaptureProvider(),!n)return t.raiseStartSuccess(e,n);if(s=!1,p=!1,o=n.getAudioTracks(),m=n.getVideoTracks(),o)for(a=0,l=o.length;l>a;a++)i=o[a],i.onended=function(){return t.raiseAudioEnded(t)};if(m)for(u=0,c=m.length;c>u;u++)g=m[u],g.onended=function(){return t.raiseVideoEnded(t)};return r?t.getDeviceNames("audio",function(i){return r.setLocalStream(t,i),s=!0,p?t.raiseStartSuccess(e,n):void 0}):s=!0,h?t.getDeviceNames("video",function(r){return h.setLocalStream(t,r,e.getDefaultVideoSource()!==fm.icelink.webrtc.videoSource.Screen),p=!0,s?t.raiseStartSuccess(e,n):void 0}):p=!0,s&&p?t.raiseStartSuccess(e,n):void 0}}(this),c=function(t){return function(n){return("string"==typeof n||n instanceof String)&&(n=new Error(n)),e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Screen?"https:"===document.location.protocol?fm.log.error("Local screen access denied."):fm.log.error("Local screen access denied. (The page may need to be loaded using HTTPS.)"):"file:"===document.location.protocol?fm.log.error("Local media access denied. (The media source may be unavailable/locked or you may need to access this page through a webserver instead of the file system.)"):fm.log.error("Local media access denied. (The media source may be unavailable/locked.)"),t.raiseStartFailure(e,n)}}(this),s=!1,i=e.getAudio())if(r){if(s={optional:[],mandatory:{}},e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Screen&&this._chromeScreenStreamId&&(s.mandatory.chromeMediaSource="desktop",s.mandatory.chromeMediaSourceId=this._chromeScreenStreamId),t&&s.optional.push({sourceId:t}),fm.util.isPlainObject(i)){if(i.mandatory){_=i.mandatory;for(m in _)C=_[m],s.mandatory[m]=C}if(i.optional)for(b=i.optional,p=0,f=b.length;f>p;p++)y=b[p],s.optional.push(y)}}else if(s={echoCancellation:!0},e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Screen&&this._chromeScreenStreamId&&(s.chromeMediaSource="desktop",s.chromeMediaSourceId=this._chromeScreenStreamId),t&&(s.deviceId={exact:t}),fm.util.isPlainObject(i))for(m in i)C=i[m],"mandatory"!==m&&"optional"!==m&&(s[m]=C);if(R=!1,S=e.getVideo())if(r){if(R={optional:[],mandatory:{maxWidth:e.getVideoWidth(),maxHeight:e.getVideoHeight(),maxFrameRate:e.getVideoFrameRate()}},e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Screen&&(this._chromeScreenStreamId?(R.mandatory.chromeMediaSource="desktop",R.mandatory.chromeMediaSourceId=this._chromeScreenStreamId):R.mandatory.mediaSource="window"),n&&R.optional.push({sourceId:n}),fm.util.isPlainObject(S)){if(S.mandatory){v=S.mandatory;for(m in v)C=v[m],R.mandatory[m]=C}if(S.optional)for(w=S.optional,g=0,d=w.length;d>g;g++)y=w[g],R.optional.push(y)}}else if(R={width:e.getVideoWidth(),height:e.getVideoHeight(),frameRate:e.getVideoFrameRate(),aspectRatio:e.getVideoWidth()/e.getVideoHeight()},e.getDefaultVideoSource()===fm.icelink.webrtc.videoSource.Screen&&(this._chromeScreenStreamId?(R.chromeMediaSource="desktop",R.chromeMediaSourceId=this._chromeScreenStreamId):R.mediaSource="window"),n&&(R.deviceId={exact:n}),fm.util.isPlainObject(S))for(m in S)C=S[m],"mandatory"!==m&&"optional"!==m&&(R[m]=C);return s&&R?navigator.fmGetUserMedia({audio:s,video:R},h,c):s?navigator.fmGetUserMedia({audio:s},h,c):R?navigator.fmGetUserMedia({video:R},h,c):h(null)}},r.prototype.raiseStartSuccess=function(e,t){var n;return n=e.getOnSuccess(),n?n(new fm.icelink.webrtc.localStartSuccessArgs({audio:e.getAudio(),audioDeviceNumber:e.getAudioDeviceNumber(),video:e.getVideo(),videoDeviceNumber:e.getVideoDeviceNumber(),videoWidth:e.getVideoWidth(),videoHeight:e.getVideoHeight(),videoFrameRate:e.getVideoFrameRate(),localStream:this})):void 0},r.prototype.raiseStartFailure=function(e,t){var n;return this._chromeScreenEventListener&&(window.removeEventListener("message",this._chromeScreenEventListener),this._chromeScreenEventListener=null),n=e.getOnFailure(),n?n(new fm.icelink.webrtc.localStartFailureArgs({audio:e.getAudio(),audioDeviceNumber:e.getAudioDeviceNumber(),video:e.getVideo(),videoDeviceNumber:e.getVideoDeviceNumber(),videoWidth:e.getVideoWidth(),videoHeight:e.getVideoHeight(),videoFrameRate:e.getVideoFrameRate(),localStream:this,exception:t})):void 0},r.prototype.setVideoParameters=function(e,t,n){var r,s,i,o,a,u,l;if(e||(e=0),t||(t=0),n||(n=0),o=this.getBackingStream()){for(a=o.getVideoTracks(),u=[],s=0,i=a.length;i>s;s++)l=a[s],l.applyConstraints?(r={},e&&(r.width=e),t&&(r.height=t),n&&(r.frameRate=n),u.push(l.applyConstraints(r))):u.push(void 0);return u}},r}(fm.icelink.webrtc.mediaStream);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function r(){this.constructor=e}for(var s in t)n.call(t,s)&&(e[s]=t[s]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;return fm.icelink.webrtc.layoutManager=function(n){function r(t,n){this.doLayout=e(this.doLayout,this),this.runOnUIThread=e(this.runOnUIThread,this),this.removeFromContainer=e(this.removeFromContainer,this),this.addToContainer=e(this.addToContainer,this),this.getContainer=e(this.getContainer,this);var s,i,o,a,u,l,c;for(r.__super__.constructor.call(this,n),this._remoteVideosTable={},this._container=t,i=this._container.getElementsByTagName("div"),o=[],a=0,l=i.length;l>a;a++)s=i[a],o.push(s);for(u=0,c=o.length;c>u;u++)s=o[u],"true"===s.getAttribute("data-fm-icelink-webrtc-inner-container")&&this._container.removeChild(s);this._innerContainer=document.createElement("div"),this._innerContainer.style.position="relative",this._innerContainer.style.width="100%",this._innerContainer.style.height="100%",this._innerContainer.setAttribute("data-fm-icelink-webrtc-inner-container","true"),this._container.appendChild(this._innerContainer),this._resizeInterval=window.setInterval(function(e){return function(){var t,n;if(e._container.parentNode){if(e._parentMissing=0,n=e._innerContainer.offsetWidth,t=e._innerContainer.offsetHeight,n!==e._lastWidth||t!==e._lastHeight)return e.doLayout(),e._lastWidth=n,e._lastHeight=t}else if(e._parentMissing=e._parentMissing+1,e._parentMissing>e._parentMissingMax)return window.clearInterval(e._resizeInterval)}}(this),250)}return t(r,n),r.prototype._container=null,r.prototype._innerContainer=null,r.prototype._resizeInterval=null,r.prototype._parentMissing=0,r.prototype._parentMissingMax=16,r.prototype._lastWidth=0,r.prototype._lastHeight=0,r.prototype.getContainer=function(){return this._innerContainer},r.prototype.addToContainer=function(e){return this._innerContainer.appendChild(e)},r.prototype.removeFromContainer=function(e){return this._innerContainer.removeChild(e)},r.prototype.runOnUIThread=function(e,t,n){return e(t,n)},r.prototype.doLayout=function(){var e,t,n,r,s,i,o,a,u,l,c;for(i=this.getLocalVideoControl(),l=this.getRemoteVideoControls(),n=this.getLayout(this._innerContainer.offsetWidth,this._innerContainer.offsetHeight,l.length),null!==i&&(s=n.getLocalFrame(),i.style.position="absolute",i.style.left=s.getX()+"px",i.style.top=s.getY()+"px",i.style.width=s.getWidth()+"px",i.style.height=s.getHeight()+"px",this.getMode()===fm.icelink.webrtc.layoutMode.FloatLocal?i.style.zIndex=l.length:this.getMode()===fm.icelink.webrtc.layoutMode.FloatRemote&&(i.style.zIndex=0)),a=n.getRemoteFrames(),c=[],e=t=0,r=a.length;r>t;e=++t)o=a[e],u=l[e],u.style.position="absolute",u.style.left=o.getX()+"px",u.style.top=o.getY()+"px",u.style.width=o.getWidth()+"px",u.style.height=o.getHeight()+"px",this.getMode()===fm.icelink.webrtc.layoutMode.FloatLocal?c.push(u.style.zIndex=e):this.getMode()===fm.icelink.webrtc.layoutMode.FloatRemote?c.push(u.style.zIndex=e+1):c.push(void 0);return c},r}(fm.icelink.webrtc.baseLayoutManager),function(){return fm.icelink.webrtc.setApplet=function(e){return function(e){if(e=fm.util.extend({prompt:!0,promptMessage:"WebRTC requires the Java plug-in in this web browser. Would you like to install it?",promptRedirect:"https://java.com/en/download/testjava.jsp",alert:!0,alertMessage:"WebRTC requires the Java plug-in in this web browser, but the Java plug-in could not be loaded.",mobileMessage:"WebRTC is incompatible with this mobile browser. Please contact the browser vendor to request WebRTC support."},e||{}),!e.path)throw new Error("path cannot be null.");return fm.icelink.webrtc.appletArgs=e}}(this),fm.icelink.webrtc._isAppletSupported=function(e){return function(){return fm.icelink.webrtc.appletArgs&&fm.util.hasJava()}}(this),fm.icelink.webrtc._showAppletAlert=function(e){return function(){var e;if(e=fm.icelink.webrtc.appletArgs,fm.util.isMobile()){if(e.alert)return alert(e.mobileMessage)}else if(e.prompt){if(confirm(e.promptMessage))return window.location=e.promptRedirect}else if(e.alert)return alert(e.alertMessage)}}(this),fm.icelink.webrtc._appletCache={},fm.icelink.webrtc._initializeApplet=function(e){return function(e){if(!fm.icelink.webrtc.appletArgs)throw new Error("fm.icelink.webrtc.setApplet must be called first to set applet configuration.");return e=fm.util.extend({callback:function(){}},e||{}),fm.icelink.webrtc.appletArgs.initializer&&fm.icelink.webrtc.appletArgs.initializer!==e.className?fm.icelink.webrtc.getApplet({id:"static",className:fm.icelink.webrtc.appletArgs.initializer,callback:function(){return e.callback()}}):e.callback()}}(this),fm.icelink.webrtc._appletLoaded=function(e){return function(e){var t,n,r,s,i,o;if(t=fm.icelink.webrtc._appletCache[e]){for(t.loaded=!0,i=t.callQueue,o=[],r=0,s=i.length;s>r;r++)n=i[r],o.push(fm.icelink.webrtc._callApplet(n,e));return o}}}(this),fm.icelink.webrtc._callApplet=function(e){return function(e,t){var n,r;return r=fm.icelink.webrtc._appletCache[t],r&&r.loaded?(n=r.applet,e.onload&&e.onload(n),e.callback(n)):r.callQueue.push(e)}}(this),fm.icelink.webrtc.getApplet=function(e){return function(e){var t,n,r,s;if(!fm.icelink.webrtc.appletArgs)throw new Error("fm.icelink.webrtc.setApplet must be called first to set applet configuration.");return e=fm.util.extend({id:fm.guid.newGuid().toString(),className:"Unknown",container:document.body,callback:function(){}},e||{}),e.style=fm.util.extend({width:0,height:0,position:"absolute",left:0,top:0},e.style||{}),n=e.className+"-"+e.id,s=e.container.ownerDocument,t=s.getElementById(n),t?(delete e.onload,fm.icelink.webrtc._callApplet(e,n)):(r={loaded:!1,callQueue:[]},fm.icelink.webrtc._appletCache[n]=r,fm.icelink.webrtc._initializeApplet({className:e.className,callback:function(){var i,o,a,u;t=s.createElement("applet"),t.id=n,t.name=fm.icelink.webrtc.appletArgs.name||"JavaScript Applet",t.setAttribute("archive",fm.icelink.webrtc.appletArgs.path),t.setAttribute("code",e.className+".class"),t.setAttribute("mayscript","mayscript"),t.setAttribute("java_arguments","-Xms128m -Xmx512m"),t.setAttribute("separate_jvm","true"),a=e.style;for(i in a)u=a[i],e.style.hasOwnProperty(i)&&(t.style[i]=u);return o=s.createElement("param"),o.setAttribute("name","appletId"),o.setAttribute("value",n),r.applet=t,t.appendChild(o),e.container.appendChild(t),e.beforeunload&&fm.util.observe(window,"beforeunload",function(){e.beforeunload(t)}),fm.icelink.webrtc._callApplet(e,n)}}))}}(this),fm.icelink.webrtc.getCoreApplet=function(e){return fm.icelink.webrtc.getApplet(fm.util.extend({id:"static",className:"fm.icelink.webrtc.applet.CoreApplet",onload:function(e){return function(e){return e.attachLog(fm.log.getProvider().getLevel(),{callback:function(e){return window.setTimeout(function(){return fm.log.writeLine(e)},1)}})}}(this),beforeunload:function(e){return function(e){return e.setIsUnloading(!0)}}(this)},e||{}))},fm.icelink.webrtc.getVideoContainerApplet=function(e){return fm.icelink.webrtc.getApplet(fm.util.extend({className:"fm.icelink.webrtc.applet.VideoContainerApplet",onload:function(e){return function(e){return e.attachLog(fm.log.getProvider().getLevel(),{callback:function(e){return window.setTimeout(function(){return fm.log.writeLine(e)},1)}})}}(this),beforeunload:function(e){return function(e){return e.setIsUnloading(!0)}}(this)},e||{}))}}(),function(){return fm.icelink.webrtc.setActiveX=function(e){return function(e){if(!e.path_x86&&!e.path_x64&&!e.path)throw new Error("path_x86, path_x64, and/or path must be specified.");return e.path_x86||e.path_x64||(e.path_x86=e.path,e.path_x64=e.path),e.path_x86||(e.path_x86=e.path_x64),e.path_x64||(e.path_x64=e.path_x86),fm.icelink.webrtc.activexArgs=e}}(this),fm.icelink.webrtc._isActiveXSupported=function(e){return function(){return fm.icelink.webrtc.activexArgs&&fm.util.hasActiveX()}}(this),fm.icelink.webrtc._initializeActiveX=function(e){return function(e){if(!fm.icelink.webrtc.activexArgs)throw new Error("fm.icelink.webrtc.setActiveX must be called first to set ActiveX configuration.");return e=fm.util.extend({callback:function(){}},e||{}),fm.icelink.webrtc.activexArgs.initializer&&fm.icelink.webrtc.activexArgs.initializer!==e.classId?fm.icelink.webrtc.getActiveX({id:"static",classId:fm.icelink.webrtc.activexArgs.initializer,callback:function(){return e.callback()}}):e.callback()}}(this),fm.icelink.webrtc._callControl=function(e){return function(e,t,n){var r;r=!1;try{r=t.getControlId}catch(s){}return r?(n&&n(t),e.callback(t)):setTimeout(function(){return fm.icelink.webrtc._callControl(e,t,n)},10)}}(this),fm.icelink.webrtc.getActiveX=function(e){return function(e){var t,n,r;if(!fm.icelink.webrtc.activexArgs)throw new Error("fm.icelink.webrtc.setActiveX must be called first to set ActiveX configuration.");return e=fm.util.extend({id:fm.guid.newGuid().toString(),classId:"00000000-0000-0000-0000-000000000000",container:document.body,callback:function(){}},e||{}),e.style=fm.util.extend({width:0,height:0,position:"absolute",left:0,top:0},e.style||{}),t=e.className?e.className+"-"+e.classId+"-"+e.id:e.classId+"-"+e.id,r=e.container.ownerDocument,n=r.getElementById(t),n?fm.icelink.webrtc._callControl(e,n):fm.icelink.webrtc._initializeActiveX({classId:e.classId,callback:function(){var s,i,o,a;s="x86"===window.navigator.cpuClass?fm.icelink.webrtc.activexArgs.path_x86:fm.icelink.webrtc.activexArgs.path_x64,n=r.createElement("object"),n.id=t,n.name=fm.icelink.webrtc.activexArgs.name||"JavaScript ActiveX Control",n.setAttribute("codebase",s),n.setAttribute("classid","CLSID:"+e.classId),o=e.style;for(i in o)a=o[i],e.style.hasOwnProperty(i)&&(n.style[i]=a);return e.container.appendChild(n),e.beforeunload&&fm.util.observe(window,"beforeunload",function(){e.beforeunload(n)}),fm.icelink.webrtc._callControl(e,n,e.onload)}})}}(this),fm.icelink.webrtc.getCoreActiveX=function(e){var t,n;return n="56BFE263-0146-7598-C6C9-1AF12001AD62",t="66B19AD2-D959-F958-ECC3-3E40D345A753",fm.icelink.webrtc.getActiveX(fm.util.extend({id:"static",className:"FM.IceLink.WebRTC.ActiveX.CoreControl",classId:"x86"===window.navigator.cpuClass?n:t,onload:function(e){return function(e){var t,n;try{return e.attachLog(fm.log.getProvider().getLevel(),{callback:function(e){return window.setTimeout(function(){return fm.log.writeLine(e)},1)}})}catch(n){t=n}}}(this),beforeunload:function(e){return function(e){var t,n;try{return e.setIsUnloading(!0)}catch(n){t=n}}}(this)},e||{}))},fm.icelink.webrtc.getVideoContainerActiveX=function(e){var t,n;return n="95D082E9-A24D-52C8-9757-890A83D9BDE2",t="3A0CE26C-3EAE-647A-2365-31C247B8EAF2",fm.icelink.webrtc.getActiveX(fm.util.extend({className:"FM.IceLink.WebRTC.ActiveX.VideoContainerControl",classId:"x86"===window.navigator.cpuClass?n:t},e||{}))}}(),function(){var e,t,n,r,s,i,o,a,u,l,c,h,p,g,m,f,d,y,_,b;window.navigator&&(navigator.fmGetUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.fmGetUserMedia=function(e){
return function(e,t,n){return navigator.mediaDevices.getUserMedia(e).then(t)["catch"](n)}}(this))),fm.icelink.webrtc._forceNative=!1,fm.icelink.webrtc._forceActiveX=!1,fm.icelink.webrtc._forceApplet=!1,fm.icelink.webrtc.setForceNative=function(e){return function(e){return fm.icelink.webrtc._forceNative=e}}(this),fm.icelink.webrtc.getForceNative=function(e){return function(){return fm.icelink.webrtc._forceNative}}(this),fm.icelink.webrtc.setForceActiveX=function(e){return function(e){return fm.icelink.webrtc._forceActiveX=e}}(this),fm.icelink.webrtc.getForceActiveX=function(e){return function(){return fm.icelink.webrtc._forceActiveX}}(this),fm.icelink.webrtc.setForceApplet=function(e){return function(e){return fm.icelink.webrtc._forceApplet=e}}(this),fm.icelink.webrtc.getForceApplet=function(e){return function(){return fm.icelink.webrtc._forceApplet}}(this),fm.icelink.webrtc._disableNative=!1,fm.icelink.webrtc._disableActiveX=!1,fm.icelink.webrtc._disableApplet=!1,fm.icelink.webrtc.setDisableNative=function(e){return function(e){return fm.icelink.webrtc._disableNative=e}}(this),fm.icelink.webrtc.getDisableNative=function(e){return function(){return fm.icelink.webrtc._disableNative}}(this),fm.icelink.webrtc.setDisableActiveX=function(e){return function(e){return fm.icelink.webrtc._disableActiveX=e}}(this),fm.icelink.webrtc.getDisableActiveX=function(e){return function(){return fm.icelink.webrtc._disableActiveX}}(this),fm.icelink.webrtc.setDisableApplet=function(e){return function(e){return fm.icelink.webrtc._disableApplet=e}}(this),fm.icelink.webrtc.getDisableApplet=function(e){return function(){return fm.icelink.webrtc._disableApplet}}(this),fm.icelink.webrtc._supportedModes=null,fm.icelink.webrtc.getSupportedModes=function(e){return function(){var e;return fm.icelink.webrtc._supportedModes||(e={"native":fm.icelink.webrtc._forceNative,activex:fm.icelink.webrtc._forceActiveX,applet:fm.icelink.webrtc._forceApplet},e["native"]||e.activex||e.applet||(!fm.icelink.webrtc._disableNative&&("undefined"!=typeof module&&module.exports||window.navigator.fmGetUserMedia)&&(e["native"]=!0),!fm.icelink.webrtc._disableActiveX&&fm.icelink.webrtc._isActiveXSupported()?e.activex=!0:!fm.icelink.webrtc._disableApplet&&fm.icelink.webrtc._isAppletSupported()?e.applet=!0:e["native"]||fm.icelink.webrtc._showAppletAlert()),fm.icelink.webrtc._supportedModes=e),fm.icelink.webrtc._supportedModes}}(this),fm.icelink.webrtc.getMode=function(e){return function(){var e;return e=fm.icelink.webrtc.getSupportedModes(),e["native"]?"native":e.activex?"activex":e.applet?"applet":null}}(this),fm.icelink.webrtc.willUseNative=function(e){return function(){return"native"===fm.icelink.webrtc.getMode()}}(this),fm.icelink.webrtc.willUseActiveX=function(e){return function(){return"activex"===fm.icelink.webrtc.getMode()}}(this),fm.icelink.webrtc.willUseApplet=function(e){return function(){return"applet"===fm.icelink.webrtc.getMode()}}(this),fm.icelink.webrtc.willUsePlugin=function(e){return function(){return fm.icelink.webrtc.willUseActiveX()||fm.icelink.webrtc.willUseApplet()}}(this),fm.icelink.webrtc.getCoreControl=function(e){return function(e){return fm.icelink.webrtc.willUseActiveX()?fm.icelink.webrtc.getCoreActiveX(e):fm.icelink.webrtc.getCoreApplet(e)}}(this),fm.icelink.webrtc.getVideoContainerControl=function(e){return function(e){return fm.icelink.webrtc.willUseActiveX()?fm.icelink.webrtc.getVideoContainerActiveX(e):fm.icelink.webrtc.getVideoContainerApplet(e)}}(this),fm.icelink.webrtc.getPluginHostName=function(e){return function(){return fm.icelink.webrtc.willUseActiveX()?"ActiveX host":"JVM"}}(this),fm.icelink.webrtc.pluginLinks={},a=fm.icelink.link.prototype,o={};for(c in a)b=a[c],"constructor"!==c&&(o[c]=a[c],"initialize"===c?fm.icelink.link.prototype[c]=function(e){return function(t,n,r,s,i,a){var u;return u=this,fm.icelink.webrtc.willUsePlugin()?fm.icelink.webrtc.getCoreControl({callback:function(l){var c,h,p,g;if(u.jca=l,"undefined"==typeof u.jca.l_create)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link.create).");for(u.pid=u.jca.l_create(),fm.icelink.webrtc.pluginLinks[u.pid]=u,g=[],c=0,h=i.length;h>c;c++)p=i[c],g.push(p.pid);if("undefined"==typeof u.jca.l_initialize)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return u.jca.l_initialize(u.pid,fm.serializer.serializeStringArray(t),fm.serializer.serializeStringArray(n),fm.serializer.serializeStringArray(r),fm.serializer.serializeStringArray(s),fm.serializer.serializeStringArray(g),{onInit:function(e){var t;return t=fm.icelink.linkInitArgs.fromJson(e),u.raiseInit(t.getInitiator())},onCandidate:function(e){var t;return t=fm.icelink.linkCandidateArgs.fromJson(e),u.raiseCandidate(t.getCandidate())},onOfferAnswer:function(e){var t;return t=fm.icelink.linkOfferAnswerArgs.fromJson(e),u.raiseOfferAnswer(t.getOfferAnswer())},onUp:function(e){var t,n;return t=fm.icelink.linkUpArgs.fromJson(e),n=new fm.icelink.webrtc.mediaStream,n.linkPid=u.pid,u.setRemoteStreamInternal(n),u.raiseUp()},onAudioLevel:function(e){var t,n;return t=new fm.icelink.webrtc.audioCaptureLevelArgs,t.setLevel(e),n=u.getRemoteStreamInternal(),n?u.getRemoteStreamInternal().raiseAudioLevel(t):void 0},onDown:function(e){var t;return t=fm.icelink.linkDownArgs.fromJson(e),u.raiseDown(t.getException()),delete fm.icelink.webrtc.pluginLinks[u.pid]},onComplete:function(){return o[e].call(u,t,n,r,s,i,a)}})}}):o[e].call(u,t,n,r,s,i,a)}}(c):"createOffer"===c||"createAnswer"===c?fm.icelink.link.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return n.jca["l_"+e](n.pid,t.toJson(),{onSuccess:function(e){var r,s;return s=t.getOnSuccess(),s?(r=fm.icelink.createSuccessArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0},onFailure:function(e){var r,s;return s=t.getOnFailure(),s?(r=fm.icelink.createFailureArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0},onComplete:function(e){var r,s;return s=t.getOnComplete(),s?(r=fm.icelink.createCompleteArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0}})}return o[e].call(n,t)}}(c):"accept"===c?fm.icelink.link.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return n.jca["l_"+e](n.pid,t.toJson(),{onSuccess:function(e){var r,s;return s=t.getOnSuccess(),s?(r=fm.icelink.acceptSuccessArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0},onFailure:function(e){var r,s;return s=t.getOnFailure(),s?(r=fm.icelink.acceptFailureArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0},onComplete:function(e){var r,s;return s=t.getOnComplete(),s?(r=fm.icelink.acceptCompleteArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0}})}return o[e].call(n,t)}}(c):"close"===c?fm.icelink.link.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if(!t){if("undefined"==typeof n.jca["l_"+e+"1"])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+"1).");return void n.jca["l_"+e+"1"](n.pid)}if("undefined"==typeof n.jca["l_"+e+"3"])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+"3).");return n.jca["l_"+e+"3"](n.pid,t.toJson(),{onComplete:function(e){var r,s;return s=t.getOnComplete(),s?(r=fm.icelink.closeCompleteArgs.fromJson(e),r.setLink(n),r.setDynamicProperties(t.getDynamicProperties()),s(r)):void 0}})}return t?o[e].call(n,t):void o[e].call(n)}}(c):"addRemoteCandidate"===c?fm.icelink.link.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return n.jca["l_"+e](n.pid,t.toJson())}return o[e].call(n,t)}}(c):"sendData"===c?fm.icelink.link.prototype[c]=function(e){return function(t,n){var r;if(r=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof r.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return r.jca["l_"+e](r.pid,t.toJson(),n)}return o[e].call(r,t,n)}}(c):"sendReliableString"===c?fm.icelink.link.prototype[c]=function(e){return function(t,n){var r;if(r=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof r.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return r.jca["l_"+e](r.pid,t.toJson(),n)}return o[e].call(r,t,n)}}(c):"sendReliableBytes"===c?fm.icelink.link.prototype[c]=function(e){return function(t,n){var r;if(r=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof r.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return r.jca["l_"+e](r.pid,t.toJson(),fm.crypto.base64Encode(n))}return o[e].call(r,t,n)}}(c):"getSuppressPrivateCandidates"===c||"getSuppressPublicCandidates"===c||"getSuppressRelayCandidates"===c||"getRtpPortMin"===c||"getRtpPortMax"===c||"getRelayUsernames"===c||"getRelayRealms"===c||"getRelayPasswords"===c||"getCandidateMode"===c||"getEarlyCandidatesTimeout"===c||"getServerAddresses"===c||"getServerAddress"===c||"getServerPort"===c||"getServerIPAddress"===c||"getPeerId"===c||"getTieBreaker"===c||"getControlling"===c||"getWasUp"===c||"getReachedServer"===c||"getReachedPeer"===c||"getLocalOfferAnswer"===c||"getRemoteOfferAnswer"===c||"getIsCreating"===c||"getHasCreated"===c||"getIsAccepting"===c||"getHasAccepted"===c||"getIsClosing"===c||"getHasClosed"===c||"getIsOpening"===c||"getHasOpened"===c||"getIsOpened"===c||"getAllLocalCandidates"===c||"getAllRemoteCandidates"===c||"getAllLocalCandidateTypes"===c||"getAllRemoteCandidateTypes"===c?fm.icelink.link.prototype[c]=function(e){return function(){var t;if(t=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof t.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return b=t.jca["l_"+e](t.pid),"getServerAddresses"===e||"getRelayUsernames"===e||"getRelayRealms"===e||"getRelayPasswords"===e?b=fm.serializer.deserializeStringArray(b):"getCandidateMode"===e?b=fm.icelink.candidate.modeFromJson(b):"getLocalOfferAnswer"===e||"getRemoteOfferAnswer"===e?b=fm.icelink.offerAnswer.fromJson(b):"getAllLocalCandidates"===e||"getAllRemoteCandidates"===e?b=fm.icelink.candidate.fromJsonMultiple(b):("getAllLocalCandidateTypes"===e||"getAllRemoteCandidateTypes"===e)&&(b=fm.icelink.candidate.typesFromJsonMultiple(b)),b}return o[e].call(t)}}(c):"setSuppressPrivateCandidates"===c||"setSuppressPublicCandidates"===c||"setSuppressRelayCandidates"===c||"setRtpPortMin"===c||"setRtpPortMax"===c||"setRelayUsernames"===c||"setRelayRealms"===c||"setRelayPasswords"===c||"setCandidateMode"===c||"setEarlyCandidatesTimeout"===c||"setServerAddresses"===c||"setServerAddress"===c||"setServerPort"===c||"setServerIPAddress"===c||"setPeerId"===c?fm.icelink.link.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["l_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (link."+e+").");return"setServerAddresses"===e||"setRelayUsernames"===e||"setRelayRealms"===e||"setRelayPasswords"===e?t=fm.serializer.serializeStringArray(t):"setCandidateMode"===e&&(t=fm.icelink.candidate.modeToJson(t)),n.jca["l_"+e](n.pid,t)}return o[e].call(n,t)}}(c):fm.icelink.link.prototype[c]=b);l=fm.icelink.webrtc.localMediaStream.prototype,u={};for(c in l)b=l[c],"constructor"!==c&&(u[c]=l[c],0===c.indexOf("initialize")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(t){var n;return n=this,fm.icelink.webrtc.willUsePlugin()?fm.icelink.webrtc.getCoreControl({callback:function(r){if(n.jca=r,"undefined"==typeof n.jca.lms_create)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream.create).");return n.pid=n.jca.lms_create(n.getDefaultVideoPreviewScale(),n.getDefaultVideoScale(),n.getDefaultVideoSource(),{onAudioLevel:function(e){var t;return t=new fm.icelink.webrtc.audioCaptureLevelArgs,t.setLevel(e),n.raiseAudioLevel(t)}}),u[e].call(n,t)}}):u[e].call(n,t)}}(c):0===c.indexOf("stop")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(){var t;if(t=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof t.jca["lms_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream."+e+").");return t.jca["lms_"+e](t.pid)}return u[e].call(t)}}(c):0===c.indexOf("start")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["lms_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream."+e+").");return n.jca["lms_"+e](n.pid,t.toJson(),{onSuccess:function(e){return function(e,r,s){var i,o,a,u;return fm.util.observe(window,"beforeunload",function(){n.stop()}),i=n.getAudioCaptureProvider(),u=n.getVideoCaptureProvider(),i&&i.setLocalStream(n,r?fm.json.deserialize(r):[]),u&&u.setLocalStream(n,s?fm.json.deserialize(s):[]),a=t.getOnSuccess(),a?(o=fm.icelink.webrtc.localStartSuccessArgs.fromJson(e),o.setLocalStream(n),a(o)):void 0}}(this),onFailure:function(e){return function(e){var r,s;return s=t.getOnFailure(),s?(r=fm.icelink.webrtc.localStartFailureArgs.fromJson(e),r.setLocalStream(n),s(r)):void 0}}(this)})}return u[e].call(n,t)}}(c):0===c.indexOf("mute")||0===c.indexOf("unmute")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(){var t;if(t=this,!fm.icelink.webrtc.willUsePlugin())return u[e].call(t);if("undefined"==typeof t.jca["lms_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream."+e+").");return t.jca["lms_"+e](t.pid),"muteAudio"===e?t.raiseAudioMuted():"muteVideo"===e?t.raiseVideoMuted():"unmuteAudio"===e?t.raiseAudioUnmuted():"unmuteVideo"===e?t.raiseVideoUnmuted():void 0}}(c):0===c.indexOf("getAudioIsMuted")||0===c.indexOf("getVideoIsMuted")||0===c.indexOf("getAudioVolume")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(){var t;if(t=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof t.jca["lms_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream."+e+").");return t.jca["lms_"+e](t.pid)}return u[e].call(t)}}(c):0===c.indexOf("setAudioVolume")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["lms_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream."+e+").");return n.jca["lms_"+e](n.pid,t)}return u[e].call(n,t)}}(c):0===c.indexOf("setVideoParameters")?fm.icelink.webrtc.localMediaStream.prototype[c]=function(e){return function(t,n,r){var s;if(s=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof s.jca["lms_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (localMediaStream."+e+").");return t||(t=0),n||(n=0),r||(r=0),s.jca["lms_"+e](s.pid,t,n,r)}return u[e].call(s,t,n,r)}}(c):fm.icelink.webrtc.localMediaStream.prototype[c]=b);d=fm.icelink.stream.prototype,f={};for(c in d)b=d[c],"constructor"!==c&&(f[c]=d[c],"getDirection"===c||"getMultiplexRtpRtcp"===c?fm.icelink.stream.prototype[c]=function(e){return function(){var t;if(t=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof t.jca["s_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (stream."+e+").");return t.jca["s_"+e](t.pid)}return f[e].call(t)}}(c):"setDirection"===c||"setMultiplexRtpRtcp"===c?fm.icelink.stream.prototype[c]=function(e){return function(t){var n;if(n=this,fm.icelink.webrtc.willUsePlugin()){if("undefined"==typeof n.jca["s_"+e])throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (stream."+e+").");return n.jca["s_"+e](n.pid,t)}return f[e].call(n,t)}}(c):fm.icelink.stream.prototype[c]=b);for(_=["audioStream","videoStream"],r=function(e){var t,n,r;r=fm.icelink.webrtc[e].prototype.constructor,d=fm.icelink.webrtc[e].prototype,n=fm.icelink.webrtc[e],fm.icelink.webrtc[e]=function(t,n){var s;return s=this,arguments.length<2&&(n=!0),fm.icelink.webrtc.willUsePlugin()&&fm.icelink.webrtc.getCoreControl({callback:function(r){if(s.jca=r,"audioStream"===e){if("undefined"==typeof s.jca.as_create)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (audioStream.create).");return s.pid=s.jca.as_create(t.pid,n)}if("undefined"==typeof s.jca.vs_create)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (videoStream.create).");return s.pid=s.jca.vs_create(t.pid,n)}}),r.apply(s,arguments),s};for(c in d)b=d[c],"constructor"!==c&&(fm.icelink.webrtc[e].prototype[c]=b);t=[];for(c in n)b=n[c],t.push(fm.icelink.webrtc[e][c]=b);return t},s=0,i=_.length;i>s;s++)y=_[s],r(y);t=fm.icelink.webrtc.dataChannelStream.prototype.constructor,n=fm.icelink.webrtc.dataChannelStream.prototype,e=fm.icelink.webrtc.dataChannelStream,fm.icelink.webrtc.dataChannelStream=function(e,n){var r;return r=this,arguments.length<2&&(n=!0),fm.icelink.webrtc.willUsePlugin()&&fm.icelink.webrtc.getCoreControl({callback:function(t){var s,i,o,a;if(r.jca=t,"undefined"==typeof r.jca.dcs_create||"undefined"==typeof r.jca.dcs_cache)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (dataChannelStream.create).");for(i=function(e){var t,n;return n=e.toJson(),t={onReceive:function(t){return function(t,n){var r,s,i;return s=e.getOnReceive(),s?(r=fm.icelink.webrtc.dataChannelReceiveArgs.fromJson(t),r.setChannelInfo(e),i=fm.icelink.webrtc.pluginLinks[n],i&&(r.setLink(i),r.setConference(i.getConference())),s(r)):void 0}}(this)},r.jca.dcs_cache(n,t)},o=0,a=e.length;a>o;o++)s=e[o],i(s);return r.pid=r.jca.dcs_create(n)}}),t.apply(r,arguments),r};for(c in n)b=n[c],"constructor"!==c&&(fm.icelink.webrtc.dataChannelStream.prototype[c]=b);for(c in e)b=e[c],fm.icelink.webrtc.dataChannelStream[c]=b;p=fm.icelink.webrtc.reliableDataStream.prototype.constructor,g=fm.icelink.webrtc.reliableDataStream.prototype,h=fm.icelink.webrtc.reliableDataStream,fm.icelink.webrtc.reliableDataStream=function(e){var t;return t=this,fm.icelink.webrtc.willUsePlugin()&&fm.icelink.webrtc.getCoreControl({callback:function(n){var r,s,i,o;if(t.jca=n,"undefined"==typeof t.jca.rds_create||"undefined"==typeof t.jca.rds_cache)throw new Error("The "+fm.icelink.webrtc.getPluginHostName()+" is inaccessible (reliableDataStream.create).");for(s=function(e){var n,r;return r=e.toJson(),n={onReceive:function(t){return function(t,n){var r,s,i;return s=e.getOnReceive(),s?(r=fm.icelink.webrtc.reliableDataReceiveArgs.fromJson(t),r.setChannel(e),i=fm.icelink.webrtc.pluginLinks[n],i&&(r.setLink(i),r.setConference(i.getConference())),s(r)):void 0}}(this)},t.jca.rds_cache(r,n)},i=0,o=e.length;o>i;i++)r=e[i],s(r);return t.pid=t.jca.rds_create()}}),p.apply(t,arguments),t};for(c in g)b=g[c],"constructor"!==c&&(fm.icelink.webrtc.reliableDataStream.prototype[c]=b);m=[];for(c in h)b=h[c],m.push(fm.icelink.webrtc.reliableDataStream[c]=b);return m}(),function(){var e,t,n,r,s,i,o,a,u,l,c;for(c=fm.icelink.webrtc.userMedia,a=["getMedia"],e=function(e){var t;return t=c[e],c[e]=function(){var n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=arguments[0],t.call(this,new fm.icelink.webrtc[e+"Args"](n))):t.apply(this,arguments)}},t=0,s=a.length;s>t;t++)o=a[t],e(o);for(fm.icelink.webrtc.linkExtensions.sendData=function(e){var t,n,r,s;for(r=[],t=n=1,s=arguments.length-1;s>=1?s>=n:n>=s;t=s>=1?++n:--n)r.push(arguments[t]);return e.sendData.apply(e,r)},fm.icelink.webrtc.linkExtensions.sendReliableString=function(e){var t,n,r,s;for(r=[],t=n=1,s=arguments.length-1;s>=1?s>=n:n>=s;t=s>=1?++n:--n)r.push(arguments[t]);return e.sendReliableString.apply(e,r)},fm.icelink.webrtc.linkExtensions.sendReliableBytes=function(e){var t,n,r,s;for(r=[],t=n=1,s=arguments.length-1;s>=1?s>=n:n>=s;t=s>=1?++n:--n)r.push(arguments[t]);return e.sendReliableBytes.apply(e,r)},u=[fm.icelink.link,fm.icelink.conference],l=[],n=0,i=u.length;i>n;n++)r=u[n],l.push(function(e){var t,n,r;return r=e.prototype.sendData,e.prototype.sendData=function(){var e,t,n,s;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=arguments[0],e=n.channelInfo||n.dataChannelInfo||n.channel||n.dataChannel,t=n.data||n.message,s=n.peerId,s?r.call(this,e,t,s):r.call(this,e,t)):r.apply(this,arguments)},n=e.prototype.sendReliableString,e.prototype.sendReliableString=function(){var e,t,r,s;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=arguments[0],e=r.reliableDataChannel||r.channelInfo||r.dataChannelInfo||r.channel||r.dataChannel,t=r.data||r.message||r.dataString,s=r.peerId,s?n.call(this,e,t,s):n.call(this,e,t)):n.apply(this,arguments)},t=e.prototype.sendReliableBytes,e.prototype.sendReliableBytes=function(){var e,n,r,s;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=arguments[0],e=r.reliableDataChannel||r.channelInfo||r.dataChannelInfo||r.channel||r.dataChannel,n=r.data||r.message||r.dataBytes,s=r.peerId,s?t.call(this,e,n,s):t.call(this,e,n)):t.apply(this,arguments)}}(r));return l}(),fm.icelink.webrtc});